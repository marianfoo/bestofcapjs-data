{"packages":[{"name":"@cap-js/db-service","version":"1.10.0","description":"CDS base database service","homepage":"https://github.com/cap-js/cds-dbs/tree/main/db-service#cds-base-database-service","repository":{"type":"git","url":"https://github.com/cap-js/cds-dbs"},"bugs":{"url":"https://github.com/cap-js/cds-dbs/issues"},"keywords":["CAP","CDS"],"author":"SAP SE (https://www.sap.com)","main":"index.js","types":"./dist/index.d.ts","files":["lib","CHANGELOG.md"],"engines":{"node":">=16","npm":">=8"},"scripts":{"test":"jest --silent"},"peerDependencies":{"@sap/cds":">=7.9"},"license":"SEE LICENSE","type":"database","tags":["database"],"gitHubOwner":"cap-js","gitHubRepo":"cds-dbs","licenseSource":"apache-2.0","forks":7,"stars":32,"addedToBoUI5":"2023-10-07T00:00:00.000Z","createdAt":"2023-06-23T13:37:40.739Z","updatedAt":"2024-05-28T15:25:16.757Z","vscodeInstalls":-1,"sourceType":"database","githublink":"https://github.com/cap-js/cds-dbs/tree/main//db-service/","readme":"# CDS base database service\n\nWelcome to the new base database service for [SAP Cloud Application Programming Model](https://cap.cloud.sap) Node.js, based on new, streamlined database architecture.\n\nFind documentation at https://cap.cloud.sap/docs/guides/databases\n\n## Support\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/cds-dbs/issues).\n\n## Contribution\n\nContribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Versioning\n\nThis library follows [Semantic Versioning](https://semver.org/).\nAll notable changes are documented in [CHANGELOG.md](CHANGELOG.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and cds-dbs contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/cds-dbs).","subPath":"/db-service/","downloadsCurrentMonth":59938,"downloadsCurrentFortnight":30628,"downloads365":340918,"downloadsFortnightGrowth":4.5,"downloadsHistory":[{"yearMonth":"2023-07","downloads":4896},{"yearMonth":"2023-08","downloads":13006},{"yearMonth":"2023-09","downloads":17403},{"yearMonth":"2023-10","downloads":23075},{"yearMonth":"2023-11","downloads":24354},{"yearMonth":"2023-12","downloads":28283},{"yearMonth":"2024-01","downloads":31734},{"yearMonth":"2024-02","downloads":39807},{"yearMonth":"2024-03","downloads":44017},{"yearMonth":"2024-04","downloads":53417},{"yearMonth":"2024-05","downloads":60716}],"npmlink":"https://www.npmjs.com/package/@cap-js/db-service","versions":[{"version":"created","date":"2023-06-23T13:37:40.739Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/created","changelog":"","sourceType":"database"},{"version":"1.0.0","date":"2023-06-23T13:37:41.041Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.0.0","changelog":"","sourceType":"database"},{"version":"modified","date":"2024-05-28T15:25:16.757Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/modified","changelog":"","sourceType":"database"},{"version":"1.0.1","date":"2023-07-03T17:51:50.639Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.0.1","changelog":"","sourceType":"database"},{"version":"1.1.0","date":"2023-08-01T14:35:14.059Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.1.0","changelog":"","sourceType":"database"},{"version":"1.2.0","date":"2023-09-06T08:27:34.280Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.2.0","changelog":"","sourceType":"database"},{"version":"1.2.1","date":"2023-09-08T09:51:24.835Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.2.1","changelog":"","sourceType":"database"},{"version":"1.3.0","date":"2023-10-06T12:06:13.421Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.3.0","changelog":"","sourceType":"database"},{"version":"1.3.1","date":"2023-10-10T07:26:19.251Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.3.1","changelog":"","sourceType":"database"},{"version":"1.3.2","date":"2023-10-13T19:00:38.184Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.3.2","changelog":"","sourceType":"database"},{"version":"1.4.0","date":"2023-11-20T13:29:04.830Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.4.0","changelog":"","sourceType":"database"},{"version":"1.5.0","date":"2023-12-06T09:28:21.459Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.5.0","changelog":"","sourceType":"database"},{"version":"1.5.1","date":"2023-12-20T10:39:20.258Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.5.1","changelog":"","sourceType":"database"},{"version":"1.6.0","date":"2024-02-02T14:05:54.397Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.6.0","changelog":"","sourceType":"database"},{"version":"1.6.1","date":"2024-02-05T08:27:41.007Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.6.1","changelog":"","sourceType":"database"},{"version":"1.6.2","date":"2024-02-16T14:26:09.411Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.6.2","changelog":"","sourceType":"database"},{"version":"1.6.3","date":"2024-02-21T10:08:12.116Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.6.3","changelog":"","sourceType":"database"},{"version":"1.6.4","date":"2024-02-28T15:15:12.960Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.6.4","changelog":"","sourceType":"database"},{"version":"1.7.0","date":"2024-03-22T13:48:22.313Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.7.0","changelog":"","sourceType":"database"},{"version":"1.8.0","date":"2024-04-12T11:48:25.838Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.8.0","changelog":"","sourceType":"database"},{"version":"1.9.0","date":"2024-05-08T09:32:27.711Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.9.0","changelog":"","sourceType":"database"},{"version":"1.9.1","date":"2024-05-17T10:40:06.280Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.9.1","changelog":"","sourceType":"database"},{"version":"1.9.2","date":"2024-05-28T15:25:16.525Z","link":"https://www.npmjs.com/package/@cap-js/db-service/v/1.9.2","changelog":"","sourceType":"database"}]},{"name":"@cap-js/hana","version":"0.5.0","description":"CDS database service for SAP HANA","homepage":"https://cap.cloud.sap/","keywords":["CAP","CDS","HANA"],"author":"SAP SE (https://www.sap.com)","main":"index.js","files":["cds-plugin.js","lib","CHANGELOG.md"],"engines":{"node":">=16","npm":">=8"},"scripts":{"test":"npm start && jest --silent","test:remote":"jest --silent","start":"npm run start:hce || npm run start:hxe","start:hce":"cd ./tools/docker/hce/ && ./start.sh","start:hxe":"cd ./tools/docker/hxe/ && ./start.sh"},"dependencies":{"hdb":"^0.19.5","@cap-js/db-service":"^1.9.0"},"peerDependencies":{"@sap/hana-client":">=2","@sap/cds":">=7.6"},"peerDependenciesMeta":{"@sap/hana-client":{"optional":true}},"cds":{"requires":{"kinds":{"sql":{"[production]":{"kind":"hana"}},"hana":{"impl":"@cap-js/hana"}},"db":"sql"}},"license":"SEE LICENSE","type":"database","tags":["database"],"gitHubOwner":"cap-js","gitHubRepo":"cds-dbs","licenseSource":"apache-2.0","forks":7,"stars":32,"addedToBoUI5":"2023-10-07T00:00:00.000Z","createdAt":"2023-12-06T09:28:23.775Z","updatedAt":"2024-05-17T10:40:10.104Z","vscodeInstalls":-1,"sourceType":"database","githublink":"https://github.com/cap-js/cds-dbs/tree/main//hana/","readme":"# CDS database service for SAP HANA\n\nWelcome to the new SAP HANA database service for [SAP Cloud Application Programming Model](https://cap.cloud.sap) Node.js, based on new, streamlined database architecture.\n\n## Setup\n\nIn general, all you need to do is to install one of the database packages, as follows:\n\n```sh\nnpm add @cap-js/hana\n```\n\nLearn more about setup and usage in the [respective database guide](https://cap.cloud.sap/docs/guides/databases-hana).\n\n\n## Support\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/cds-dbs/issues).\n\n## Contribution\n\nContribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and cds-dbs contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/cds-dbs).","subPath":"/hana/","downloadsCurrentMonth":1079,"downloadsCurrentFortnight":853,"downloads365":2375,"downloadsFortnightGrowth":277.43,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":250},{"yearMonth":"2024-01","downloads":188},{"yearMonth":"2024-02","downloads":322},{"yearMonth":"2024-03","downloads":289},{"yearMonth":"2024-04","downloads":245},{"yearMonth":"2024-05","downloads":1081}],"npmlink":"https://www.npmjs.com/package/@cap-js/hana","versions":[{"version":"created","date":"2023-12-06T09:28:23.775Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/created","changelog":"","sourceType":"database"},{"version":"0.0.1","date":"2023-12-06T09:28:24.113Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.0.1","changelog":"","sourceType":"database"},{"version":"modified","date":"2024-05-17T10:40:10.104Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/modified","changelog":"","sourceType":"database"},{"version":"0.0.2","date":"2023-12-11T12:11:44.173Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.0.2","changelog":"","sourceType":"database"},{"version":"0.0.3","date":"2023-12-20T10:39:22.147Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.0.3","changelog":"","sourceType":"database"},{"version":"0.0.4","date":"2024-02-02T14:05:59.195Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.0.4","changelog":"","sourceType":"database"},{"version":"0.0.5","date":"2024-02-16T14:26:17.126Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.0.5","changelog":"","sourceType":"database"},{"version":"0.0.6","date":"2024-02-28T15:15:19.422Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.0.6","changelog":"","sourceType":"database"},{"version":"0.1.0","date":"2024-03-22T13:48:33.803Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.1.0","changelog":"","sourceType":"database"},{"version":"0.2.0","date":"2024-04-12T11:48:29.457Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.2.0","changelog":"","sourceType":"database"},{"version":"0.3.0","date":"2024-05-08T09:32:39.043Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.3.0","changelog":"","sourceType":"database"},{"version":"0.4.0","date":"2024-05-17T10:40:09.887Z","link":"https://www.npmjs.com/package/@cap-js/hana/v/0.4.0","changelog":"","sourceType":"database"}]},{"name":"@cap-js/postgres","version":"1.9.0","description":"CDS database service for Postgres","homepage":"https://github.com/cap-js/cds-dbs/tree/main/postgres#cds-database-service-for-postgres","repository":{"type":"git","url":"https://github.com/cap-js/cds-dbs"},"bugs":{"url":"https://github.com/cap-js/cds-dbs/issues"},"keywords":["CAP","CDS","Postgres"],"author":"SAP SE (https://www.sap.com)","main":"index.js","files":["cds-plugin.js","lib","CHANGELOG.md"],"engines":{"node":">=16","npm":">=8"},"scripts":{"test":"npm start && jest --silent","start":"docker-compose -f pg-stack.yml up -d"},"dependencies":{"@cap-js/db-service":"^1.9.0","pg":"^8"},"peerDependencies":{"@sap/cds":">=7.6","@sap/cds-dk":">=7.5"},"peerDependenciesMeta":{"@sap/cds-dk":{"optional":true}},"cds":{"requires":{"kinds":{"sql":{"[production]":{"kind":"postgres"},"[pg!]":{"kind":"postgres","credentials":{"host":"localhost","port":5432,"user":"postgres","password":"postgres","database":"postgres"}}},"postgres":{"impl":"@cap-js/postgres","dialect":"postgres","vcap":{"label":"postgresql-db"},"schema_evolution":"auto"}},"db":"sql"}},"license":"SEE LICENSE","type":"database","tags":["database"],"gitHubOwner":"cap-js","gitHubRepo":"cds-dbs","licenseSource":"apache-2.0","forks":7,"stars":32,"addedToBoUI5":"2023-10-07T00:00:00.000Z","createdAt":"2023-06-23T13:37:44.529Z","updatedAt":"2024-05-08T09:32:35.727Z","vscodeInstalls":-1,"sourceType":"database","githublink":"https://github.com/cap-js/cds-dbs/tree/main//postgres/","readme":"# CDS database service for Postgres\n\nWelcome to the new Postgres database service for [SAP Cloud Application Programming Model](https://cap.cloud.sap) Node.js, based on new, streamlined database architecture and [*pg* driver](https://www.npmjs.com/package/pg) .\n\n## Setup\n\nIn general, all you need to do is to install one of the database packages, as follows:\n\n```sh\nnpm add @cap-js/postgres\n```\n\nLearn more about setup and usage in the [respective database guide](https://cap.cloud.sap/docs/guides/databases-postgres).\n\n## Support\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/cds-dbs/issues).\n\n## Contribution\n\nContribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Versioning\n\nThis library follows [Semantic Versioning](https://semver.org/).\nAll notable changes are documented in [CHANGELOG.md](CHANGELOG.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and cds-dbs contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/cds-dbs).\n\n## migration guide from `cds-pg` to `@cap-js/postgres`\n\n`@cap-js/postgres` works as a drop-in replacement for `cds-pg`.  \nHowever, some preliminary checks and cleanups help:\n\n- for using the BTP Postgres Hyperscaler as database, \n  - know that the credentials are picked up automatically by from the enviornment (`VCAP_SERVICES.postgres`)\n  - the service binding label is `postgresql-db`\n  - `cds-dbm` is replaced by a hand-crafted \"db-deployer\" app &rarr; see below\n- your local `package.json`: you can safely remove the entry `cds.requires.postgres` previously mandatory for `cds-pg`\n- recommendation: set the env var `DEBUG=sql` during local development to see DB-level output from PostgreSQL\n\n### schema migration\n\n`@cap-js/postgres` brings the same schema evolution capabilities to PostgreSQL known from HANA and SQLite.  \nEnabling schema migration in an existing `cds-pg`-based project consists of generating and deploying a \"csn-snapshot\" of your database structure.\n\n#### local development\n\nFirst, set a basis for the evolution\n`$> cds deploy --model-only`  \n&rarr; this will create the table `cds_model` laying the foundation for the schema migration\n\nSubsequent deployments can then re-use the standard deploy mechanism via `$> cds deploy`\n\n#### On BTP, Cloud Foundry environment\n\nThe above \"csn-snapshots\" can be implemented via the `mtar`-based approach. At the same time, the same `mtar` can be used for subsequent PostgreSQL deployments (with schema evolution).\n\nTwo major steps in addition to enabling the schema evolution are included in this `mtar`.\n\n1. create local folder `deployer` (any name works)\n2. in `deployer`, create a `package.json` containing\n\n  ```json\n  ...\n  \"//npm run migrate\": \"only one-time!\",\n  \"migrate\": \"cds deploy --model-only\",\n  \"//npm run deploy\": \"subsequent deployments\",\n  \"deploy\": \"cds deploy\"\n  ...\n  ```\n\n3. add a section to your `/mta.yaml` denoting the `deployer` directory as a standalone application that runs one-time\n\n```yaml\n- name: pg-db-deployer\n    type: custom\n    path: deployer\n    parameters:\n      buildpacks: nodejs_buildpack\n      no-route: true\n      no-start: true\n      disk-quota: 2GB\n      memory: 512MB\n      tasks:\n      - name: migrate\n        command: npm run migrate\n      # # for subsequent deployments\n      # - name: deploy\n      #  command: npm run deploy\n        disk-quota: 2GB\n        memory: 512MB\n    build-parameters:\n      before-all:\n        custom: \n        - npm i\n        # generate the \"csn-snapshot\" - only necessary for one-time migration,\n        # can be commented out on subsequent deployments\n        - cds compile '*' -2 json > deployer/schema.csn\n      ignore: [\"node_modules/\"]\n    requires:\n      - name: pg-database\n\nresources:\n  - name: pg-database\n    parameters:\n      path: ./pg-options.json\n      service: postgresql-db\n      service-plan: trial # change to yours!\n      skip-service-updates:\n        parameters: true\n      service-tags:\n        - plain\n    type: org.cloudfoundry.managed-service\n```\n\n## migration points to consider\n\n### mixed-case identifiers\n\neven though column names that are not double-quoted are folded to lowercase in PostgreSQL (`yourName` -> `yourname`, `\"yourName\"` -> `yourName`),  \nyou can use the mixed case definitions from your `.cds` files to reference them.  \n\nexample: `brewery_id` on DB level -> `brewery_ID` on CDS level\n\nformerly w/ `cds-pg` you had to follow the DB level: `SELECT.from(Beers).columns('brewery_id').groupBy('brewery_id')`  \nnow, re-use the CDS definitions: `SELECT.from(Beers).columns('brewery_ID').groupBy('brewery_ID')`\n\nSo please adjust your `CQL` statements accordingly.\n\n### timezones (potential _**BREAKING CHANGE**_)\n\nany date- + time-type will get stored in [`UTC`](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) **without any timezone identifier in the actual data field**.  \nCAP's inbound- and outbound adapters take care of converting incoming and outgoing data from/to the desired time zones.  \nSo when a `dateime` comes in being in [an ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) compatible format  \n  `2009-01-01T15:00:00+01:00` (15:00:00 on January 1 2009 in Vienna (CEST))  \nwill get stored as  \n  `2009-01-01T13:00:00` (13:00:00 on January 1 2009 in UTC).\n\nPlease be aware of that concept and rely on the client to parse UTC in your desired timezone (format).\n\n### `cds.DatabaseService` consumption\n\n`InsertResult` now does only return the affected rows and their `ID`s.\n\n```js\nconst entries = [\n  { name: 'Beer1', /* ... */ },\n  { name: 'Beer2', /* ... */ },\n  { name: 'Beer3', /* ... */ }\n]\nconst insertResult = await cds.run(INSERT.into(Beers).entries(entries))\nexpect(insertResult.affectedRows).to.equal(3)\nconst beers = [...insertResult] //> this calls the [Symbol.iterator] method of the insert result\n// beers:\n// [ \n//   { ID: \"f81d7ee5-922b-48a1-a12a-a899b8594c99\" }, \n//   { ID: \"ddda7f8e-e26b-430f-a80c-ac2c7df29510\" },\n//   { ID: \"7228c40f-0046-4f53-8a2b-3d55ad825f59\" }\n// ]\n```\n\nIn `cds-pg`, we additionally surfaced the entire inserted dataset.\n\n```js\n// continuing after the insert of the above example:\n// const insertResult = await cds.run(INSERT.into(Beers).entries(entries))\n\n// this works NO MORE - see above\nconst beers = insertResult.results\nexpect(beers.length).toStrictEqual(3)\nexpect(beers[0].ID).toMatch(uuidRegex)\nexpect(beers[0].createdAt.toISOString()).toMatch(timestampRegex)\nexpect(beers[0].modifiedAt.toISOString()).toMatch(timestampRegex)\n```\n\nSo please adjust your runtime coding accordingly.\n","subPath":"/postgres/","downloadsCurrentMonth":7475,"downloadsCurrentFortnight":3663,"downloads365":52809,"downloadsFortnightGrowth":-3.91,"downloadsHistory":[{"yearMonth":"2023-07","downloads":759},{"yearMonth":"2023-08","downloads":1426},{"yearMonth":"2023-09","downloads":3070},{"yearMonth":"2023-10","downloads":4170},{"yearMonth":"2023-11","downloads":4776},{"yearMonth":"2023-12","downloads":4138},{"yearMonth":"2024-01","downloads":5835},{"yearMonth":"2024-02","downloads":6562},{"yearMonth":"2024-03","downloads":7108},{"yearMonth":"2024-04","downloads":7295},{"yearMonth":"2024-05","downloads":7562}],"npmlink":"https://www.npmjs.com/package/@cap-js/postgres","versions":[{"version":"created","date":"2023-06-23T13:37:44.529Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/created","changelog":"","sourceType":"database"},{"version":"1.0.0","date":"2023-06-23T13:37:44.855Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.0.0","changelog":"","sourceType":"database"},{"version":"modified","date":"2024-05-08T09:32:35.727Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/modified","changelog":"","sourceType":"database"},{"version":"1.0.1","date":"2023-07-03T17:51:53.619Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.0.1","changelog":"","sourceType":"database"},{"version":"1.1.0","date":"2023-08-01T14:35:17.832Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.1.0","changelog":"","sourceType":"database"},{"version":"1.2.0","date":"2023-09-06T08:27:38.555Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.2.0","changelog":"","sourceType":"database"},{"version":"1.2.1","date":"2023-09-08T09:51:48.261Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.2.1","changelog":"","sourceType":"database"},{"version":"1.3.0","date":"2023-10-06T12:06:17.182Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.3.0","changelog":"","sourceType":"database"},{"version":"1.3.1","date":"2023-10-10T07:26:23.758Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.3.1","changelog":"","sourceType":"database"},{"version":"1.4.0","date":"2023-11-20T13:29:08.674Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.4.0","changelog":"","sourceType":"database"},{"version":"1.4.1","date":"2023-11-24T09:33:13.971Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.4.1","changelog":"","sourceType":"database"},{"version":"1.5.0","date":"2024-02-02T14:05:57.527Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.5.0","changelog":"","sourceType":"database"},{"version":"1.5.1","date":"2024-02-16T14:26:14.786Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.5.1","changelog":"","sourceType":"database"},{"version":"1.6.0","date":"2024-03-22T13:48:29.767Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.6.0","changelog":"","sourceType":"database"},{"version":"1.7.0","date":"2024-04-12T11:48:27.705Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.7.0","changelog":"","sourceType":"database"},{"version":"1.8.0","date":"2024-05-08T09:32:35.557Z","link":"https://www.npmjs.com/package/@cap-js/postgres/v/1.8.0","changelog":"","sourceType":"database"}]},{"name":"@cap-js/sqlite","version":"1.7.1","description":"CDS database service for SQLite","homepage":"https://github.com/cap-js/cds-dbs/tree/main/sqlite#cds-database-service-for-sqlite","repository":{"type":"git","url":"https://github.com/cap-js/cds-dbs"},"bugs":{"url":"https://github.com/cap-js/cds-dbs/issues"},"keywords":["CAP","CDS","SQLite"],"author":"SAP SE (https://www.sap.com)","main":"index.js","files":["cds-plugin.js","lib","CHANGELOG.md"],"engines":{"node":">=16","npm":">=8"},"scripts":{"test":"jest --silent"},"dependencies":{"@cap-js/db-service":"^1.9.0","better-sqlite3":"^11.0.0"},"peerDependencies":{"@sap/cds":">=7.6"},"cds":{"requires":{"kinds":{"sql":{"[development]":{"kind":"sqlite"}},"sqlite":{"impl":"@cap-js/sqlite"}},"db":"sql"}},"license":"SEE LICENSE","type":"database","tags":["sqlite"],"gitHubOwner":"cap-js","gitHubRepo":"cds-dbs","licenseSource":"apache-2.0","forks":7,"stars":32,"addedToBoUI5":"2023-10-07T00:00:00.000Z","createdAt":"2023-04-04T13:44:14.882Z","updatedAt":"2024-05-17T10:40:08.345Z","vscodeInstalls":-1,"sourceType":"database","githublink":"https://github.com/cap-js/cds-dbs/tree/main//sqlite/","readme":"# CDS database service for SQLite\n\nWelcome to the new SQLite database service for [SAP Cloud Application Programming Model](https://cap.cloud.sap) Node.js, based on new, streamlined database architecture and [*better-sqlite* driver](https://www.npmjs.com/package/better-sqlite3) .\n\n## Setup\n\nIn general, all you need to do is to install one of the database packages, as follows:\n\nUsing SQLite for development:\n\n```sh\nnpm add @cap-js/sqlite -D\n```\n\nLearn more about setup and usage in the [respective database guide](https://cap.cloud.sap/docs/guides/databases-sqlite).\n\n## Support\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/cds-dbs/issues).\n\n## Contribution\n\nContribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Versioning\n\nThis library follows [Semantic Versioning](https://semver.org/).\nAll notable changes are documented in [CHANGELOG.md](CHANGELOG.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and cds-dbs contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/cds-dbs).","subPath":"/sqlite/","downloadsCurrentMonth":57469,"downloadsCurrentFortnight":29185,"downloads365":326289,"downloadsFortnightGrowth":3.19,"downloadsHistory":[{"yearMonth":"2023-07","downloads":4542},{"yearMonth":"2023-08","downloads":12405},{"yearMonth":"2023-09","downloads":16713},{"yearMonth":"2023-10","downloads":21513},{"yearMonth":"2023-11","downloads":22239},{"yearMonth":"2023-12","downloads":27809},{"yearMonth":"2024-01","downloads":31220},{"yearMonth":"2024-02","downloads":38471},{"yearMonth":"2024-03","downloads":41554},{"yearMonth":"2024-04","downloads":51135},{"yearMonth":"2024-05","downloads":58333}],"npmlink":"https://www.npmjs.com/package/@cap-js/sqlite","versions":[{"version":"created","date":"2023-04-04T13:44:14.882Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/created","changelog":"","sourceType":"database"},{"version":"0.1.0","date":"2023-04-04T13:44:15.224Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/0.1.0","changelog":"","sourceType":"database"},{"version":"modified","date":"2024-05-17T10:40:08.345Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/modified","changelog":"","sourceType":"database"},{"version":"0.2.0","date":"2023-05-04T13:53:25.229Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/0.2.0","changelog":"","sourceType":"database"},{"version":"1.0.0","date":"2023-06-23T13:37:42.836Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.0.0","changelog":"","sourceType":"database"},{"version":"1.0.1","date":"2023-07-03T17:51:52.153Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.0.1","changelog":"","sourceType":"database"},{"version":"1.1.0","date":"2023-08-01T14:35:16.006Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.1.0","changelog":"","sourceType":"database"},{"version":"1.2.0","date":"2023-09-06T08:27:36.196Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.2.0","changelog":"","sourceType":"database"},{"version":"1.2.1","date":"2023-09-08T09:51:27.324Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.2.1","changelog":"","sourceType":"database"},{"version":"1.3.0","date":"2023-10-06T12:06:15.303Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.3.0","changelog":"","sourceType":"database"},{"version":"1.3.1","date":"2023-10-10T07:26:21.179Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.3.1","changelog":"","sourceType":"database"},{"version":"1.4.0","date":"2023-11-20T13:29:06.422Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.4.0","changelog":"","sourceType":"database"},{"version":"1.5.0","date":"2024-02-02T14:05:55.908Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.5.0","changelog":"","sourceType":"database"},{"version":"1.5.1","date":"2024-02-16T14:26:12.093Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.5.1","changelog":"","sourceType":"database"},{"version":"1.6.0","date":"2024-03-22T13:48:27.373Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.6.0","changelog":"","sourceType":"database"},{"version":"1.7.0","date":"2024-05-08T09:32:32.108Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.7.0","changelog":"","sourceType":"database"},{"version":"1.7.1","date":"2024-05-17T10:40:08.138Z","link":"https://www.npmjs.com/package/@cap-js/sqlite/v/1.7.1","changelog":"","sourceType":"database"}]},{"name":"cds-plugin-ui5","version":"0.9.2","description":"A CDS server plugin to inject the middlewares of all related UI5 tooling based projects.","author":"Peter Muessig","license":"Apache-2.0","homepage":"https://github.com/ui5-community/ui5-ecosystem-showcase/tree/main/packages/cds-plugin-ui5#readme","repository":{"type":"git","url":"https://github.com/ui5-community/ui5-ecosystem-showcase.git","directory":"packages/cds-plugin-ui5"},"dependencies":{"@ui5/fs":"^3.0.5","@ui5/project":"^3.9.1","@ui5/server":"^3.2.0","js-yaml":"^4.1.0","node-html-parser":"^6.1.13","semver":"^7.6.2"},"devDependencies":{"@sap/cds":"^6.8.4","express":"^4.19.2"},"peerDependencies":{"@sap/cds":">=6.8.2","express":">=4.18.2"},"type":"plugin","tags":["ui5"],"gitHubOwner":"ui5-community","gitHubRepo":"ui5-ecosystem-showcase","licenseSource":"apache-2.0","forks":90,"stars":183,"addedToBoUI5":"2024-02-02T00:00:00.000Z","createdAt":"2023-05-26T11:23:41.521Z","updatedAt":"2024-05-15T15:55:42.735Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/ui5-community/ui5-ecosystem-showcase/tree/main/packages/cds-plugin-ui5/","readme":"# cds-plugin-ui5\n\n> :wave: This is a **community project** and there is no official support for this package! Feel free to use it, open issues, contribute, and help answering questions.\n\nThe `cds-plugin-ui5` is a CDS server `cds-plugin` which enables the integration of UI5 tooling based (UI5 freestyle or Fiori elements) projects into the CDS server via the UI5 tooling express middlewares. The UI5 or Fiori elements projects just need to be located in the `app` folder of the CDS server, or via the `cds.env.folders.app` variable, or be a dependency of the CDS server.\n\n> :construction: **Note**\n> This cds-plugin is still work in progress and not final yet!\n\n## Prerequisites\n\nThe plugin requires [`@sap/cds`](https://www.npmjs.com/package/@sap/cds) `>=6.8.2`.\n\n## Usage\n\nAdd a `devDependency` to the `cds-plugin-ui5` to your CDS server project:\n\n```sh\nnpm add cds-plugin-ui5 -D\n```\n\nThat's it!\n\n### Configuration\n\nThe plugin accepts configuration to control the mount path for the embedding into the CDS server and selected configuration options for the UI5 server middlewares which are embedded into the mount path of the CDS server.\n\n#### Mount Path\n\nThe mount path of the UI5 application configures the nested Router for the UI5 server middlewares to run under this predefined path. It is by default derived from the `metadata/name` of the `ui5.yaml`:\n\n```yaml\nspecVersion: \"3.0\"\nmetadata:\n  name: ui5.bookshop\ntype: application\n```\n\nThis configuration can be overruled by adding a the `customConfiguration/cds-plugin-ui5/mountPath` option into the `ui5.yaml`:\n\n```yaml\nspecVersion: \"3.0\"\nmetadata:\n  name: ui5.bookshop\ntype: application\ncustomConfiguration:\n  cds-plugin-ui5:\n    mountPath: /bookshop\n```\n\nIn some cases it is necessary to overrule the UI5 application local configuration in the CDS server. Therefore, you can add custom configuration into the `package.json` of the CDS server into the section: `cds/cds-plugin-ui5/modules/%moduleId%/mountPath`\n\n```json\n{\n  \"name\": \"cds-bookshop\",\n  [...]\n  \"cds\": {\n    [...]\n    \"cds-plugin-ui5\": {\n      \"modules\": {\n        \"ui5-bookshop\": {\n          \"mountPath\": \"/the-bookshop\"\n        }\n      }\n    }\n  }\n}\n```\n\nThe `moduleId` is either the directory name for local apps in the `app` directory of the CDS server or for dependencies the `name` from the `package.json`.\n\nThe configuration can also be injected with the environment variable `CDS_PLUGIN_UI5_MODULES`. It contains the JSON string from the configuration above, e.g.:\n\n```sh\nCDS_PLUGIN_UI5_MODULES=\"{ \\\"ui5-bookshop\\\": { \\\"mountPath\\\": \\\"/the-bookshop\\\" } }\" cds-serve\n```\n\n#### UI5 Server Middlewares\n\nIf you require to configure the UI5 server middlewares, you can do so by adding some selected configuration options in the `package.json` of the CDS server in the section: `cds/cds-plugin-ui5/modules/%moduleId%`\n\n```json\n{\n  \"name\": \"cds-bookshop\",\n  [...]\n  \"cds\": {\n    [...]\n    \"cds-plugin-ui5\": {\n      \"modules\": {\n        \"ui5-bookshop\": {\n          \"configFile\": \"ui5.yaml\",\n          \"workspaceConfigFile\": \"ui5-workspace.yaml\",\n          \"workspaceName\": \"default\",\n          \"versionOverride\": \"1.117.0\"\n        }\n      }\n    }\n  }\n}\n```\n\nThe `moduleId` is either the directory name for local apps in the `app` directory of the CDS server or for dependencies the `name` from the `package.json`.\n\nThe available configuration options are:\n\n* `configFile`: *`string`* - name of the config file (defaults to \"ui5.yaml\")\n* `workspaceConfigFile`: *`string`* - name of the workspace config file (defaults to \"ui5-workspace.yaml\")\n* `workspaceName`: *`string`* - name of the workspace (defaults to \"default\" when the file at workspaceConfigPath exists)\n* `versionOverride`: *`string`* - Framework version to use instead of the one defined in the root project\n\nIf the `configFile` or `workspaceConfigFile` startes with `./` or `../` then the config file is considered to be relative to the `package.json`.\n\nThe configuration can also be injected with the environment variable `CDS_PLUGIN_UI5_MODULES`. It contains the JSON string from the configuration above, e.g.:\n\n```sh\nCDS_PLUGIN_UI5_MODULES=\"{ \\\"ui5-bookshop\\\": { \\\"configFile\\\": \\\"ui5-dist.yaml\\\" } }\" cds-serve\n```\n\nThe configuration options from the UI5 server middlewares and the mount path can be mixed together as they both are in the same section of the `package.json`.\n\n## Info for UI5 Tooling Extension Developers\n\nCustom middlewares may generate virtual app pages which should also be listed as web applications in the welcome page of the `@sap/cds` server. This is possible by assigning a static `getAppPages` function to the middleware function. The following snippet show-cases how this can be done:\n\n```js\n// the middleware factory function\nmodule.exports = async ({ log, resources, options }) => {\n  // create the middleware function\n  const mwFn = (req, res, next) => {\n    [...]\n  };\n\n  /**\n   * Returns an array of app pages to be added to the welcome\n   * page of the <code>@sap/cds</code> server.\n   * @returns {undefined|string[]} array of app pages\n   */\n  mwFn.getAppPages = function() {\n    return [\"/test.html\"];\n  };\n\n  // finally return the middleware function\n  return mwFn;\n};\n```\n\nThe returned app pages will be added to the welcome page within the respective mount path.\n\n## Hints\n\nThis section includes hints for the usage of the `cds-plugin-ui5` with other tools.\n\n### JEST\n\nThe `cds-plugin-ui5` doesn't work with JEST out of the box as it internally is using dynamic imports to load helpers from the UI5 tooling. JEST fails with a `segmentation fault` error and therefore, the `cds-plugin-ui5` is disabled when running in context of JEST. It can be forcefully enabled by setting the environment variable `CDS_PLUGIN_UI5_ACTIVE=true`. But in this case you need to at least use Node.js 21 (https://github.com/nodejs/node/issues/35889) and you need to enable the experimental support for ES modules (https://jestjs.io/docs/ecmascript-modules). This enables the `cds-plugin-ui5` to run in context of JEST.\n\n## Support\n\nPlease use the GitHub bug tracking system to post questions, bug reports or to create pull requests.\n\n## Contributing\n\nAny type of contribution (code contributions, pull requests, issues) to this set of tooling extensions will be equally appreciated.\n\n## License\n\nThis work is [dual-licensed](../../LICENSE) under Apache 2.0 and the Derived Beer-ware License. The official license will be Apache 2.0 but finally you can choose between one of them if you use this work.\n","subPath":"packages/cds-plugin-ui5/","downloadsCurrentMonth":3560,"downloadsCurrentFortnight":1625,"downloads365":27257,"downloadsFortnightGrowth":-16.02,"downloadsHistory":[{"yearMonth":"2023-07","downloads":898},{"yearMonth":"2023-08","downloads":1101},{"yearMonth":"2023-09","downloads":2148},{"yearMonth":"2023-10","downloads":2164},{"yearMonth":"2023-11","downloads":1458},{"yearMonth":"2023-12","downloads":2038},{"yearMonth":"2024-01","downloads":2997},{"yearMonth":"2024-02","downloads":3780},{"yearMonth":"2024-03","downloads":3116},{"yearMonth":"2024-04","downloads":3466},{"yearMonth":"2024-05","downloads":3597}],"npmlink":"https://www.npmjs.com/package/cds-plugin-ui5","versions":[{"version":"created","date":"2023-05-26T11:23:41.521Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/created","changelog":"","sourceType":"plugin"},{"version":"0.1.0","date":"2023-05-26T11:23:41.708Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-05-15T15:55:42.735Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.1.1","date":"2023-06-03T21:05:00.498Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.1","changelog":"","sourceType":"plugin"},{"version":"0.1.2","date":"2023-06-15T12:35:34.551Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.2","changelog":"","sourceType":"plugin"},{"version":"0.1.3","date":"2023-06-22T09:00:03.180Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.3","changelog":"","sourceType":"plugin"},{"version":"0.1.4","date":"2023-06-22T10:15:25.798Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.4","changelog":"","sourceType":"plugin"},{"version":"0.1.5","date":"2023-07-01T06:55:12.139Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.5","changelog":"","sourceType":"plugin"},{"version":"0.1.6","date":"2023-07-11T10:59:55.645Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.6","changelog":"","sourceType":"plugin"},{"version":"0.1.7","date":"2023-07-28T20:58:53.328Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.1.7","changelog":"","sourceType":"plugin"},{"version":"0.2.0","date":"2023-07-31T14:25:14.334Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.2.0","changelog":"","sourceType":"plugin"},{"version":"0.2.1","date":"2023-08-01T20:55:39.710Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.2.1","changelog":"","sourceType":"plugin"},{"version":"0.2.2","date":"2023-08-09T20:16:09.918Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.2.2","changelog":"","sourceType":"plugin"},{"version":"0.2.3","date":"2023-08-12T17:22:09.857Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.2.3","changelog":"","sourceType":"plugin"},{"version":"0.3.0","date":"2023-08-17T12:18:00.787Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.3.0","changelog":"","sourceType":"plugin"},{"version":"0.4.0","date":"2023-08-21T18:39:20.378Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.4.0","changelog":"","sourceType":"plugin"},{"version":"0.5.0","date":"2023-09-02T11:36:07.054Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.5.0","changelog":"","sourceType":"plugin"},{"version":"0.5.1","date":"2023-09-02T12:53:54.155Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.5.1","changelog":"","sourceType":"plugin"},{"version":"0.5.2","date":"2023-09-07T08:32:01.141Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.5.2","changelog":"","sourceType":"plugin"},{"version":"0.6.0","date":"2023-09-08T16:55:56.116Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.0","changelog":"","sourceType":"plugin"},{"version":"0.6.1","date":"2023-09-08T18:03:08.303Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.1","changelog":"","sourceType":"plugin"},{"version":"0.6.2","date":"2023-09-08T21:26:36.824Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.2","changelog":"","sourceType":"plugin"},{"version":"0.6.3","date":"2023-09-08T21:39:51.185Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.3","changelog":"","sourceType":"plugin"},{"version":"0.6.4","date":"2023-09-10T12:17:26.076Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.4","changelog":"","sourceType":"plugin"},{"version":"0.6.5","date":"2023-09-10T12:37:00.773Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.5","changelog":"","sourceType":"plugin"},{"version":"0.6.6","date":"2023-09-13T15:56:22.743Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.6","changelog":"","sourceType":"plugin"},{"version":"0.6.7","date":"2023-09-13T16:03:13.142Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.7","changelog":"","sourceType":"plugin"},{"version":"0.6.8","date":"2023-09-13T19:35:05.899Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.8","changelog":"","sourceType":"plugin"},{"version":"0.6.9","date":"2023-09-15T09:21:08.241Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.9","changelog":"","sourceType":"plugin"},{"version":"0.6.10","date":"2023-09-15T11:42:58.889Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.10","changelog":"","sourceType":"plugin"},{"version":"0.6.11","date":"2023-09-25T14:50:53.248Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.11","changelog":"","sourceType":"plugin"},{"version":"0.6.12","date":"2023-10-01T14:21:24.930Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.12","changelog":"","sourceType":"plugin"},{"version":"0.6.13","date":"2023-10-02T07:59:42.976Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.13","changelog":"","sourceType":"plugin"},{"version":"0.6.14","date":"2023-10-14T12:29:09.729Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.6.14","changelog":"","sourceType":"plugin"},{"version":"0.7.0","date":"2023-10-17T07:05:42.725Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.7.0","changelog":"","sourceType":"plugin"},{"version":"0.7.1","date":"2023-10-30T06:46:36.349Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.7.1","changelog":"","sourceType":"plugin"},{"version":"0.7.2","date":"2023-10-30T15:00:50.141Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.7.2","changelog":"","sourceType":"plugin"},{"version":"0.7.3","date":"2023-12-04T21:21:10.635Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.7.3","changelog":"","sourceType":"plugin"},{"version":"0.7.4","date":"2023-12-10T10:52:51.592Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.7.4","changelog":"","sourceType":"plugin"},{"version":"0.7.5","date":"2024-01-17T09:11:48.833Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.7.5","changelog":"","sourceType":"plugin"},{"version":"0.8.0","date":"2024-01-25T08:13:44.871Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.8.0","changelog":"","sourceType":"plugin"},{"version":"0.8.1","date":"2024-02-18T11:21:55.008Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.8.1","changelog":"","sourceType":"plugin"},{"version":"0.8.2","date":"2024-03-04T17:25:22.994Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.8.2","changelog":"","sourceType":"plugin"},{"version":"0.8.3","date":"2024-03-30T10:54:13.484Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.8.3","changelog":"","sourceType":"plugin"},{"version":"0.9.0","date":"2024-05-13T20:48:00.451Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.9.0","changelog":"","sourceType":"plugin"},{"version":"0.9.1","date":"2024-05-14T06:01:26.525Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.9.1","changelog":"","sourceType":"plugin"},{"version":"0.9.2","date":"2024-05-15T15:55:42.541Z","link":"https://www.npmjs.com/package/cds-plugin-ui5/v/0.9.2","changelog":"","sourceType":"plugin"}],"changelog":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nSee [Conventional Commits](https://conventionalcommits.org) for commit guidelines.\n\n## [0.9.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.9.1...cds-plugin-ui5@0.9.2) (2024-05-15)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n## [0.9.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.9.0...cds-plugin-ui5@0.9.1) (2024-05-14)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n# [0.9.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.8.3...cds-plugin-ui5@0.9.0) (2024-05-13)\n\n\n### Features\n\n* **cds-plugin-ui5:** sanitizing package.json with cds build task for gen/srv ([#999](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/999)) ([d52386c](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/d52386c168c62ea4c827cfff65be78117e13fd12))\n\n\n\n\n\n## [0.8.3](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.8.2...cds-plugin-ui5@0.8.3) (2024-03-30)\n\n\n### Bug Fixes\n\n* cleanup of dependencies and improved approuter logic ([#984](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/984)) ([65ffaed](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/65ffaedb7968015e008e2eb6aa66ff1e0a03a73a))\n\n\n\n\n\n## [0.8.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.8.1...cds-plugin-ui5@0.8.2) (2024-03-04)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** start also when services=all is defined ([#971](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/971)) ([94706ed](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/94706ed04d6fa2c5a711d1928d7367d8b18f8946))\n\n\n\n\n\n## [0.8.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.8.0...cds-plugin-ui5@0.8.1) (2024-02-18)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** only start when using \"cds serve|watch\" ([#951](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/951)) ([7b67bd9](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/7b67bd975b5a082e6a33855b12a058ad53d0a433)), closes [#950](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/950)\n* prefere cds.env._home over just current process.cwd ([#947](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/947)) ([ecb6e69](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/ecb6e69af178f93a3723c005609c7fefb50c8b41))\n\n\n\n\n\n# [0.8.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.7.5...cds-plugin-ui5@0.8.0) (2024-01-25)\n\n\n### Features\n\n* **ui5-middleware-ui5:** support nested scenarios in CDS servers ([#938](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/938)) ([5d61f18](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/5d61f18f04a624e8f61ec7fa1e8f32e81c43f6b0))\n\n\n\n\n\n## [0.7.5](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.7.4...cds-plugin-ui5@0.7.5) (2024-01-17)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** support app folders being served from cds.env.folders.app ([#934](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/934)) ([#935](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/935)) ([9cff34d](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/9cff34d1b39ff2d22b6a8caaf3971306de737fe5))\n\n\n\n\n\n## [0.7.4](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.7.3...cds-plugin-ui5@0.7.4) (2023-12-10)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n## [0.7.3](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.7.2...cds-plugin-ui5@0.7.3) (2023-12-04)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** package name in logs ([#918](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/918)) ([cc9a8e2](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/cc9a8e281cd4c7f7d3ebf809c428f0552e258cd5))\n\n\n\n\n\n## [0.7.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.7.1...cds-plugin-ui5@0.7.2) (2023-10-30)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** disable plugin for JEST test execution ([#906](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/906)) ([b2b3c01](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/b2b3c013368a7c87e3ee28972e7207d6bacd2d30)), closes [#901](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/901)\n\n\n\n\n\n## [0.7.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.7.0...cds-plugin-ui5@0.7.1) (2023-10-30)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** remove activation hook since it's not needed ([#900](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/900)) ([86fde7e](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/86fde7e1cd709c52fc32cee2184b18bf6ea3f16d)), closes [#899](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/899)\n\n\n\n\n\n# [0.7.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.14...cds-plugin-ui5@0.7.0) (2023-10-17)\n\n\n### Features\n\n* allow overriding configFile for UI5 app dependencies ([#886](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/886)) ([c736648](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/c73664858c6ec67b4d8f2b7733b0d5234a6775db))\n\n\n\n\n\n## [0.6.14](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.13...cds-plugin-ui5@0.6.14) (2023-10-14)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n## [0.6.13](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.12...cds-plugin-ui5@0.6.13) (2023-10-02)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n## [0.6.12](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.11...cds-plugin-ui5@0.6.12) (2023-10-01)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** handle dirs without trailing slash ([#856](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/856)) ([ee0df6b](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/ee0df6b1cd2242c3a0d49bda4737838f17daef33))\n* **cds-plugin-ui5:** rework collision detection ([#853](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/853)) ([b25fd5c](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/b25fd5c10600c15e0bd4977e3792c78fea7f366e))\n\n\n\n\n\n## [0.6.11](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.10...cds-plugin-ui5@0.6.11) (2023-09-25)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** disable view cache for Fiori elements based apps ([#847](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/847)) ([81f6a80](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/81f6a803cff4f0c7323e7dcf5b2a28dc081d3123))\n\n\n\n\n\n## [0.6.10](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.9...cds-plugin-ui5@0.6.10) (2023-09-15)\n\n\n### Bug Fixes\n\n* no cache for rewrite, cds server lookup ([#843](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/843)) ([fc7b9b5](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/fc7b9b5e8c362a499e2fbb70ece764e9f17b0f6e))\n\n\n\n\n\n## [0.6.9](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.8...cds-plugin-ui5@0.6.9) (2023-09-15)\n\n\n### Bug Fixes\n\n* prevent side-effects for combined scenarios ([#842](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/842)) ([36aaa5f](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/36aaa5f8d8b8404725250664704a560229055943))\n\n\n\n\n\n## [0.6.8](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.7...cds-plugin-ui5@0.6.8) (2023-09-13)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** handle special case of UI5 in root app dir ([423794d](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/423794d5edd19f6a5ded67bab1d43d33e5e9a319))\n\n\n\n\n\n## [0.6.7](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.6...cds-plugin-ui5@0.6.7) (2023-09-13)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n## [0.6.6](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.5...cds-plugin-ui5@0.6.6) (2023-09-13)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** disable compression for CDS livereload ([#841](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/841)) ([9589436](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/9589436ac6891a35335e857ddef7afbdf5ed323f))\n\n\n\n\n\n## [0.6.5](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.4...cds-plugin-ui5@0.6.5) (2023-09-10)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** only rewrite with status code 200 ([5b3f46e](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/5b3f46e42f516066382074bc1231fdf0bfcaa92a))\n\n\n\n\n\n## [0.6.4](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.3...cds-plugin-ui5@0.6.4) (2023-09-10)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** rewrite UI5 server listing also in approuter ([#839](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/839)) ([f501558](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/f501558b47051606606c4b5289bc60d43018031f))\n\n\n\n\n\n## [0.6.3](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.2...cds-plugin-ui5@0.6.3) (2023-09-08)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** fix type for config ([ebd95f0](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/ebd95f0e5a269c769587e7c9c3bdf6885fc7ca3d))\n\n\n\n\n\n## [0.6.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.1...cds-plugin-ui5@0.6.2) (2023-09-08)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** allow relative config files in package.json ([#838](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/838)) ([735b24d](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/735b24d34cebee5463c97c3bb5a3d58e07dace24))\n\n\n\n\n\n## [0.6.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.6.0...cds-plugin-ui5@0.6.1) (2023-09-08)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** flexible mount path configuration ([#837](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/837)) ([dc31a9e](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/dc31a9e30f628c7236c93281909fafe19234bafe))\n\n\n\n\n\n# [0.6.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.5.2...cds-plugin-ui5@0.6.0) (2023-09-08)\n\n\n### Features\n\n* **cds-plugin-ui5:** support for configuration options ([#836](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/836)) ([81f9677](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/81f967777771cad8252c83766e256431e067ee61)), closes [#830](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/830)\n\n\n\n\n\n## [0.5.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.5.1...cds-plugin-ui5@0.5.2) (2023-09-07)\n\n\n### Bug Fixes\n\n* consistent request path handling of all middlewares ([#833](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/833)) ([11ad435](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/11ad4356ddb6f8503ebf46039ad898b1c4aec7c9)), closes [#817](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/817)\n\n\n\n\n\n## [0.5.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.5.0...cds-plugin-ui5@0.5.1) (2023-09-02)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** only log modules config if defined ([#825](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/825)) ([aa48da2](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/aa48da23a4702bd5b6e48e0c61a2f891906a77ec))\n\n\n\n\n\n# [0.5.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.4.0...cds-plugin-ui5@0.5.0) (2023-09-02)\n\n\n### Features\n\n* **cds-plugin-ui5:** alternative ui5.yamls / ignore HTML fragments ([#824](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/824)) ([20bfb51](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/20bfb51fc46de05b000e617eaca6a30c2a7aae6a)), closes [#822](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/822) [#823](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/823)\n\n\n\n\n\n# [0.4.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.3.0...cds-plugin-ui5@0.4.0) (2023-08-21)\n\n\n### Features\n\n* **cds-plugin-ui5:** allow to attach custom app pages to cds server ([#800](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/800)) ([0670b5e](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/0670b5e9d01175ecf9d1f0db332963b8c9fec007)), closes [#785](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/785)\n\n\n\n\n\n# [0.3.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.2.3...cds-plugin-ui5@0.3.0) (2023-08-17)\n\n\n### Features\n\n* include moduleId in return value to increase reuseability of fu… ([#796](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/796)) ([ae69ed4](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/ae69ed44070f72b0460893904729b49cf4341ffe))\n\n\n\n\n\n## [0.2.3](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.2.2...cds-plugin-ui5@0.2.3) (2023-08-12)\n\n**Note:** Version bump only for package cds-plugin-ui5\n\n\n\n\n\n## [0.2.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.2.1...cds-plugin-ui5@0.2.2) (2023-08-09)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** also include root app dir HTML files ([#789](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/789)) ([d6cdfb6](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/d6cdfb615b2bfffd44559689a68659a80eb57680))\n\n\n\n\n\n## [0.2.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.2.0...cds-plugin-ui5@0.2.1) (2023-08-01)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** delay server start until bootstrap is completed ([#783](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/783)) ([88380ba](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/88380ba91ff9d4539a746edf7dc36f3bd4228137))\n\n\n\n\n\n# [0.2.0](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.7...cds-plugin-ui5@0.2.0) (2023-07-31)\n\n\n### Features\n\n* migration to UI5 Tooling V3 ([#776](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/776)) ([c03bc0e](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/c03bc0e8a8d0b55d38510164c885022e11b597e6))\n\n\n\n\n\n## [0.1.7](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.6...cds-plugin-ui5@0.1.7) (2023-07-28)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** allow to select apps or deps ([#775](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/775)) ([aeefb3f](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/aeefb3f5aa70129489f90d684965ade6fc20ef53))\n* **cds-plugin-ui5:** proper dependency handling / decoupling ([#773](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/773)) ([9ef8bf3](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/9ef8bf3da69721a2d599a119407e53c1272fb884))\n\n\n\n\n\n## [0.1.6](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.5...cds-plugin-ui5@0.1.6) (2023-07-11)\n\n\n### Bug Fixes\n\n* support single app in ./app ([#763](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/763)) ([8642de6](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/8642de6695efd49bc0e1b4e907497a82241bc90d))\n\n\n\n\n\n## [0.1.5](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.4...cds-plugin-ui5@0.1.5) (2023-07-01)\n\n\n### Bug Fixes\n\n* **ui5-tooling-transpile:** transpile at startup + caching ([#757](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/757)) ([6c7946d](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/6c7946d05abf34f11c6ad8ad593f3d418272527e))\n\n\n\n\n\n## [0.1.4](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.3...cds-plugin-ui5@0.1.4) (2023-06-22)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** make ui5 marker color scheme aware ([d847569](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/d84756973e09e34054f0a1e05d8ad902e791205c))\n\n\n\n\n\n## [0.1.3](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.2...cds-plugin-ui5@0.1.3) (2023-06-22)\n\n\n### Bug Fixes\n\n* **cds-plugin-ui5:** add marker for links using ui5 middlewares ([#756](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/756)) ([00a6f6b](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/00a6f6b8c2c57ebcc1c92b3012163c112dd32028))\n\n\n\n\n\n## [0.1.2](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.1...cds-plugin-ui5@0.1.2) (2023-06-15)\n\n\n### Bug Fixes\n\n* update dependencies ([#754](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/754)) ([3893473](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/389347300795cfed881dc8be72eeb59d1bf45fff))\n\n\n\n\n\n## [0.1.1](https://github.com/ui5-community/ui5-ecosystem-showcase/compare/cds-plugin-ui5@0.1.0...cds-plugin-ui5@0.1.1) (2023-06-03)\n\n### Bug Fixes\n\n- **cds-plugin-ui5:** disable gzip encoding when livereload is used by CAP ([#750](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/750)) ([b131efa](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/b131efaa239b66d55350dab573d6a0a9ef978625))\n- **cds-plugin-ui5:** inject UI5 app pages ([#752](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/752)) ([0d7415d](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/0d7415d0630d33f851dd816015f3a2f394ce59d3))\n- update dependencies ([#749](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/749)) ([b1c8cfb](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/b1c8cfb4da1dcd0ae91bee181f539684d767d067))\n\n# 0.1.0 (2023-05-26)\n\n### Features\n\n- **cds-plugin-ui5:** initial poc for UI5 cds-plugin ([#746](https://github.com/ui5-community/ui5-ecosystem-showcase/issues/746)) ([70a7477](https://github.com/ui5-community/ui5-ecosystem-showcase/commit/70a7477410ef8a75bc994f117cc0d7fcffef2fed))\n"},{"name":"@cap-js/change-tracking","version":"1.0.6","description":"CDS plugin providing out-of-the box support for automatic capturing, storing, and viewing of the change records of modeled entities.","repository":"cap-js/change-tracking","author":"SAP SE (https://www.sap.com)","license":"SEE LICENSE IN LICENSE","main":"cds-plugin.js","files":["lib","_i18n","index.cds","CHANGELOG.md","README.md"],"scripts":{"lint":"npx eslint .","test":"npx jest --silent"},"peerDependencies":{"@sap/cds":">=7"},"devDependencies":{"@cap-js/change-tracking":"file:.","@cap-js/sqlite":"^1","axios":"^1","chai":"^4.3.10","chai-as-promised":"^7.1.1","chai-subset":"^1.6.0","eslint":"^8","express":"^4","jest":"^29"},"cds":{"requires":{"change-tracking":{"model":"@cap-js/change-tracking"}}},"type":"plugin","tags":["database"],"gitHubOwner":"cap-js","gitHubRepo":"change-tracking","licenseSource":"apache-2.0","forks":5,"stars":12,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-10-18T07:39:22.329Z","updatedAt":"2024-04-29T08:45:44.652Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js/change-tracking/tree/main/","readme":"# Change Tracking Plugin for SAP Cloud Application Programming Model (CAP)\n\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js/change-tracking)](https://api.reuse.software/info/github.com/cap-js/change-tracking)\n\nThe `@cap-js/change-tracking` package is a [CDS plugin](https://cap.cloud.sap/docs/node.js/cds-plugins#cds-plugin-packages) providing out-of-the box support for automatic capturing, storing, and viewing of the change records of modeled entities as simple as that:\n\n1. [Install the plugin: `npm add @cap-js/change-tracking`](#setup)\n2. [Add `@changelog` annotations to your CDS models](#annotations)\n3. [Et voilà:](#change-history-view)\n\n<img width=\"1300\" alt=\"change-history-loading\" src=\"_assets/change-history.gif\">\n\n### Table of Contents\n\n- [Change Tracking Plugin for SAP Cloud Application Programming Model (CAP)](#change-tracking-plugin-for-sap-cloud-application-programming-model-cap)\n  - [Table of Contents](#table-of-contents)\n  - [Preliminaries](#preliminaries)\n  - [Setup](#setup)\n  - [Annotations](#annotations)\n    - [Human-readable Types and Fields](#human-readable-types-and-fields)\n    - [Human-readable IDs](#human-readable-ids)\n    - [Human-readable Values](#human-readable-values)\n  - [Test-drive locally](#test-drive-locally)\n  - [Change History View](#change-history-view)\n  - [Customizations](#customizations)\n    - [Altered table view](#altered-table-view)\n    - [Disable lazy loading](#disable-lazy-loading)\n    - [Disable UI Facet generation](#disable-ui-facet-generation)\n    - [Disable Association to Changes Generation](#disable-association-to-changes-generation)\n  - [Modelling Samples](#modelling-samples)\n    - [Specify Object ID](#specify-object-id)\n    - [Tracing Changes](#tracing-changes)\n    - [Don'ts](#donts)\n  - [Contributing](#contributing)\n  - [Code of Conduct](#code-of-conduct)\n  - [Licensing](#licensing)\n\n## Preliminaries\n\nIn this guide, we use the [Incidents Management reference sample app](https://github.com/cap-js/incidents-app) as the base to add change tracking to. Clone the repository and apply the step-by-step instructions:\n\n```sh\ngit clone https://github.com/cap-js/incidents-app\ncd incidents-app\nnpm i\n```\n\n**Alternatively**, you can clone the incidents app including the prepared enhancements for change-tracking:\n\n```sh\ngit clone https://github.com/cap-js/calesi --recursive\ncd calesi\nnpm i\n```\n\n```sh\ncds w samples/change-tracking\n```\n\n## Setup\n\nTo enable change tracking, simply add this self-configuring plugin package to your project:\n\n```sh\nnpm add @cap-js/change-tracking\n```\n\n## Annotations\n\n> [!WARNING]\n> Please be aware that [**sensitive** or **personal** data](https://cap.cloud.sap/docs/guides/data-privacy/annotations#annotating-personal-data) should not be change tracked, since viewing the log allows users to circumvent [audit-logging](https://cap.cloud.sap/docs/guides/data-privacy/audit-logging#setup).\n\nAll we need to do is to identify what should be change-tracked by annotating respective entities and elements in our model with the `@changelog` annotation. Following the [best practice of separation of concerns](https://cap.cloud.sap/docs/guides/domain-modeling#separation-of-concerns), we do so in a separate file _srv/change-tracking.cds_:\n\n```cds\nusing { ProcessorService } from './processor-service';\n\nannotate ProcessorService.Incidents {\n  customer @changelog: [customer.name];\n  title    @changelog;\n  status   @changelog;\n}\n\nannotate ProcessorService.Conversations with @changelog: [author, timestamp] {\n  message  @changelog @Common.Label: 'Message';\n}\n```\n\nThe minimal annotation we require for change tracking is `@changelog` on elements, as for the elements `title` and `status` in the sample snippet above.\n\nAdditional identifiers or labels can be added to obtain more *human-readable* change records as described below.\n\n### Human-readable Types and Fields\n\nBy default the implementation looks up *Object Type* names or *Field* namesfrom respective  `@title` or  `@Common.Label` annotations, and applies i18n lookups. If no such annotations are given, the technical names of the respective CDS definitions are displayed.\n\nFor example, without the `@title` annotation, changes to conversation entries would show up with the technical entity name:\n\n<img width=\"1300\" alt=\"change-history-type\" src=\"_assets/changes-type-wbox.png\">\n\nWith an annotation, and possible i18n translations like so:\n\n```cds\nannotate Conversations with @title: 'Conversations';\n```\n\nWe get a human-readable display for *Object Type*:\n\n<img width=\"1300\" alt=\"change-history-type-hr\" src=\"_assets/changes-type-hr-wbox.png\">\n\n### Human-readable IDs\n\nThe changelog annotations for *Object ID* are defined at entity level.\n\nThese are already human-readable by default, unless the `@changelog` definition cannot be uniquely mapped such as types `enum` or `Association`.\n\nFor example, having a `@changelog` annotation without any additional identifiers, changes to conversation entries would show up as simple entity IDs:\n\n```cds\nannotate ProcessorService.Conversations {\n```\n\n<img width=\"1300\" alt=\"change-history-id\" src=\"_assets/changes-id-wbox.png\">\n\nHowever, this is not advisable as we cannot easily distinguish between changes. It is more appropriate to annotate as follows:\n\n```cds\nannotate ProcessorService.Conversations with @changelog: [author, timestamp] {\n```\n\n<img width=\"1300\" alt=\"change-history-id-hr\" src=\"_assets/changes-id-hr-wbox.png\">\n\nExpanding the changelog annotation by additional identifiers `[author, timestamp]`, we can now better identify the `message` change events by their respective author and timestamp.\n\n### Human-readable Values\n\nThe changelog annotations for *New Value* and *Old Value* are defined at element level.\n\nThey are already human-readable by default, unless the `@changelog` definition cannot be uniquely mapped such as types `enum` or `Association`.\n\nFor example, having a `@changelog` annotation without any additional identifiers, changes to incident customer would show up as UUIDs:\n\n```cds\ncustomer @changelog;\n```\n\n<img width=\"1300\" alt=\"change-history-value\" src=\"_assets/changes-value-wbox.png\">\n\nHence, here it is essential to add a unique identifier to obtain human-readable value columns:\n\n```cds\ncustomer @changelog: [customer.name];\n```\n\n<img width=\"1300\" alt=\"change-history-value-hr\" src=\"_assets/changes-value-hr-wbox.png\">\n\n## Test-drive locally\n\nWith the steps above, we have successfully set up change tracking for our reference application. Let's see that in action.\n\n1. **Start the server**:\n\n```sh\ncds watch\n```\n\n2. **Make a change** on your change-tracked elements. This change will automatically be persisted in the database table (`sap.changelog.ChangeLog`) and made available in a pre-defined view, namely the [Change History view](#change-history-view) for your convenience.\n\n## Change History View\n\n> [!IMPORTANT]\n> To ensure proper lazy loading of the Change History table, please use **SAPUI5 version 1.120.0** or higher.<br>\n> If you wish to *disable* this feature, please see the customization section on how to [disable lazy loading](#disable-lazy-loading).\n\n<img width=\"1300\" alt=\"change-history\" src=\"_assets/changes.png\">\n\nIf you have a Fiori Element application, the CDS plugin automatically provides and generates a view `sap.changelog.ChangeView`, the facet of which is automatically added to the Fiori Object Page of your change-tracked entities/elements. In the UI, this corresponds to the *Change History* table which serves to help you to view and search the stored change records of your modeled entities.\n\n## Customizations\n\n### Altered table view\n\nThe *Change History* view can be easily adapted and configured to your own needs by simply changing or extending it. For example, let's assume we only want to show the first 5 columns in equal spacing, we would extend `srv/change-tracking.cds` as follows:\n\n```cds\nusing from '@cap-js/change-tracking';\n\nannotate sap.changelog.ChangeView with @(\n  UI.LineItem : [\n    { Value: modification, @HTML5.CssDefaults: { width:'20%' }},\n    { Value: createdAt,    @HTML5.CssDefaults: { width:'20%' }},\n    { Value: createdBy,    @HTML5.CssDefaults: { width:'20%' }},\n    { Value: entity,       @HTML5.CssDefaults: { width:'20%' }},\n    { Value: objectID,     @HTML5.CssDefaults: { width:'20%' }}\n  ]\n);\n```\n\nIn the UI, the *Change History* table now contains 5 equally-spaced columns with the desired properties:\n\n<img width=\"1300\" alt=\"change-history-custom\" src=\"_assets/changes-custom.png\">\n\nFor more information and examples on adding Fiori Annotations, see [Adding SAP Fiori Annotations](https://cap.cloud.sap/docs/advanced/fiori#fiori-annotations).\n\n### Disable lazy loading\n\nTo disable the lazy loading feature of the *Change History* table, you can add the following annotation to your `srv/change-tracking.cds`:\n\n```cds\nusing from '@cap-js/change-tracking';\n\nannotate sap.changelog.aspect @(UI.Facets: [{\n  $Type : 'UI.ReferenceFacet',\n  ID    : 'ChangeHistoryFacet',\n  Label : '{i18n>ChangeHistory}',\n  Target: 'changes/@UI.PresentationVariant',\n  ![@UI.PartOfPreview]\n}]);\n```\n\nThe system now uses the SAPUI5 default setting `![@UI.PartOfPreview]: true`, such that the table will always shown when navigating to that respective Object page.\n\n### Disable UI Facet generation\n\nIf you do not want the UI facet added to a specific UI, you can annotate the service entity with `@changelog.disable_facet`. This will disable the automatic addition of the UI faced to this specific entity, but also all views or further projections up the chain.\n\n### Disable Association to Changes Generation\n\nFor some scenarios, e.g. when doing `UNION` and the `@changelog` annotion is still propageted, the automatic addition of the association to `changes` does not make sense. You can use `@changelog.disable_assoc`for this to be disabled on entity level.\n\n> [!IMPORTANT]\n> This will also supress the addition of the UI facet, since the change-view is not available as target entity anymore.\n\n## Modelling Samples\n\nThis chapter describes more modelling cases for further reference, from simple to complex, including but not limited to the followings.\n\n### Specify Object ID\n\nUse cases for Object ID annotation\n\n#### Use Case 1: Annotate single field/multiple fields of associated table(s) as the Object ID\n\nModelling in `db/schema.cds`\n\n```cds\nentity Incidents : cuid, managed {\n  ...\n  customer       : Association to Customers;\n  title          : String @title: 'Title';\n  urgency        : Association to Urgency default 'M';\n  status         : Association to Status default 'N';\n  ...\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [customer.name, urgency.code, status.criticality] {\n  title    @changelog;\n}\n```\n\n![AssociationID](_assets/AssociationID.png)\n\n#### Use Case 2: Annotate single field/multiple fields of project customized types as the Object ID\n\nModelling in `db/schema.cds`\n\n```cds\nentity Incidents : cuid, managed {\n  ...\n  customer       : Association to Customers;\n  title          : String @title: 'Title';\n  ...\n}\n\nentity Customers : cuid, managed {\n  ...\n  email          : EMailAddress;  // customized type\n  phone          : PhoneNumber;   // customized type\n  ...\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [customer.email, customer.phone] {\n  title    @changelog;\n}\n```\n\n![CustomTypeID](_assets/CustomTypeID.png)\n\n#### Use Case 3: Annotate chained associated entities from the current entity as the Object ID\n\nModelling in `db/schema.cds`\n\n```cds\nentity Incidents : cuid, managed {\n  ...\n  customer       : Association to Customers;\n  ...\n}\n\nentity Customers : cuid, managed {\n  ...\n  addresses : Association to Addresses;\n  ...\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [customer.addresses.city, customer.addresses.postCode] {\n  title    @changelog;\n}\n```\n\n![ChainedAssociationID](_assets/ChainedAssociationID.png)\n\n> Change-tracking supports annotating chained associated entities from the current entity as object ID of current entity in case the entity in consumer applications is a pure relation table. However, the usage of chained associated entities is not recommended due to performance cost.\n\n### Tracing Changes\n\nUse cases for tracing changes\n\n#### Use Case 1: Trace the changes of child nodes from the current entity and display the meaningful data from child nodes (composition relation)\n\nModelling in `db/schema.cds`\n\n```cds\nentity Incidents : managed, cuid {\n  ...\n  title          : String @title: 'Title';\n  conversation   : Composition of many Conversation;\n  ...\n}\n\naspect Conversation: managed, cuid {\n    ...\n    message   : String;\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [title] {\n  conversation @changelog: [conversation.message];\n}\n```\n\n![CompositionChange](_assets/CompositionChange.png)\n\n#### Use Case 2: Trace the changes of associated entities from the current entity and display the meaningful data from associated entities (association relation)\n\nModelling in `db/schema.cds`\n\n```cds\nentity Incidents : cuid, managed {\n  ...\n  customer       : Association to Customers;\n  title          : String @title: 'Title';\n  ...\n}\n\nentity Customers : cuid, managed {\n  ...\n  email          : EMailAddress;\n  ...\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [title] {\n  customer @changelog: [customer.email];\n}\n```\n\n![AssociationChange](_assets/AssociationChange.png)\n\n#### Use Case 3: Trace the changes of fields defined by project customized types and display the meaningful data\n\nModelling in `db/schema.cds`\n\n```cds\ntype StatusType : Association to Status;\n\nentity Incidents : cuid, managed {\n  ...\n  title          : String @title: 'Title';\n  status         : StatusType default 'N';\n  ...\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [title] {\n  status   @changelog: [status.code];\n}\n```\n\n![CustomTypeChange](_assets/CustomTypeChange.png)\n\n#### Use Case 4: Trace the changes of chained associated entities from the current entity and display the meaningful data from associated entities (association relation)\n\nModelling in `db/schema.cds`\n\n```cds\nentity Incidents : cuid, managed {\n  ...\n  title          : String @title: 'Title';\n  customer       : Association to Customers;\n  ...\n}\n\nentity Customers : cuid, managed {\n  ...\n  addresses : Association to Addresses;\n  ...\n}\n```\n\nAdd the following `@changelog` annotations in `srv/change-tracking.cds`\n\n```cds\nannotate ProcessorService.Incidents with @changelog: [title] {\n  customer @changelog: [customer.addresses.city, customer.addresses.streetAddress];\n}\n```\n\n![ChainedAssociationChange](_assets/ChainedAssociationChange.png)\n\n> Change-tracking supports analyzing chained associated entities from the current entity in case the entity in consumer applications is a pure relation table. However, the usage of chained associated entities is not recommended due to performance cost.\n\n#### Use Case 5: Trace the changes of union entity and display the meaningful data\n\n`Payable.cds`:\n\n```cds\nentity Payables : cuid {\n    displayId    : String;\n    @changelog\n    name         : String;\n    cryptoAmount : Decimal;\n    fiatAmount   : Decimal;\n};\n```\n\n`Payment.cds`:\n\n```cds\nentity Payments : cuid {\n    displayId : String; //readable ID\n    @changelog\n    name      : String;\n};\n```\n\nUnion entity in `BusinessTransaction.cds`:\n\n```cds\nentity BusinessTransactions          as(\n    select from payments.Payments{\n        key ID,\n            displayId,\n            name,\n            changes  : Association to many ChangeView\n                on changes.objectID = ID AND changes.entity = 'payments.Payments'\n    }\n)\nunion all\n(\n    select from payables.Payables {\n        key ID,\n            displayId,\n            name,\n            changes  : Association to many ChangeView\n               on changes.objectID = ID AND changes.entity = 'payables.Payables'\n    }\n);\n```\n\n![UnionChange.png](_assets/UnionChange.png)\n\n### Don'ts\n\nDon'ts\n\n#### Use Case 1: Don't trace changes for field(s) with `Association to many`\n\n```cds\nentity Customers : cuid, managed {\n  ...\n  incidents : Association to many Incidents on incidents.customer = $self;\n}\n```\n\nThe reason is that: the relationship: `Association to many` is only for modelling purpose and there is no concrete field in database table. In the above sample, there is no column for incidents in the table Customers, but there is a navigation property of incidents in Customers OData entity metadata.\n\n#### Use Case 2: Don't trace changes for field(s) with *Unmanaged Association*\n\n```cds\nentity AggregatedBusinessTransactionData @(cds.autoexpose) : cuid {\n    FootprintInventory: Association to one FootprintInventories\n                        on  FootprintInventory.month                      = month\n                        and FootprintInventory.year                       = year\n                        and FootprintInventory.FootprintInventoryScope.ID = FootprintInventoryScope.ID;\n    ...\n}\n```\n\nThe reason is that: When deploying to relational databases, Associations are mapped to foreign keys. Yet, when mapped to non-relational databases they're just references. More details could be found in [Prefer Managed Associations](https://cap.cloud.sap/docs/guides/domain-models#managed-associations). In the above sample, there is no column for FootprintInventory in the table AggregatedBusinessTransactionData, but there is a navigation property FootprintInventoryof in OData entity metadata.\n\n#### Use Case 3: Don't trace changes for CUD on DB entity\n\n```cds\nthis.on(\"UpdateActivationStatus\", async (req) =>\n    // PaymentAgreementsOutgoingDb is the DB entity\n    await UPDATE.entity(PaymentAgreementsOutgoingDb)\n        .where({ ID: paymentAgreement.ID })\n        .set({ ActivationStatus_code: ActivationCodes.ACTIVE });\n);\n```\n\nThe reason is that: Application level services are by design the only place where business logic is enforced. This by extension means, that it also is the only point where e.g. change-tracking would be enabled. The underlying method used to do change tracking is `req.diff` which is responsible to read the necessary before-image from the database, and this method is not available on DB level.\n\n## Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/change-tracking/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/change-tracking).\n\n","downloadsCurrentMonth":2649,"downloadsCurrentFortnight":1217,"downloads365":10647,"downloadsFortnightGrowth":-15.01,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":286},{"yearMonth":"2023-11","downloads":591},{"yearMonth":"2023-12","downloads":556},{"yearMonth":"2024-01","downloads":1262},{"yearMonth":"2024-02","downloads":1332},{"yearMonth":"2024-03","downloads":1742},{"yearMonth":"2024-04","downloads":2158},{"yearMonth":"2024-05","downloads":2720}],"npmlink":"https://www.npmjs.com/package/@cap-js/change-tracking","versions":[{"version":"created","date":"2023-10-18T07:39:22.329Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/created","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2023-10-18T07:39:22.694Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-04-29T08:45:44.652Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/modified","changelog":"","sourceType":"plugin"},{"version":"1.0.1","date":"2023-10-26T07:37:43.403Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.1","changelog":"","sourceType":"plugin"},{"version":"1.0.2","date":"2023-10-31T07:43:30.161Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.2","changelog":"","sourceType":"plugin"},{"version":"1.0.3","date":"2023-11-10T13:23:29.297Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.3","changelog":"","sourceType":"plugin"},{"version":"1.0.4","date":"2024-01-08T12:01:24.033Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.4","changelog":"","sourceType":"plugin"},{"version":"1.0.5","date":"2024-01-17T11:10:56.082Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.5","changelog":"","sourceType":"plugin"},{"version":"1.0.6","date":"2024-04-29T08:45:44.420Z","link":"https://www.npmjs.com/package/@cap-js/change-tracking/v/1.0.6","changelog":"","sourceType":"plugin"}],"changelog":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\n\n## Version 1.0.6 - TBD\n\n### Fixed\n\n -  Storage of wrong ObjectID in some special scenarios\n -  Missing localization of managed fields\n -  Views without keys won't get the association and UI facet pushed anymore\n\n### Added\n\n - A method to disable automatic generation of the UI Facet\n\n### Changed\n\n - Improved documentation of the @changelog Annotation\n\n## Version 1.0.5 - 15.01.24\n\n### Fixed\n\n- Error on HANA when logging Boolean or Numeric Data\n\n## Version 1.0.4 - 08.01.24\n\n### Added\n\n- Side effect annotation now allows automatic refresh after a custom action caused changes\n\n### Changed\n\n- Added a check to disable change tracking for views with a UNION\n\n### Fixed\n\n- Handling of associations within change tracked entities\n- Handling of change log when custom actions on child entities are called\n\n## Version 1.0.3 - 10.11.23\n\n### Added\n\n- Added note about using `SAPUI5 v1.120.0` or later for proper lazy loading of the *Change History* table.\n- In README, add warning about tracking personal data.\n\n### Changed\n\n- Support cases where parent/child entries are created simultaneously.\n- Allow for lazy loading of change history table (with SAP UI5 release 1.120.0).\n\n## Version 1.0.2 - 31.10.23\n\n### Changed\n\n- In README, use view of the full change-tracking table instead of the customized one for the main image.\n\n## Version 1.0.1 - 26.10.23\n\n### Changed\n\n- Flattened README structure.\n\n### Fixed\n\n- Labels are looked up from the service entity (not the db entity only).\n\n## Version 1.0.0 - 18.10.23\n\n### Added\n\n- Initial release\n\n"},{"name":"@cap-js/cds-typer","version":"0.21.0","description":"Generates .ts files for a CDS model to receive code completion in VS Code","main":"index.js","repository":"github:cap-js/cds-typer","homepage":"https://cap.cloud.sap/","keywords":["CAP","CDS","CLI"],"author":"SAP SE (https://www.sap.com)","license":"SEE LICENSE IN LICENSE","scripts":{"test:unit":"jest --projects test/unit.jest.config.js","test:integration":"jest --projects test/int.jest.config.js","test:smoke":"jest --projects test/smoke.jest.config.js","test:all":"jest","test":"npm run test:smoke && npm run test:unit","lint":"npx eslint .","cli":"node lib/cli.js","doc:clean":"rm -rf ./doc","doc:prepare":"npm run doc:clean && mkdir -p doc/types","doc:typegen":"./node_modules/.bin/tsc ./lib/*.js  --skipLibCheck --declaration --allowJs --emitDeclarationOnly --outDir doc/types && cd doc/types && tsc --init","doc:cli":"npm run cli -- --help > ./doc/cli.txt"},"files":["lib/","library","CHANGELOG.md","index.js","LICENSE","README.md"],"types":"index.d.ts","bin":{"cds-typer":"./lib/cli.js"},"dependencies":{"@sap/cds":">=7.7"},"devDependencies":{"@stylistic/eslint-plugin-js":"^1.6.3","acorn":"^8.10.0","eslint":"^9","globals":"^15.0.0","jest":"^29","typescript":">=4.6.4"},"jest":{"projects":["test/smoke.jest.config.js","test/unit.jest.config.js"]},"type":"tool","tags":["typescript"],"gitHubOwner":"cap-js","gitHubRepo":"cds-typer","licenseSource":"apache-2.0","forks":8,"stars":25,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-06-13T13:29:51.505Z","updatedAt":"2024-05-31T12:05:57.599Z","vscodeInstalls":-1,"sourceType":"tool","githublink":"https://github.com/cap-js/cds-typer/tree/main/","readme":"# CDS type generator for JavaScript\n\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js/cds-typer)](https://api.reuse.software/info/github.com/cap-js/cds-typer)\n![Unit Tests passing](https://github.com/cap-js/cds-typer/actions/workflows/test.yml/badge.svg)\n\n## About this project\n\nGenerates `.ts` files for a CDS model to receive code completion in VS Code.\n\nExhaustive documentation can be found on [CAPire](https://cap.cloud.sap/docs/tools/cds-typer).\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/cds-typer/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](https://github.com/cap-js/.github/blob/main/CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2022-2022 SAP SE or an SAP affiliate company and cds-typer contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/SAP/cds-dts-generator).\n","downloadsCurrentMonth":8062,"downloadsCurrentFortnight":3922,"downloads365":45325,"downloadsFortnightGrowth":-5.27,"downloadsHistory":[{"yearMonth":"2023-07","downloads":436},{"yearMonth":"2023-08","downloads":859},{"yearMonth":"2023-09","downloads":3843},{"yearMonth":"2023-10","downloads":2557},{"yearMonth":"2023-11","downloads":2628},{"yearMonth":"2023-12","downloads":3330},{"yearMonth":"2024-01","downloads":4335},{"yearMonth":"2024-02","downloads":5142},{"yearMonth":"2024-03","downloads":5968},{"yearMonth":"2024-04","downloads":7903},{"yearMonth":"2024-05","downloads":8162}],"npmlink":"https://www.npmjs.com/package/@cap-js/cds-typer","versions":[{"version":"created","date":"2023-06-13T13:29:51.505Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/created","changelog":"","sourceType":"tool"},{"version":"modified","date":"2024-05-31T12:05:57.599Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/modified","changelog":"","sourceType":"tool"},{"version":"0.2.5-beta.1","date":"2023-06-13T13:29:51.727Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.2.5-beta.1","changelog":"","sourceType":"tool"},{"version":"0.3.0","date":"2023-06-26T14:53:37.858Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.3.0","changelog":"","sourceType":"tool"},{"version":"0.4.0","date":"2023-07-06T11:10:34.104Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.4.0","changelog":"","sourceType":"tool"},{"version":"0.5.0","date":"2023-07-25T09:54:18.317Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.5.0","changelog":"","sourceType":"tool"},{"version":"0.6.0","date":"2023-08-07T05:12:16.460Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.6.0","changelog":"","sourceType":"tool"},{"version":"0.6.1","date":"2023-08-10T12:56:58.653Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.6.1","changelog":"","sourceType":"tool"},{"version":"0.7.0","date":"2023-08-22T11:18:22.895Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.7.0","changelog":"","sourceType":"tool"},{"version":"0.8.0","date":"2023-09-05T08:36:58.072Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.8.0","changelog":"","sourceType":"tool"},{"version":"0.9.0","date":"2023-09-08T07:13:15.751Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.9.0","changelog":"","sourceType":"tool"},{"version":"0.10.0","date":"2023-09-21T08:59:39.436Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.10.0","changelog":"","sourceType":"tool"},{"version":"0.11.0","date":"2023-10-10T14:47:16.724Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.11.0","changelog":"","sourceType":"tool"},{"version":"0.11.1","date":"2023-10-12T13:30:19.579Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.11.1","changelog":"","sourceType":"tool"},{"version":"0.12.0","date":"2023-11-23T22:58:32.190Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.12.0","changelog":"","sourceType":"tool"},{"version":"0.13.0","date":"2023-12-06T08:40:20.798Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.13.0","changelog":"","sourceType":"tool"},{"version":"0.14.0","date":"2023-12-13T10:22:20.472Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.14.0","changelog":"","sourceType":"tool"},{"version":"0.15.0","date":"2023-12-21T16:45:57.446Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.15.0","changelog":"","sourceType":"tool"},{"version":"0.16.0","date":"2024-02-01T09:48:11.215Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.16.0","changelog":"","sourceType":"tool"},{"version":"0.17.0","date":"2024-03-05T20:23:22.791Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.17.0","changelog":"","sourceType":"tool"},{"version":"0.18.0","date":"2024-03-12T20:14:42.446Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.18.0","changelog":"","sourceType":"tool"},{"version":"0.18.1","date":"2024-03-14T10:08:38.015Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.18.1","changelog":"","sourceType":"tool"},{"version":"0.18.2","date":"2024-03-21T15:03:08.207Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.18.2","changelog":"","sourceType":"tool"},{"version":"0.19.0","date":"2024-03-28T17:19:47.014Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.19.0","changelog":"","sourceType":"tool"},{"version":"0.20.0","date":"2024-04-23T07:30:11.554Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.20.0","changelog":"","sourceType":"tool"},{"version":"0.20.1","date":"2024-04-24T07:09:26.741Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.20.1","changelog":"","sourceType":"tool"},{"version":"0.20.2","date":"2024-04-29T16:06:29.944Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.20.2","changelog":"","sourceType":"tool"},{"version":"0.21.0","date":"2024-05-31T12:05:57.396Z","link":"https://www.npmjs.com/package/@cap-js/cds-typer/v/0.21.0","changelog":"","sourceType":"tool"}],"changelog":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\n\n## Version 0.22.0 - TBD\n\n## Version 0.21.0 - 2024-05-31\n### Added\n- Added `IEEE754Compatible` flag which, when set to `true`, generates decimal fields as `(number | string)` instead of `number`. This flag will be removed in the long run\n- Added plugin to `cds build` TypeScript projects. Can be explicitly called using `cds build --for typescript`\n\n### Changed\n- Types representing CDS events are now only `declare`d to avoid having to make their properties optional\n- Singular forms in generated _index.js_ files now contain a `.is_singular` property as marker for distinguished handling of singular and plural in the runtime\n- Parameters passed to the CLI now take precedence over configuration contained in the `typer` section of `cds.env`\n\n### Fixed\n- Entities ending with an \"s\" are no longer incorrectly truncated within `extends`-clauses\n- Entity names prefixed with their own namespace (e.g. `Name.Name`, `Name.NameAttachments`) are not stripped of their name prefix\n\n## Version 0.20.2 - 2024-04-29\n### Fixed\n- Referring to a property's type in a function/ action parameter no longer refers to the enclosing entity\n\n## Version 0.20.1 - 2024-04-24\n### Fixed\n- Void actions no longer crash the type generation process\n\n## Version 0.20.0 - 2024-04-23\n### Added\n- Types for actions and functions now expose a `.kind` property which holds the string `'function'` or `'action'` respectively\n- Added the `CdsDate`, `CdsDateTime`, `CdsTime`, `CdsTimestamp` types, which are each represented as a `string`.\n- Plural types can now also contain an optional numeric `$count` property\n\n### Changed\n- Empty `.actions` properties and operations without parameters are now typed as `Record<never, never>` to make it clear they contain nothing and also to satisfy overzealous linters\n\n### Fixed\n- Composition of aspects now properly resolve implicit `typeof` references in their properties\n- Importing an enum into a service will now generate an alias to the original enum, instead of incorrectly duplicating the definition\n- Returning entities from actions/ functions and using them as parameters will now properly use the singular inflection instead of returning an array thereof\n- Aspects are now consistently named and called in their singular form\n- Only detect inflection clash if singular and plural share the same namespace. This also no longer reports `sap.common` as erroneous during type creation \n\n## Version 0.19.0 - 2024-03-28\n### Added\n- Support for `cds.Vector`, which will be represented as `string`\n\n## Version 0.18.2 - 2024-03-21\n### Fixed\n- Resolving `@sap/cds` will now look in the CWD first to ensure a consistent use the same CDS version across different setups\n- Types of function parameters starting with `cds.` are not automatically considered builtin anymore and receive a more thorough check against an allow-list\n\n\n## Version 0.18.1 - 2024-03-13\n### Fix\n- Remove faulty plural for CDS `type` definitions from the generated _index.js_ files\n\n## Version 0.18.0 - 2024-03-12\n### Added\n- Improved support for projections, including projections on inline definitions, and on views, as well as support for explicit exclusion and selection of properties\n\n### Changed\n- [breaking] CDS `type` definitions will not be inflected. Whatever inflection you define them in will be assumed treated as a singular form and will not receive a plural form anymore\n\n## Version 0.17.0 - 2024-03-05\n### Fixed\n- Fixed a bug where refering to an externally defined enum via the `typeof` syntax would crash the type generation\n\n## Version 0.16.0 - 2024-02-01\n### Changed\n- Changed default log level from `NONE` to `ERROR`. See the doc to manually pass in another log level for cds-typer runs\n- Name collisions between automatically generated foreign key fields (`.…_ID`, `.…_code`, etc.) with explicitly named fields will now raise an error\n- Generate CDS types that are actually structured types as if they were entities. This allows the correct representation of mixing aspects and types in CDS inheritance, and also fixes issues with inline enums in such types\n\n### Fixed\n- Externally defined enums can now be used as parameter types in actions\n\n## Version 0.15.0 - 2023-12-21\n### Added\n- Support for [scoped entities](https://cap.cloud.sap/docs/cds/cdl#scoped-names)\n- Support for [delimited identifiers](https://cap.cloud.sap/docs/cds/cdl#delimited-identifiers)\n\n### Fixed\n- Inline enums are now available during runtime as well\n- Inline enums can now be used as action parameter types as well. These enums will not have a runtime representation, but will only assert type safety!\n- Arrays of inline enum values can now be used as action parameters too. But they will only be represented by their enclosing type for now, i.e. `string`, `number`, etc.\n- Foreign keys of projection entities are now propagated as well\n\n## Version 0.14.0 - 2023-12-13\n### Added\n- Entities that are database views now also receive typings\n\n## Version 0.13.0 - 2023-12-06\n### Changed\n- Enums are now generated ecplicitly in the respective _index.js_ files and don't have to extract their values from the model at runtime anymore\n\n### Added\n- The `excluding` clause in projections now actually excludes the specified properties in the generated types\n\n## Version 0.12.0 - 2023-11-23\n\n### Changed\n- Generate `cds.LargeBinary` as string, buffer, _or readable_ in the case of media content\n\n### Added\n- Added support for the `not null` modifier\n\n### Fixed\n- Now using names of enum values in generated _index.js_ files if no explicit value is present\n\n## Version 0.11.1 - 2023-10-12\n\n### Changed\n\n### Added\n### Fixed\n- Fixed how service names are exported as default export\n\n## Version 0.11.0 - 2023-10-10\n\n### Changed\n\n### Added\n- Autoexposed entities in services are now also generated\n- Each generated class now contains their original fully qualified name in a static `.name` property\n- Inline enums that are defined as literal type of properties are now supported as well (note: this feature is experimental. The location to which enums are generated might change in the future!)\n\n### Fixed\n- Fixed an error when an entity uses `type of` on a property they have inherited from another entity\n- Fixed an error during draftability propagation when defining compositions on types that are declared inline\n\n### Removed\n- `compileFromCSN` is no longer part of the package's API\n\n## Version 0.10.0 - 2023-09-21\n\n### Changed\n- Actions and functions are now attached to a static `.actions` property of each generated class. This reflects the runtime behaviour better than the former way of generating instance methods\n\n### Added\n\n### Fixed\n\n## Version 0.9.0 - 2023-09-08\n\n### Changed\n\n### Added\n- Support for drafts via `@odata.draft.enabled` annotation\n\n### Fixed\n- Foreign keys are now propagated more than one level (think: `x_ID_ID_ID`)\n\n\n## Version 0.8.0 - 2023-09-05\n\n### Changed\n\n### Added\n\n### Fixed\n- Foreign keys that are inherited via aspects are now also generated in addition to the resolved property (see 0.7.0)\n- Explicitly annotated `@singular` and `@plural` names are now properly used in generated _index.js_ files\n\n\n## Version 0.7.0 - 2023-08-22\n\n### Changed\n\n### Added\n- Support for `[many] $self` syntax in bound action parameters\n- Foreign keys are now present in the generated types in addition to the resolved property\n\n### Fixed\n## Version 0.6.1 - 2023-08-10\n\n### Changed\n\n### Added\n\n### Fixed\n- Removed a warning about circular imports\n\n## Version 0.6.0 - 2023-08-07\n\n### Added\n- Support for `event` syntax\n\n### Fixed\n- Initialise bound actions with stubs to support `\"strict\":true` in _tsconfig.json_\n- Add leading underscore to appease `noUnusedParameters` in strict tsconfigs\n- No longer inflect `type` definitions when they are referenced within entities or other type definitions\n\n## Version 0.5.0 - 2023-07-25\n\n### Changed\n- Facilitate strict property checks. Note: `checkJs: true` must be present in the project's _jsconfig.json_ or _tsconfig.json_ respectively for this feature to become effective\n\n### Added\n- Support for `array of` syntax\n\n### Fixed\n- Generate `string` type for date-related types in CDS definitions\n- Generate `Buffer | string` type for the CDS type `LargeBinary`\n\n\n## Version 0.4.0 - 2023-07-06\n### Added\n- Support for enums when they are defined separately (not inline in the property type of an entity)\n\n## Version 0.3.0 - 2023-06-26\n### Added\n- Support `function` definitions (apart from `action`s)\n### Changed\n- Bump version to next minor\n\n### Fixed\n- Properly import CDS `type` definitions when they are referenced elsewhere\n\n## Version 0.2.5-beta.1 - 2023-06-13\n\n### Changed\n- Bump version\n\n## Version 0.2.4 - 2023-06-12\n- Enable use of annotated singular/ plural names in associations/ compositions\n- Rename package from `@sap/cds-dts-generator` to `@cap-js/cds-typer`\n\n## Version 0.2.3 - 2023-05-17\n- Add missing library files\n\n## Version 0.2.2 - 2023-05-17\n- Make class hierarchy flatter\n\n## Version 0.2.1 - 2023-05-16\n- Add missing files\n\n## Version 0.2.0 - 2023-05-15\n- use native Typescript AST in unit tests\n- add `propertiesOptional` flag\n- support flat, as well as nested inline declarations\n- support `typeof` syntax\n- read rudimentary configuration from cds.env\n- export bound and unbound actions\n- allow inline type definitions within compositions\n- enable use of additional type libraries (HANA types available as first library)\n- provide proper JSDoc for all modules\n- export entity types for singular variants alongside plural types\n## Version 0.1.1 - 2023-01-26\n- add TL;DR section to README\n- allow multiple positional arguments\n\n## Version 0.1.0\n- initial code base\n"},{"name":"@cap-js/notifications","version":"0.2.0","description":"CDS plugin providing integration to the SAP BTP Alert Notification Service.","repository":"cap-js/notifications","author":"SAP SE (https://www.sap.com)","homepage":"https://cap.cloud.sap/","license":"SEE LICENSE IN LICENSE","main":"cds-plugin.js","files":["lib","srv"],"peerDependencies":{"@sap/cds":">=7.3","@sap/cds-dk":">=7.3"},"dependencies":{"@sap-cloud-sdk/connectivity":"^3.13.0","@sap-cloud-sdk/http-client":"^3.13.0","@sap-cloud-sdk/util":"^3.13.0"},"devDependencies":{"jest":"^29.7.0","chai":"^4.3.10"},"scripts":{"lint":"npx eslint .","test":"npx jest","test-with-coverage":"npx jest --coverage"},"cds":{"requires":{"destinations":true,"notifications":{"[development]":{"kind":"notify-to-console"},"[production]":{"destination":"SAP_Notifications","kind":"notify-to-rest"},"prefix":"$app-name","types":"srv/notification-types.json","outbox":true},"kinds":{"notify-to-console":{"impl":"@cap-js/notifications/srv/notifyToConsole"},"notify-to-rest":{"impl":"@cap-js/notifications/srv/notifyToRest"}}}},"type":"btp","tags":["api,btp"],"gitHubOwner":"cap-js","gitHubRepo":"notifications","licenseSource":"apache-2.0","forks":0,"stars":6,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-10-30T09:11:05.022Z","updatedAt":"2024-03-29T09:36:57.398Z","vscodeInstalls":-1,"sourceType":"btp","githublink":"https://github.com/cap-js/notifications/tree/main/","readme":"[![REUSE status](https://api.reuse.software/badge/github.com/cap-js/notifications)](https://api.reuse.software/info/github.com/cap-js/notifications)\n\n# Notifications Plugin\n\nThe `@cap-js/notifications` package is a [CDS plugin](https://cap.cloud.sap/docs/node.js/cds-plugins#cds-plugin-packages) that provides support for publishing business notifications in SAP Build WorkZone.\n\n### Table of Contents\n\n- [Setup](#setup)\n- [Send Notifications](#send-notifications)\n- [Use Notification Types](#use-notification-types)\n- [API Reference](#api-reference)\n- [Test-drive Locally](#test-drive-locally)\n- [Run in Production](#run-in-production)\n- [Advanced Usage](#advanced-usage)\n- [Contributing](#contributing)\n- [Code of Conduct](#code-of-conduct)\n- [Licensing](#licensing)\n\n## Setup\n\nTo enable notifications, simply add this self-configuring plugin package to your project:\n\n```sh\n npm add @cap-js/notifications\n```\n\nIn this guide, we use the [Incidents Management reference sample app](https://github.com/cap-js/incidents-app) as the base, to publish notifications.\n\n## Send Notifications\n\nWith that you can use the NotificationService as any other CAP Service like so in you event handlers:\n\n```js\nconst alert = await cds.connect.to('notifications');\n```\n\nYou can use the following signature to send the simple notification with title and description\n\n```js\nalert.notify({\n  recipients: [ ...supporters() ],\n  priority: \"HIGH\",\n  title: \"New high priority incident is assigned to you!\",\n  description: \"Incident titled 'Engine overheating' created by 'customer X' with priority high is assigned to you!\"\n});\n```\n\n* **priority** - Priority of the notification, this argument is optional, it defaults to NEUTRAL\n* **description** - Subtitle for the notification, this argument is optional\n\n## Use Notification Types\n\n### 1. Add notification types\n\nIf you want to send custom notifications in your application, you can add the notification types in the `srv/notification-types.json` file.\n\nSample: If you want to send the notification when the incident is resolved, you can modify the `srv/notification-types.json` as below:\n\n```json\n  [\n    {\n      \"NotificationTypeKey\": \"IncidentResolved\",\n      \"NotificationTypeVersion\": \"1\",\n      \"Templates\": [\n        {\n          \"Language\": \"en\",\n          \"TemplatePublic\": \"Incident Resolved\",\n          \"TemplateSensitive\": \"Incident '{{title}}' Resolved\",\n          \"TemplateGrouped\": \"Incident Status Update\",\n          \"TemplateLanguage\": \"mustache\",\n          \"Subtitle\": \"Incident from '{{customer}}' resolved by {{user}}.\"\n        }\n      ]\n    }\n  ]\n```\n\n### 2. Use pre-defined types in your code like that:\n\n```js\n  await alert.notify ('IncidentResolved', {\n    recipients: [ customer.id ],\n    data: {\n      customer: customer.info,\n      title: incident.title,\n      user: cds.context.user.id,\n    }\n  })\n```\n\n## API Reference\n\n* **recipients** - List of the recipients, this argument is mandatory\n* **type** - Notification type key, this argument is mandatory\n* **priority** - Priority of the notification, this argument is optional, it defaults to NEUTRAL\n* **data** - A key-value pair that is used to fill a placeholder of the notification type template, this argument is optional\n\n## Test-drive Locally\nIn local environment, when you publish notification, it is mocked to publish the nofication to the console.\n\n<img width=\"700\" alt=\"Notify to console\" style=\"border-radius:0.5rem\" src=\"_assets/notifyToConsole.png\">\n\n## Run in Production\n\n#### Notification Destination\n\nAs a pre-requisite to publish the notification, you need to have a [destination](https://help.sap.com/docs/build-work-zone-standard-edition/sap-build-work-zone-standard-edition/enabling-notifications-for-custom-apps-on-sap-btp-cloud-foundry#configure-the-destination-to-the-notifications-service) configured to publish the notification. In the `package.json` by default destination name `SAP_Notifications` is added, you can modify the destination name that you are configuring.\n\n#### Integrate with SAP Build Work Zone\n\nOnce application is deployed and integrated with SAP Build Work Zone, you can see the notification under fiori notifications icon!\n\n<img width=\"1300\" alt=\"Sample Application Demo\" style=\"border-radius:0.5rem;\" src=\"_assets/incidentsNotificationDemo.gif\">\n\n\n\n## Advanced Usage\n\n### Custom Notification Types Path\n\nNotifications plugin configures `srv/notification-types.json` as default notification types file. If you are using different file, you can update the file path in `cds.env.requires.notifications.types` \n\n### Custom Notification Type Prefix\n\nTo make notification types unique to the application, prefix is added to the type key. By default, `application name` is added as the prefix. You can update the `cds.env.requires.notifications.prefix` if required.\n\n### Low-level  Notifications API\n\nYou can use these two signature to send the custom notification with pre-defined notification types.\n\n#### With pre-defined parameters\n\nBy using this approach you can send notifications with the predefined parameters - recipients, data, priority, type and other parameters listed in the [API documentation](https://help.sap.com/docs/build-work-zone-standard-edition/sap-build-work-zone-standard-edition/developing-cloud-foundry-applications-with-notifications) \n\n```js\nalert.notify({\n  recipients: [...supporters()],\n  type: \"IncidentResolved\",\n  priority: 'NEUTRAL',\n  data: {\n    customer: customer.info,\n    title: incident.title,\n    user: cds.context.user.id,\n  },\n  OriginId: \"Example Origin Id\",\n  NotificationTypeVersion: \"1\",\n  ProviderId: \"/SAMPLEPROVIDER\",\n  ActorId: \"BACKENDACTORID\",\n  ActorDisplayText: \"ActorName\",\n  ActorImageURL: \"https://some-url\",\n  NotificationTypeTimestamp: \"2022-03-15T09:58:42.807Z\",\n  TargetParameters: [\n    {\n      \"Key\": \"string\",\n      \"Value\": \"string\"\n    }\n   ]\n  });\n```\n\n#### Passing the whole notification object\n\nBy using this approach you need to pass the whole notification object as described in the [API documentation](https://help.sap.com/docs/build-work-zone-standard-edition/sap-build-work-zone-standard-edition/developing-cloud-foundry-applications-with-notifications)\n\n```js\nalert.notify({\n  NotificationTypeKey: 'IncidentCreated',\n  NotificationTypeVersion: '1',\n  Priority: 'NEUTRAL',\n  Properties: [\n    {\n      Key: 'name',\n      IsSensitive: false,\n      Language: 'en',\n      Value: 'Engine overheating',\n      Type: 'String'\n    },\n    {\n      Key: 'customer',\n      IsSensitive: false,\n      Language: 'en',\n      Value: 'Dave',\n      Type: 'String'\n    }\n  ],\n  Recipients: [{ RecipientId: \"supportuser1@mycompany.com\" },{ RecipientId: \"supportuser2@mycompany.com\" }]\n});\n```\n\n## Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/change-tracking/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/change-tracking).\n","downloadsCurrentMonth":505,"downloadsCurrentFortnight":311,"downloads365":1542,"downloadsFortnightGrowth":60.31,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":66},{"yearMonth":"2023-11","downloads":65},{"yearMonth":"2023-12","downloads":89},{"yearMonth":"2024-01","downloads":125},{"yearMonth":"2024-02","downloads":179},{"yearMonth":"2024-03","downloads":256},{"yearMonth":"2024-04","downloads":254},{"yearMonth":"2024-05","downloads":508}],"npmlink":"https://www.npmjs.com/package/@cap-js/notifications","versions":[{"version":"created","date":"2023-10-30T09:11:05.022Z","link":"https://www.npmjs.com/package/@cap-js/notifications/v/created","changelog":"","sourceType":"btp"},{"version":"0.1.0","date":"2023-10-30T09:11:05.282Z","link":"https://www.npmjs.com/package/@cap-js/notifications/v/0.1.0","changelog":"","sourceType":"btp"},{"version":"modified","date":"2024-03-29T09:36:57.398Z","link":"https://www.npmjs.com/package/@cap-js/notifications/v/modified","changelog":"","sourceType":"btp"},{"version":"0.2.0","date":"2024-03-29T09:36:57.196Z","link":"https://www.npmjs.com/package/@cap-js/notifications/v/0.2.0","changelog":"","sourceType":"btp"}],"changelog":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\n\n## Version 0.2.0\n\n### Fixed\n\n- Fixed code smells and Dependabot alerts\n\n## Version 0.1.0\n\n### Added\n\n- Initial release\n"},{"name":"@cap-js/audit-logging","version":"0.8.0","description":"CDS plugin providing integration to the SAP Audit Log service as well as out-of-the-box personal data-related audit logging based on annotations.","repository":"cap-js/audit-logging","author":"SAP SE (https://www.sap.com)","homepage":"https://cap.cloud.sap/","license":"SEE LICENSE IN LICENSE","main":"cds-plugin.js","files":["lib","srv","CHANGELOG.md"],"scripts":{"lint":"npx eslint .","test":"npm run test-new-db && npm run test-old-db","test-new-db":"CDS_ENV='better-sqlite' npx jest --silent","test-old-db":"npx jest --silent"},"peerDependencies":{"@sap/cds":">=7 || ^8.0.0-beta"},"devDependencies":{"@cap-js/audit-logging":"file:.","@cap-js/sqlite":"^1","axios":"^1","eslint":"^8","express":"^4","jest":"^29","sqlite3":"^5.1.6"},"cds":{"requires":{"[test]":{"outbox":"persistent-outbox"},"audit-log":{"handle":["READ","WRITE"],"outbox":true,"[development]":{"kind":"audit-log-to-console"},"[hybrid]":{"kind":"audit-log-to-restv2"},"[production]":{"kind":"audit-log-to-restv2"}},"kinds":{"audit-log-to-console":{"impl":"@cap-js/audit-logging/srv/log2console"},"audit-log-to-restv2":{"impl":"@cap-js/audit-logging/srv/log2restv2","vcap":{"label":"auditlog"}}}}},"type":"btp","tags":["api,btp"],"gitHubOwner":"cap-js","gitHubRepo":"audit-logging","licenseSource":"apache-2.0","forks":1,"stars":4,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-08-18T07:10:26.950Z","updatedAt":"2024-05-24T10:08:40.912Z","vscodeInstalls":-1,"sourceType":"btp","githublink":"https://github.com/cap-js/audit-logging/tree/main/","readme":"# Welcome to @cap-js/audit-logging\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js/audit-logging)](https://api.reuse.software/info/github.com/cap-js/audit-logging)\n\n`@cap-js/audit-logging` is a CDS plugin providing integration to the SAP Audit Log service as well as out-of-the-box personal data-related audit logging based on annotations.\n\nDocumentation can be found at [cap.cloud.sap](https://cap.cloud.sap/docs/guides/data-privacy). \n\n> [!IMPORTANT]\n> The information in this file is by no means complete but enables you to get started quickly. Make sure to read the provided documentation at [cap.cloud.sap](https://cap.cloud.sap/docs/guides/data-privacy) to get the full picture. \n\n\n## Preliminaries\n\nIn this guide, we use the [Incidents Management reference sample app](https://github.com/cap-js/incidents-app) as the base to add change tracking to. Clone the repository and apply the step-by-step instructions:\n\n```sh\ngit clone https://github.com/cap-js/incidents-app\ncd incidents-app\nnpm i\n```\n\n## Setup\nTo enable audit logging, simply add this self-configuring plugin package to your project:\n\n```sh\nnpm add @cap-js/audit-logging\n```\n\n## Annotate Personal Data\nIdentify entities and elements (potentially) holding personal data using `@PersonalData` annotations. Create a `db/data-privacy.cds` file and add the following:\n\n```cds\nusing { sap.capire.incidents as my } from '../db/extensions';\n\nannotate my.Customers with @PersonalData : {\n  DataSubjectRole : 'Customer',\n  EntitySemantics : 'DataSubject'\n} {\n  ID           @PersonalData.FieldSemantics: 'DataSubjectID';\n  firstName    @PersonalData.IsPotentiallyPersonal;\n  lastName     @PersonalData.IsPotentiallyPersonal;\n  email        @PersonalData.IsPotentiallyPersonal;\n  phone        @PersonalData.IsPotentiallyPersonal;\n  creditCardNo @PersonalData.IsPotentiallySensitive;\n};\n\nannotate my.Addresses with @PersonalData: {\n  EntitySemantics : 'DataSubjectDetails'\n} {\n  customer      @PersonalData.FieldSemantics: 'DataSubjectID';\n  city          @PersonalData.IsPotentiallyPersonal;\n  postCode      @PersonalData.IsPotentiallyPersonal;\n  streetAddress @PersonalData.IsPotentiallyPersonal;\n};\n\nannotate my.Incidents with @PersonalData : {\n  EntitySemantics : 'Other'\n} {\n  customer @PersonalData.FieldSemantics: 'DataSubjectID';\n};\n\n```\nLearn more about the annotations in capire:\n- [@PersonalData.EntitySemantics](https://cap.cloud.sap/docs/guides/data-privacy/annotations#entitysemantics)\n- [@PersonalData.EntitySemantics: 'DataSubject'](https://cap.cloud.sap/docs/guides/data-privacy/annotations#datasubjectrole)\n- [@PersonalData.FieldSemantics: 'DataSubjectID'](https://cap.cloud.sap/docs/guides/data-privacy/annotations#fieldsemantics-datasubjectid)\n- [@PersonalData.IsPotentiallyPersonal](https://cap.cloud.sap/docs/guides/data-privacy/annotations#ispotentiallypersonal)\n- [@PersonalData.IsPotentiallySensitive](https://cap.cloud.sap/docs/guides/data-privacy/annotations#ispotentiallysensitive)\n\n\n## Test-Drive Locally\nYou've prepared everything to log personal data-related events. Let's see that in action.\n\nStart the server as usual:\n```sh\ncds watch\n```\n\nSend an update request that changes personal data:\n```http\nPATCH http://localhost:4004/admin/Customers(8e2f2640-6866-4dcf-8f4d-3027aa831cad) HTTP/1.1\nAuthorization: Basic alice:in-wonderland\nContent-Type: application/json\n\n{\n  \"firstName\": \"Johnny\",\n  \"lastName\": \"Doey\"\n}\n```\n\nSee the audit logs in the server's console output:\n```sh\n{\n  data_subject: {\n    type: 'AdminService.Customers',\n    id: { ID: '8e2f2640-6866-4dcf-8f4d-3027aa831cad' },\n    role: 'Customer',\n  },\n  object: {\n   type: 'AdminService.Customers',\n   id: { ID: '8e2f2640-6866-4dcf-8f4d-3027aa831cad' }\n  },\n  attributes: [\n    { name: 'firstName', old: 'John', new: 'Johnny' },\n    { name: 'lastName', old: 'Doe', new: 'Doey' }\n  ],\n  user: 'alice',\n  tenant: 't1',\n  uuid: '1391A703E2CBE52E817269EC7527368C',\n  time: '2023-02-26T08:13:48.287Z'\n}\n```\n\n\n## In Production\n\nThe end-to-end out-of-the-box functionality provided by this plugin requires a paid-for instance of the [SAP Audit Log service for customers](https://help.sap.com/docs/btp/sap-business-technology-platform/audit-log-write-api-for-customers?locale=en-US). However, it is possible to provide an own implementation that writes the audit logs to a custom store.\n\n[_Learn more about using the SAP Audit Log service._](https://cap.cloud.sap/docs/guides/data-privacy/audit-logging#use-sap-audit-log-service)\n\n[_Learn more about custom audit logging._](https://cap.cloud.sap/docs/guides/data-privacy/audit-logging#custom-audit-logging)\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/audit-logging/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/audit-logging).\n","downloadsCurrentMonth":5202,"downloadsCurrentFortnight":2697,"downloads365":30173,"downloadsFortnightGrowth":7.66,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":97},{"yearMonth":"2023-09","downloads":551},{"yearMonth":"2023-10","downloads":1307},{"yearMonth":"2023-11","downloads":1442},{"yearMonth":"2023-12","downloads":3342},{"yearMonth":"2024-01","downloads":4387},{"yearMonth":"2024-02","downloads":5024},{"yearMonth":"2024-03","downloads":4252},{"yearMonth":"2024-04","downloads":4529},{"yearMonth":"2024-05","downloads":5242}],"npmlink":"https://www.npmjs.com/package/@cap-js/audit-logging","versions":[{"version":"created","date":"2023-08-18T07:10:26.950Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/created","changelog":"","sourceType":"btp"},{"version":"0.1.0","date":"2023-08-18T07:10:27.309Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.1.0","changelog":"","sourceType":"btp"},{"version":"modified","date":"2024-05-24T10:08:40.912Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/modified","changelog":"","sourceType":"btp"},{"version":"0.2.0","date":"2023-09-01T09:00:13.663Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.2.0","changelog":"","sourceType":"btp"},{"version":"0.3.0","date":"2023-09-06T11:21:10.435Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.3.0","changelog":"","sourceType":"btp"},{"version":"0.3.1","date":"2023-09-26T07:05:56.361Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.3.1","changelog":"","sourceType":"btp"},{"version":"0.3.2","date":"2023-10-11T19:42:43.376Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.3.2","changelog":"","sourceType":"btp"},{"version":"0.4.0","date":"2023-10-24T12:51:12.699Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.4.0","changelog":"","sourceType":"btp"},{"version":"0.5.0","date":"2023-11-22T10:35:50.931Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.5.0","changelog":"","sourceType":"btp"},{"version":"0.5.1","date":"2023-11-30T15:07:17.148Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.5.1","changelog":"","sourceType":"btp"},{"version":"0.5.2","date":"2023-12-08T11:07:29.856Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.5.2","changelog":"","sourceType":"btp"},{"version":"0.6.0","date":"2024-02-05T19:22:25.176Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.6.0","changelog":"","sourceType":"btp"},{"version":"0.7.0","date":"2024-05-15T10:37:18.312Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.7.0","changelog":"","sourceType":"btp"},{"version":"0.8.0","date":"2024-05-24T10:08:40.665Z","link":"https://www.npmjs.com/package/@cap-js/audit-logging/v/0.8.0","changelog":"","sourceType":"btp"}],"changelog":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\n\n## Version 0.8.0 - 2024-05-24\n\n### Added\n\n- Allow to specify undefined tenant in order to log to provider account in multi-tenant scenarios\n\n### Changed\n\n- Use kind `audit-log-to-restv2` in profile `hybrid`\n\n## Version 0.7.0 - 2024-05-15\n\n### Added\n\n- Automatically promote entities that are associated with data subjects\n\n## Version 0.6.0 - 2024-02-05\n\n### Added\n\n- Support for @sap/cds^7.5\n\n### Fixed\n\n- Automatic personal data modification logging for data subject details with renamed keys\n- Data subject resolution in circular models\n\n## Version 0.5.2 - 2023-12-08\n\n### Fixed\n\n- Automatic personal data modification logging for deep data structures with renamings\n\n## Version 0.5.1 - 2023-11-30\n\n### Fixed\n\n- Falsy early exit during bootstrapping in case a service does not contain personal data\n\n## Version 0.5.0 - 2023-11-22\n\n### Added\n\n- Common log entry fields `uuid`, `tenant`, `user` and `time` can be provided manually\n\n## Version 0.4.0 - 2023-10-24\n\n### Added\n\n- Support for Premium plan of SAP Audit Log Service\n- Support for XSUAA credential type `x509`\n- Support for generic outbox\n\n### Changed\n\n- Always use outbox (as configured in project)\n\n### Fixed\n\n- Avoid dangling `SELECT`s to resolve data subject IDs, which resulted in \"Transaction already closed\" errors\n\n## Version 0.3.2 - 2023-10-11\n\n### Fixed\n\n- If the request has no tenant (e.g., Unauthorized), the audit log shall be sent to the provider account\n\n## Version 0.3.1 - 2023-09-25\n\n### Fixed\n\n- Defaulting of `@PersonalData.DataSubjectRole` to entity name\n- Overriding service configuration\n\n## Version 0.3.0 - 2023-09-05\n\n### Changed\n\n- Default value for `cds.requires['audit-log'].handle` changed to `['READ', 'WRITE']`, i.e., accessing sensitive data is now logged by default.\n\n## Version 0.2.0 - 2023-09-01\n\n### Added\n\n- Export class `AuditLogService` for extending in custom implementations as follows:\n  ```js\n  const { AuditLogService } = require('@cap-js/audit-logging')\n  class MyAuditLogService extends AuditLogService {\n    async init() {\n      [...]\n      // call AuditLogService's init\n      await super.init()\n    }\n  }\n  module.exports = MyAuditLogService\n  ```\n\n## Version 0.1.0 - 2023-08-18\n\n### Added\n\n- New API:\n  - `await audit.log('<event>', <data>)` for asynchronous logs (cf. `emit`)\n  - `await audit.logSync('<event>', <data>)` for synchronous logs (cf. `send`)\n- New REST API-based schema with auto-filled `LogEntry` aspect\n- New events `SensitiveDataRead`, `PersonalDataModified`, `ConfigurationModified`, and `SecurityEvent`\n- Full support for OAuth2 plan of SAP Audit Log Service\n\n### Changed\n\n- Whether reading sensitive data and modifying personal data is logged is determined by `cds.requires['audit-log'].handle: [...]`.\n  Possible values in the array are `READ` and/ or `WRITE`, with `WRITE` as the sole default entry.\n  Hence, accessing sensitive data is not logged by default.\n- Integration with SAP Audit Log Service via REST API instead of client library (`@sap/audit-logging`)\n\n### Fixed\n\n- Various glitches in log calculation\n\n### Removed\n\n- Old events `dataAccessLog`, `dataModificationLog`, `configChangeLog`, and `securityLog`\n- `@AuditLog.Operation` annotations are ignored. Having the plugin as dependency signals the intent to audit log.\n- `cds.features.audit_personal_data: true` is no longer necessary. Instead, simply add the plugin as a dependency.\n"},{"name":"@cap-js/cds-types","version":"0.4.0","description":"Type definitions for main packages of CAP, like `@sap/cds`","repository":"github:cap-js/cds-types","homepage":"https://cap.cloud.sap/","keywords":["CAP","CDS","Node.js"],"author":"SAP SE (https://www.sap.com)","license":"SEE LICENSE IN LICENSE","typings":"apis/cds.d.ts","files":["dist/","LICENSE","README.md"],"scripts":{"test":"jest --silent","rollup":"rm -rf dist/ && mkdir -p etc/ && npx -y @microsoft/api-extractor run --local --verbose && .github/rollup-patch.js","rollup:on":"npm pkg set typings=dist/cds-types.d.ts && [ -d 'apis' ] && mv -- apis -apis || true","rollup:off":"npm pkg set typings=apis/cds.d.ts  && [ -d '-apis' ] && mv -- -apis apis || true","lint":"npx eslint .","lint:fix":"npx eslint . --fix","setup":"npm i && npm i file:. --no-save --force","prerelease:ci-fix":".github/prerelease-fix.js"},"peerDependencies":{"@sap/cds":">=7 || ^8.0.0-beta"},"dependencies":{"@types/express":"^4.17.21"},"devDependencies":{"@eslint/js":"^9.2.0","@sap/cds":">=7.5.0","@stylistic/eslint-plugin-js":"^2.1.0","@stylistic/eslint-plugin-ts":"^2.1.0","@types/jest":"^29.5.11","@types/node":"^20","axios":"^1.6.2","chai":"^4.3.10","eslint":"^9.2.0","jest":"^29.7.0","ts-jest":"^29.1.1","typescript":"^5.4.5","typescript-eslint":"^8.0.0-alpha.10","winston":"^3.13.0"},"jest":{"transform":{"^.+\\.(ts|tsx)$":"ts-jest"}},"type":"util","tags":["typescript"],"gitHubOwner":"cap-js","gitHubRepo":"cds-types","licenseSource":"apache-2.0","forks":4,"stars":6,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2023-12-06T14:19:46.217Z","updatedAt":"2024-05-29T11:53:21.170Z","vscodeInstalls":-1,"sourceType":"util","githublink":"https://github.com/cap-js/cds-types/tree/main/","readme":"# cds-types\n\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js/cds-types)](https://api.reuse.software/info/github.com/cap-js/cds-types)\n![Unit Tests passing](https://github.com/cap-js/cds-types/actions/workflows/test.yml/badge.svg)\n\n## About this project\n\nContains type definitions for the [Node.js SDK](https://cap.cloud.sap/docs/node.js/) of the SAP Cloud Application Programming Model (CAP).\n\n## Requirements and Setup\n\nJust install package `@sap/cds` into a Javascript or Typescript project, and the types will automatically be available in modern IDEs like VS Code.\n\nFind more information on the APIs in the [Node.js SDK documentation](https://cap.cloud.sap/docs/node.js/).\n\n## Support, Feedback, Contributing\n\n### Local Setup\n\nAfter cloning, just run\n\n```sh\nnpm run setup\n```\n\nwhich installs all dependencies.\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js/cds-types/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n\n## Security / Disclosure\n\nIf you find any bug that may be a security problem, please follow our instructions at [in our security policy](https://github.com/SAP/.github/blob/main/SECURITY.md) on how to report it. Please do not create GitHub issues for security-related doubts or problems.\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](https://github.com/SAP/.github/blob/main/CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2019-2024 SAP SE or an SAP affiliate company and `cds-types` contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js/cds-types).\n","downloadsCurrentMonth":558136,"downloadsCurrentFortnight":275621,"downloads365":1686033,"downloadsFortnightGrowth":-2.44,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":77357},{"yearMonth":"2024-01","downloads":226259},{"yearMonth":"2024-02","downloads":151287},{"yearMonth":"2024-03","downloads":198813},{"yearMonth":"2024-04","downloads":464807},{"yearMonth":"2024-05","downloads":567510}],"npmlink":"https://www.npmjs.com/package/@cap-js/cds-types","versions":[{"version":"created","date":"2023-12-06T14:19:46.217Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/created","changelog":"","sourceType":"util"},{"version":"modified","date":"2024-05-29T11:53:21.170Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/modified","changelog":"","sourceType":"util"},{"version":"0.0.1","date":"2023-12-06T14:19:46.489Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/0.0.1","changelog":"","sourceType":"util"},{"version":"0.1.0","date":"2023-12-13T10:07:38.261Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/0.1.0","changelog":"","sourceType":"util"},{"version":"0.2.0","date":"2024-01-17T15:09:59.857Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/0.2.0","changelog":"","sourceType":"util"},{"version":"0.3.0-beta.1","date":"2024-05-24T08:00:08.384Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/0.3.0-beta.1","changelog":"","sourceType":"util"},{"version":"0.4.0","date":"2024-05-29T11:53:20.959Z","link":"https://www.npmjs.com/package/@cap-js/cds-types/v/0.4.0","changelog":"","sourceType":"util"}],"changelog":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nThis project adheres to [Semantic Versioning](http://semver.org/).\nThe format is based on [Keep a Changelog](http://keepachangelog.com/).\n\n## Version 0.5.0 - TBD\n\n## Version 0.4.0 - 2024-05-23\nThis is a prerelease version (`next`) as a preview for the upcoming release of cds 8.\n\n### Fixed\n- Corrected `exist(…)` to `exists(…)`\n\n## Version 0.3.0-beta.1 - 2024-05-23\n\n### Added\n- Added signatures for `cds.outboxed` and `cds.unboxed`\n- Added signature for `cds.middlewares.add`\n- More `cds.env` properties and types\n- Exposed types related to `cds.linked` through the facade. Types describing unlinked CSN should generally not be needed, but are still available through `cds.csn.…`\n\n### Changed\n- Improved signatures for `cds.env.folders` and `cds.env.i18n` from `any` to a more descriptive type\n- `Service.prepend` is no longer async\n- All linked classes are now available via `cds.linked.classes` (and partially via the facade)\n- Getters in `service` instances now return the appropriate classes. E.g. `service.entities` returns instances of `linked.entity`\n- [breaking] Linked definitions are no longer an intersection type of all possible linked classes, but more specific to their actual use (see above). This implies that users may have to narrow the type they are using explicitly, use another getter (see above), or use explicit casts.\n- [breaking] Only the `.after('READ', ...)` differentiates between singular and plural entities. In all other cases the plural case is assumed.\n\n### Fixed\n- `SELECT.from` and related variants now work on the `.drafts` property and behave like `SELECT.from(<Plural>)`\n- `cds.log` can now also be called with the names of log levels\n- Reintroduced missing `QueryAPI.tx` and add deprecation note for `QueryAPI.transaction`\n\n## Version 0.2.0 - 2024-01-17\n\n### Added\n\n- Type for special error listener `srv.on('error')`\n\n### Changed\n\n- `source`, `column_expr`, and `predicate` have been converted to partial intersection types. This offers all possible optional properties. You will have to make sure to check their presence when accessing them\n\n### Fixed\n\n- `srv.send` overload to also allow optional headers\n- Reflected types like `cds.entity`, `cds.struct`, `cds.Association` are now properly exposed\n- `cds.builtin.types` got a more accurate type\n- The `LinkedEntity.drafts` property is now optional.  At runtime, it's only set for drafted entities.\n- `cds.model` is marked as modifiable (for tests only!)\n- `SELECT.from` got its `ref` property back\n\n\n## Version 0.1.0 - 2023-12-13\n\n### Changed\n\n- Rework of the export structure of the main `cds` facade object, so that e.g. `cds.Request` and `cds.User` work again\n\n### Fixed\n\n- TSDoc comments have a proper structure\n\n## Version 0.0.1 - 2023-12-06\n\n### Added\n\n- Initial release, still with gaps though\n"},{"name":"@cap-js-community/feature-toggle-library","version":"1.1.5","description":"SAP BTP feature toggle library enables Node.js applications using the SAP Cloud Application Programming Model to maintain live-updatable feature toggles via Redis.","main":"src/index.js","files":["src","cds-plugin.js","index.cds"],"scripts":{"patch":"npx patch-package","test":"jest","test:remove-inline-snapshots":"npx replace '\\.toMatchInlineSnapshot\\(\\s*`[\\s\\S]*?`\\s*\\);' '.toMatchInlineSnapshot();' test -r --include='*.test.js'","lint":"npm run prettier && npm run eslint","lint:ci":"npm run prettier:ci && npm run eslint:ci","eslint":"eslint --fix .","eslint:ci":"eslint .","prettier":"prettier --write --log-level error .","prettier:ci":"prettier --check .","docs":"cd docs && bundle exec jekyll serve","docs:install":"cd docs && npx shx rm -rf vendor Gemfile.lock && bundle install","cloc":"npx cloc --vcs=git --read-lang-def=cloc.def src","upgrade-lock":"npx shx rm -rf package-lock.json node_modules && npm i --package-lock && npm run patch"},"engines":{"node":">=18.0.0"},"dependencies":{"redis":"^4.6.13","verror":"^1.10.1","yaml":"^2.4.1"},"devDependencies":{"@sap/cds":"^7.8.0","eslint":"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^28.2.0","jest":"^29.7.0","prettier":"^3.2.5"},"homepage":"https://cap-js-community.github.io/feature-toggle-library/","repository":{"type":"git","url":"git+https://github.com/cap-js-community/feature-toggle-library.git"},"bugs":{"url":"https://github.com/cap-js-community/feature-toggle-library/issues"},"keywords":["feature-flags","feature-toggles","redis","sap-cap","sap-btp","cloud-foundry"],"author":"Richard Lindner <richard.lindner@sap.com>","license":"Apache-2.0","cds":{"requires":{"FeatureService":{"model":"@cap-js-community/feature-toggle-library"}}},"type":"plugin","tags":["lib"],"gitHubOwner":"cap-js-community","gitHubRepo":"feature-toggle-library","licenseSource":"apache-2.0","forks":2,"stars":5,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-06-27T11:39:39.023Z","updatedAt":"2024-04-08T13:38:04.771Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js-community/feature-toggle-library/tree/main/","readme":"# SAP BTP Feature Toggle Library\n\n[![npm version](https://img.shields.io/npm/v/@cap-js-community/feature-toggle-library)](https://www.npmjs.com/package/@cap-js-community/feature-toggle-library)\n[![monthly downloads](https://img.shields.io/npm/dm/@cap-js-community/feature-toggle-library)](https://www.npmjs.com/package/@cap-js-community/feature-toggle-library)\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js-community/feature-toggle-library)](https://api.reuse.software/info/github.com/cap-js-community/feature-toggle-library)\n[![Main CI](https://github.com/cap-js-community/feature-toggle-library/actions/workflows/main-ci.yml/badge.svg)](https://github.com/cap-js-community/feature-toggle-library/commits/main)\n\nSAP BTP feature toggle library enables Node.js applications using the SAP Cloud Application Programming Model to maintain live-updatable feature toggles via Redis.\n\n## Getting Started (CAP Feature Toggles)\n\n- Set up project with `@sap/cds`.\n- Install library:\n\n  ```bash\n  npm install --save @cap-js-community/feature-toggle-library\n  ```\n\n- For CAP Feature Toggles everything is configured automatically.\n- The library acts as a CDS-Plugin and registers a `FeatureService`, which can be used to check and update toggles.\n- For details see [Example CAP Server](https://github.com/cap-js-community/feature-toggle-library/blob/main/example-cap-server).\n\n## Getting Started (Custom Configuration)\n\n- Same as previous section.\n- Write `toggles.yaml` configuration file:\n\n  ```yaml\n  # info: check api priority; 0 means access is disabled\n  /check/priority:\n    type: number\n    fallbackValue: 0\n    validations:\n      - scopes: [user, tenant]\n      - regex: '^\\d+$'\n  ```\n\n- Add configuration path to `package.json`:\n\n  ```json\n  {\n    \"cds\": {\n      \"featureToggles\": {\n        \"configFile\": \"./toggles.yaml\"\n      }\n    }\n  }\n  ```\n\n- Write usage code in handlers:\n\n  ```javascript\n  const toggles = require(\"@cap-js-community/feature-toggle-library\");\n\n  const priorityHandler = async (context) => {\n    const user = context.user.id;\n    const tenant = context.tenant;\n    const value = toggles.getFeatureValue(\"/check/priority\", { user, tenant });\n    if (value <= 0) {\n      return context.reject(\"blocked\");\n    } else if (value < 10) {\n      return context.reply(\"welcome\");\n    } else {\n      return context.reply(\"very welcome\");\n    }\n  };\n  ```\n\n## Features\n\n- Maintain feature toggle states consistently across multiple app instances.\n- Feature toggle changes are published from Redis to subscribed app instances with publish/subscribe pattern [PUB/SUB](https://redis.io/topics/pubsub).\n- Horizontal app scaling is supported and new app instances will start with the correct state, or fallback values, if they cannot connect to Redis.\n- Feature toggle values can be changed specifically for accessors with certain scopes, e.g., for specific tenants, users,...\n- Users can register change handler callbacks for specific toggles.\n- Users can register custom input validation callbacks for specific toggles.\n- Works as a [CDS-Plugin](https://cap.cloud.sap/docs/node.js/cds-plugins) and provides a REST service to read and manipulate toggles.\n\n## Peers\n\n- [CAP Extensibility Feature Toggles](https://cap-js-community.github.io/feature-toggle-library/peers/#cap-extensibility-feature-toggles)\n- [SAP Feature Flags Service](https://cap-js-community.github.io/feature-toggle-library/peers/#sap-feature-flags-service)\n\n## Documentation\n\nHead over to our [Documentation](https://cap-js-community.github.io/feature-toggle-library/) to learn more.\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js-community/feature-toggle-library/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and feature-toggle-library contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js-community/feature-toggle-library).\n","downloadsCurrentMonth":174,"downloadsCurrentFortnight":66,"downloads365":18069,"downloadsFortnightGrowth":-38.89,"downloadsHistory":[{"yearMonth":"2023-07","downloads":269},{"yearMonth":"2023-08","downloads":1215},{"yearMonth":"2023-09","downloads":4556},{"yearMonth":"2023-10","downloads":4796},{"yearMonth":"2023-11","downloads":4589},{"yearMonth":"2023-12","downloads":1891},{"yearMonth":"2024-01","downloads":151},{"yearMonth":"2024-02","downloads":38},{"yearMonth":"2024-03","downloads":156},{"yearMonth":"2024-04","downloads":180},{"yearMonth":"2024-05","downloads":175}],"npmlink":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library","versions":[{"version":"created","date":"2023-06-27T11:39:39.023Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/created","changelog":"","sourceType":"plugin"},{"version":"0.6.8","date":"2023-06-27T11:39:39.274Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/0.6.8","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-04-08T13:38:04.771Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.6.9","date":"2023-07-18T16:09:40.425Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/0.6.9","changelog":"","sourceType":"plugin"},{"version":"0.7.0","date":"2023-09-08T14:08:04.193Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/0.7.0","changelog":"","sourceType":"plugin"},{"version":"0.7.1","date":"2023-09-13T11:21:25.263Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/0.7.1","changelog":"","sourceType":"plugin"},{"version":"0.7.2","date":"2023-10-18T09:22:06.523Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/0.7.2","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2023-11-27T14:11:48.059Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/1.0.0","changelog":"","sourceType":"plugin"},{"version":"1.1.0","date":"2023-12-01T14:07:41.728Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/1.1.0","changelog":"","sourceType":"plugin"},{"version":"1.1.1","date":"2023-12-05T12:18:41.295Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/1.1.1","changelog":"","sourceType":"plugin"},{"version":"1.1.2","date":"2024-03-21T10:20:28.216Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/1.1.2","changelog":"","sourceType":"plugin"},{"version":"1.1.3","date":"2024-04-08T08:36:41.405Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/1.1.3","changelog":"","sourceType":"plugin"},{"version":"1.1.4","date":"2024-04-08T13:38:04.517Z","link":"https://www.npmjs.com/package/@cap-js-community/feature-toggle-library/v/1.1.4","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).\n\n## v1.1.4 - 2024-04-08\n\n### Added\n\n- docs: basic documentation for newest cds-plugin features.\n- cds-plugin: better access control (fixes #57).\n\n### Fixed\n\n- redis: better integration mode, will not log a connection error if redis is not present.\n\n## v1.1.2 - 2024-03-21\n\n### Added\n\n- cds-plugin: fts feature toggles are detected and configured automatically (fixes #50).\n- cds-plugin: allow custom scope map callback for fts feature toggles (fixes #51).\n- cds-plugin: can configure unique name, i.e. which apps store the same toggles in redis, as part of cds configuration.\n\n### Fixed\n\n- cds-plugin: feature toggles will not initialize during cds build.\n- redis: proper usage of redis-client built-in reconnect capabilities.\n\n## v1.1.1 - 2023-12-05\n\n### Changed\n\n- cds-service: always log update contents for traceability and improved logging for redis read and update errors.\n- docs: add getting started section (fixes #43).\n\n## v1.1.0 - 2023-12-01\n\n⚠️ User action required! This release will be more disruptive than usual. We re-thought that main `require` API and\nmade it much leaner. These changes should have happened in 1.0, sorry for the inconvenience.\n\n```javascript\n// before\nconst {\n  singleton: { getFeatureValue },\n} = require(\"@cap-js-community/feature-toggle-library\");\n\nfunction someFunc() {\n  getFeatureValue(key);\n}\n\n// after\nconst toggles = require(\"@cap-js-community/feature-toggle-library\");\n\nfunction someFunc() {\n  toggles.getFeatureValue(key);\n}\n```\n\nFor details see\n[https://cap-js-community.github.io/feature-toggle-library/usage/](https://cap-js-community.github.io/feature-toggle-library/usage/)\n\n### Changed\n\n- the library now exports _only_ the singleton instance (fixes #39).\n- cds-plugin: the request header features are only respected in development environments (fixes #41).\n\n## v1.0.0 - 2023-11-27\n\nWe are releasing 1.0, after 2 years of continuous usage, testing, and small improvements.\n\n### Removed\n\n- restrict to node v18+\n\n### Added\n\n- act as\n  [Feature Vector Provider](https://cap.cloud.sap/docs/guides/extensibility/feature-toggles#feature-vector-providers)\n  when used as a CDS-Plugin.\n- allow graceful shutdown by closing redis clients on cds shutdown event (fixes #34).\n\n## v0.7.2 - 2023-10-18\n\n### Added\n\n- support for redis cluster configurations.\n- enable setting maximal log level through env variable `BTP_FEATURES_LOG_LEVEL`. this can be used to silence the\n  library during tests.\n\n### Changed\n\n- implement new CDS-Plugin API, where plugins export a promise instead of an activate property and stay compatible for\n  older cds versions.\n\n## v0.7.1 - 2023-09-13\n\n### Fixed\n\n- CDS-Plugin integration now works for projects that run `cds build --production` and only use the resulting\n  `csn.json` at runtime.\n\n## v0.7.0 - 2023-09-08\n\n### Added\n\n- new harmonized validation configuration for scope and regex checks, as well as external validation with user\n  provided modules.\n\n- new (optional) [CDS-Plugin](https://cap.cloud.sap/docs/node.js/cds-plugins) integration. for details, see the new\n  [plugin and service](https://cap-js-community.github.io/feature-toggle-library/service/) documentation.\n\n- new logger implementation which replaces\n  [cf-nodejs-logging-support](https://www.npmjs.com/package/cf-nodejs-logging-support) dependency. it has better cds\n  integration (if present). for example, it will log\n  [correlation ids](https://cap.cloud.sap/docs/node.js/cds-log#node-observability-correlation) that are present in cds\n  context via [async local storage](https://nodejs.org/api/async_context.html#class-asynclocalstorage).\n\n### Changed\n\n- `allowedScopes: [xxx]` configuration will now be ignored and needs to be replaced with\n  `validations: [{ scopes: [xxx] }]`.\n\n- `validation: yyy` configuration will now be ignored and needs to be replaced with\n  `validations: [{ regex: yyy }]`.\n\n### Fixed\n\n- re-work pipelines to separate main branch and pr-voter status\n\n## v0.6.9 - 2023-07-18\n\n### Added\n\n- example http request file for [example-cap-server](./example-cap-server)\n\n### Fixed\n\n- better documentation regarding scoping and redis hash map persistence\n\n- more resilient handling of bad input for scopeMaps in all external APIs\n\n## v0.6.8 - 2023-06-27\n\n### Added\n\n- first public release on npmjs\n\n## v0.6.7 - 2023-06-20\n\n### Added\n\n- added `allowedScopes` configuration, which validates that correct scope names are used for updates\n\n### Fixed\n\n- separate `rootValue` from other `scopedValues` in `getFeatureInfo` and `getFeaturesInfos` APIs\n\n## v0.6.6 - 2023-06-19\n\n### Added\n\n- added `example-cap-server` code, that acts both as an example integration code into existing cap projects and as a\n  starting point for manual testing\n\n### Fixed\n\n- first iteration towards updating documentation\n\n## v0.6.5 - 2023-06-13\n\n### Fixed\n\n- fix bug where scoped values were ignored if they are falsy\n\n## v0.6.4 - 2023-06-11\n\n### Added\n\n- simple migration for old sting-type state to hash-type persistence state\n\n## v0.6.2 - 2023-06-10\n\n### Fixed\n\n- fix redis transaction re-writes\n\n## v0.6.1 - 2023-06-07\n\n### Removed\n\n- remove API to read feature config and metadata `getFeatureConfig` and `getFeatureConfigs`.\n  use `getFeatureInfo` and `getFeaturesInfos` instead\n\n### Added\n\n- new option to add _scope restrictions_ when reading or setting feature toggles\n\n- separate persistence on redis using `HGET`, `HSET`, so that individual toggle changes don't have to touch the state\n  of all feature toggles. effectively we change the redis type for the persistence key from `string` to `hash`.\n\n- new API `getFeatureInfo` and `getFeaturesInfos` to get all config and state information in one call\n\n### Fixed\n\n- rewrite to improve config handling internally\n\n- fix some problems with the logger in combination with verror\n\n## v0.5.18 - 2023-04-25\n\n### Removed\n\n- restrict to node v16+\n\n### Added\n\n- new interface to get `main` and `subscriber` client in redis wrapper\n\n### Fixed\n\n- better coding and interface for `LazyCache` and `ExpiringLazyCache`\n\n- more and improved jsdocs\n\n- allow options to be passed in redis wrapper `set` implementation.\n  see [SET](https://redis.io/commands/set/) for details.\n\n## v0.5.17 - 2022-12-13\n\n### Fixed\n\n- make logging for warn level work properly\n\n## v0.5.16 - 2022-12-08\n\n### Fixed\n\n- re-work logging approach so structured logging will capture [VError](https://www.npmjs.com/package/verror) info\n\n## v0.5.15 - 2022-06-03\n\n### Fixed\n\n- update feature value is now exclusive under high concurrency\n  (semaphore implementation by [oklemenz2](https://github.com/oklemenz2))\n\n- prettier and documentation work better together\n\n## v0.5.14 - 2022-03-29\n\n### Added\n\n- users can rely on _always_ getting fallback value\n\n## v0.5.13 - 2022-03-18\n\n### Added\n\n- local integration tests\n\n- write own env implementation replacing [@sap/xsenv](https://www.npmjs.com/package/@sap/xsenv) dependency\n\n## v0.5.12 - 2022-03-09\n\n### Fixed\n\n- more fixes related to error event handling in local case after redis library v4 migration\n\n## v0.5.11 - 2022-03-09\n\n### Removed\n\n- restrict to node v12+\n\n### Fixed\n\n- fix `mainClient` and `subscriberClient` reference handling in error case\n\n## v0.5.10 - 2022-03-03\n\n### Fixed\n\n- migrate [redis](https://www.npmjs.com/package/redis) dependency to v4\n\n## v0.5.8 - 2022-02-03\n\n### Added\n\n- allow to set singleton `uniqueName` via env variable `BTP_FEATURES_UNIQUE_NAME`\n\n## v0.5.7 - 2022-01-13\n\n### Fixed\n\n- fix `readConfigFromFile` for yaml case\n\n## v0.5.6 - 2021-12-22\n\n### Removed\n\n- config property `enabled` is discontinued, use `active` instead\n\n### Added\n\n- new config property: `active`. if active is set to false, no changes of the feature toggle is allowed, but old value\n  stays in place\n\n- new API to read feature config and metadata `getFeatureConfig` and `getFeatureConfigs`\n\n### Fixed\n\n- change interface name `readConfigFromFilepath` to `readConfigFromFile`\n\n- change signature for `FeatureValueChangeHandler` to `handler(newValue, oldValue)`\n\n## v0.5.5 - 2021-12-15\n\n### Fixed\n\n- change external validators interface to allow reporting multiple errors\n\n## v0.5.4 - 2021-12-10\n\n### Fixed\n\n- change validator return interface to ValidationErrors for consistency\n\n## v0.5.3 - 2021-12-10\n\n### Fixed\n\n- make singleton more IDE friendly and ensure correctness with test\n\n- switch to artifactory registry\n\n## v0.5.2 - 2021-12-06\n\n### Added\n\n- feature: external validation\n\n### Fixed\n\n- readme update\n\n- handler name fallback for anonymous functions\n\n- inputValidation is now async to account for potentially async external validators\n\n## v0.5.0 - 2021-11-11\n\n### Added\n\n- Initial public release\n"},{"name":"@cap-js-community/mtx-tool","version":"0.8.5","description":"Multitenancy and Extensibility Tool is a cli to reduce operational overhead for multitenant Cloud Foundry applications","bin":{"mtx":"bin/mtx.js"},"main":"src/index.js","files":["bin","src"],"scripts":{"patch":"npx patch-package","test":"jest","test:remove-inline-snapshots":"npx replace '\\.toMatchInlineSnapshot\\(\\s*`[\\s\\S]*?`\\s*\\);' '.toMatchInlineSnapshot();' test -r --include='*.test.js'","test:record":"npm run test:record:reg && npm run test:record:cds && npm run test:record:hdi","test:update":"jest --updateSnapshot","test:reg":"jest test/tenantRegistry.nock.test.js","test:cds":"jest test/capMultitenancy.nock.test.js","test:hdi":"jest test/hanaManagement.nock.test.js","test:record:reg":"npx cross-env NOCK_MODE=record jest test/tenantRegistry.nock.test.js --runInBand --updateSnapshot && jest test/tenantRegistry.nock.test.js --runInBand --updateSnapshot","test:record:cds":"npx cross-env NOCK_MODE=record jest test/capMultitenancy.nock.test.js --runInBand --updateSnapshot && jest test/capMultitenancy.nock.test.js --runInBand --updateSnapshot","test:record:hdi":"npx cross-env NOCK_MODE=record jest test/hanaManagement.nock.test.js --runInBand --updateSnapshot && jest test/hanaManagement.nock.test.js --runInBand --updateSnapshot","lint":"npm run eslint && npm run prettier","lint:ci":"npm run eslint:ci && npm run prettier:ci","eslint":"eslint --fix .","eslint:ci":"eslint .","prettier":"prettier --write --log-level error .","prettier:ci":"prettier --check .","pack":"npm pack","docs":"cd docs && bundle exec jekyll serve","docs:install":"cd docs && npx shx rm -rf vendor Gemfile.lock && bundle install","upgrade-lock":"npx shx rm -rf package-lock.json node_modules && npm i --package-lock && npm run patch"},"engines":{"node":">=16.0.0"},"dependencies":{"node-fetch":"^2.7.0"},"devDependencies":{"eslint":"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^28.5.0","jest":"^29.7.0","nock":"^13.5.4","prettier":"^3.2.5","typescript":"^5.4.5"},"homepage":"https://cap-js-community.github.io/mtx-tool/","repository":{"type":"git","url":"git+https://github.com/cap-js-community/mtx-tool.git"},"bugs":{"url":"https://github.com/cap-js-community/mtx-tool/issues"},"keywords":["cli","tool","btp","operations","multitenancy"],"author":"Richard Lindner <rlindner81@gmail.com>","license":"Apache-2.0","type":"plugin","tags":["lib"],"gitHubOwner":"cap-js-community","gitHubRepo":"mtx-tool","licenseSource":"apache-2.0","forks":3,"stars":21,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-01-27T15:00:33.238Z","updatedAt":"2024-05-15T08:19:44.111Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js-community/mtx-tool/tree/main/","readme":"# MTX Tool\n\n[![npm version](https://img.shields.io/npm/v/@cap-js-community/mtx-tool)](https://www.npmjs.com/package/@cap-js-community/mtx-tool)\n[![monthly downloads](https://img.shields.io/npm/dm/@cap-js-community/mtx-tool)](https://www.npmjs.com/package/@cap-js-community/mtx-tool)\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js-community/mtx-tool)](https://api.reuse.software/info/github.com/cap-js-community/mtx-tool)\n[![Main CI](https://github.com/cap-js-community/mtx-tool/actions/workflows/main-ci.yml/badge.svg)](https://github.com/cap-js-community/mtx-tool/commits/main)\n\nMultitenancy and Extensibility Tool is a cli to reduce operational overhead for multitenant Cloud Foundry applications, particularly in the areas user authentication, tenant registration, CAP multitenancy, and HANA container management.\n\n## Install or Upgrade\n\nPrerequisite is an installed [CF cli](https://github.com/cloudfoundry/cli) v7 or newer. The tool can be installed either globally or locally for a specific project.\n\n```bash\n# globally\nnpm install --global @cap-js-community/mtx-tool\n# project local\nnpm install --save-dev @cap-js-community/mtx-tool\n```\n\nYou can also not install the tool and use it ad-hoc.\n\n```bash\n# ad-hoc\nnpx @cap-js-community/mtx-tool\n# ad-hoc with fixed version, e.g. for stable pipelines\nnpx @cap-js-community/mtx-tool@v0.8.5\n```\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js-community/mtx-tool/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Documentation\n\nHead over to our [Documentation](https://cap-js-community.github.io/mtx-tool/) to learn more.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and mtx-tool contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js-community/mtx-tool).\n","downloadsCurrentMonth":3695,"downloadsCurrentFortnight":1779,"downloads365":28833,"downloadsFortnightGrowth":-7.15,"downloadsHistory":[{"yearMonth":"2023-07","downloads":1184},{"yearMonth":"2023-08","downloads":1387},{"yearMonth":"2023-09","downloads":1473},{"yearMonth":"2023-10","downloads":1426},{"yearMonth":"2023-11","downloads":2096},{"yearMonth":"2023-12","downloads":3367},{"yearMonth":"2024-01","downloads":3192},{"yearMonth":"2024-02","downloads":3103},{"yearMonth":"2024-03","downloads":3465},{"yearMonth":"2024-04","downloads":3577},{"yearMonth":"2024-05","downloads":3764}],"npmlink":"https://www.npmjs.com/package/@cap-js-community/mtx-tool","versions":[{"version":"created","date":"2023-01-27T15:00:33.238Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/created","changelog":"","sourceType":"plugin"},{"version":"0.7.5","date":"2023-01-27T15:00:33.543Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.5","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-05-15T08:19:44.111Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.7.6","date":"2023-02-01T15:16:59.555Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.6","changelog":"","sourceType":"plugin"},{"version":"0.7.7","date":"2023-02-10T10:19:03.150Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.7","changelog":"","sourceType":"plugin"},{"version":"0.7.8","date":"2023-02-17T08:20:59.107Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.8","changelog":"","sourceType":"plugin"},{"version":"0.7.9","date":"2023-02-23T15:57:08.149Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.9","changelog":"","sourceType":"plugin"},{"version":"0.7.10","date":"2023-03-13T13:41:44.752Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.10","changelog":"","sourceType":"plugin"},{"version":"0.7.11","date":"2023-07-12T11:00:43.860Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.11","changelog":"","sourceType":"plugin"},{"version":"0.7.12","date":"2023-07-24T08:06:55.669Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.12","changelog":"","sourceType":"plugin"},{"version":"0.7.13","date":"2023-08-04T11:12:12.752Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.13","changelog":"","sourceType":"plugin"},{"version":"0.7.14","date":"2023-10-20T08:33:15.475Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.14","changelog":"","sourceType":"plugin"},{"version":"0.7.15","date":"2023-12-21T14:38:07.858Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.15","changelog":"","sourceType":"plugin"},{"version":"0.7.16","date":"2024-01-13T09:45:57.533Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.16","changelog":"","sourceType":"plugin"},{"version":"0.7.17","date":"2024-01-24T14:50:33.742Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.7.17","changelog":"","sourceType":"plugin"},{"version":"0.8.0","date":"2024-02-20T09:39:34.475Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.8.0","changelog":"","sourceType":"plugin"},{"version":"0.8.1","date":"2024-03-05T15:08:24.346Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.8.1","changelog":"","sourceType":"plugin"},{"version":"0.8.2","date":"2024-03-15T07:14:30.089Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.8.2","changelog":"","sourceType":"plugin"},{"version":"0.8.3","date":"2024-04-26T09:41:31.066Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.8.3","changelog":"","sourceType":"plugin"},{"version":"0.8.4","date":"2024-05-01T06:46:24.428Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.8.4","changelog":"","sourceType":"plugin"},{"version":"0.8.5","date":"2024-05-15T08:19:43.858Z","link":"https://www.npmjs.com/package/@cap-js-community/mtx-tool/v/0.8.5","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).\n\n<!-- order is REMOVED, CHANGED, ADDED, FIXED -->\n\n## v0.8.5 - 2024-05-15\n\n### Changed\n\n- reg: registry service calls now happen concurrently where appropriate similar to hdi and cds interactions.\n\n### Added\n\n- added environment variables to control polling frequency for interactions:\n\n  | environment variable | effect                                                                               |\n  | :------------------- | :----------------------------------------------------------------------------------- |\n  | `MTX_CDS_FREQUENCY`  | change polling frequency milliseconds for server async job calls (default is 15000)  |\n  | `MTX_REG_FREQUENCY`  | change polling frequency milliseconds for service async job calls (default is 15000) |\n\n### Fixed\n\n- reg: better error handling for registry updates\n\n## v0.8.4 - 2024-05-01\n\n### Fixed\n\n- reg: fixed a paging bug where most registry commands had an infinite loop if more than 200 tenants are handled. (reported by @cgaillydetaurines)\n\n## v0.8.3 - 2024-04-26\n\n### Changed\n\n- cds: tenant upgrade now logs progress of individual tasks (`@sap/cds-mtxs` uses one task per tenant) for every poll.\n  the logs will look something like:\n  ```\n  GET https://my-server-mtx.cfapps.sap.hana.ondemand.com/-/cds/jobs/pollJob(ID='d2f560dc-542c-4091-a632-919c941210b4') 200 OK (163ms)\n  job d2f560dc-542c-4091-a632-919c941210b4 is RUNNING with tasks queued/running:  5/ 5 | failed/finished:  0/ 0\n  GET https://my-server-mtx.cfapps.sap.hana.ondemand.com/-/cds/jobs/pollJob(ID='d2f560dc-542c-4091-a632-919c941210b4') 200 OK (98ms)\n  job d2f560dc-542c-4091-a632-919c941210b4 is RUNNING with tasks queued/running:  4/ 5 | failed/finished:  0/ 1\n  GET https://my-server-mtx.cfapps.sap.hana.ondemand.com/-/cds/jobs/pollJob(ID='d2f560dc-542c-4091-a632-919c941210b4') 200 OK (98ms)\n  job d2f560dc-542c-4091-a632-919c941210b4 is RUNNING with tasks queued/running:  1/ 4 | failed/finished:  0/ 5\n  ...\n  ```\n- cds: tenant upgrade now tracks that task progress is still happening. if no progress is detected for 30 minutes, it\n  will show the final status for each tenant and fail.\n\n### Added\n\n- uaa: some arguments can be passed in via environment variable instead of the commandline. this behavior is expected\n  by Jenkins and Github Actions. for example, the following is now possible:\n  ```\n  UAA_USERNAME=user UAA_PASSWORD=pass mtx --uaa-user\n  ```\n\n### Fixed\n\n- sensitive input arguments are now masked in the running console output\n\n## v0.8.2 - 2024-03-15\n\n### Fixed\n\n- removed npm `postinstall` script\n\n### Changed\n\n- hdi: all accesses to service instances and bindings now filter for the service-plan `hdi-shared`. this change allows\n  the service-manager to be used with other services, e.g. `redis-cache`, alongside HANA containers.\n\n## v0.8.1 - 2024-03-05\n\n### Fixed\n\n- uaa: `uaasc`, `uaasp`, `uaasu` error handling and message with passcode url was improved.\n\n### Changed\n\n- reg: improved `regl` and `--registry-update` support for instances with `service` plan. (proposal and provisioning\n  support by @andre68723)\n\n## v0.8.0 - 2024-02-20\n\n### Removed\n\n- hdi: `--hdi-migrate-all` command is removed. Instance manager has been deprecated for a while, so migrations to\n  service-manager have happened by now.\n\n### Changed\n\n- uaa: `uaas  --uaa-service` command has been renamed to `uaasc  --uaa-service-client`. This fits better with the\n  pattern of new commands.\n\n### Added\n\n- uaa: new flexible commands, so that either the regular server or a trusted services can be accessed as a technical\n  client, as a user with passcode, or as a user with username and password. (fixes #62 by @soccermax)\n\n  ```\n  uaac   --uaa-client [TENANT]                                  obtain uaa token for generic client\n  uaap   --uaa-passcode PASSCODE [TENANT]                       obtain uaa token for one-time passcode\n  uaau   --uaa-user USERNAME PASSWORD [TENANT]                  obtain uaa token for username password\n  uaasc  --uaa-service-client SERVICE [TENANT]                  obtain service token for generic client\n  uaasp  --uaa-service-passcode SERVICE PASSCODE [TENANT]       obtain service token for one-time passcode\n  uaasu  --uaa-service-user SERVICE USERNAME PASSWORD [TENANT]  obtain service token for username password\n  ```\n\n### Fixed\n\n- uaa: fix error with recommended passcode url when credential-type x509 is used. (fixes #59)\n\n## v0.7.17 - 2024-01-24\n\n### Changed\n\n- cds: onboard now supports arbitrary subscription metadata\n  https://cap-js-community.github.io/mtx-tool/cap-multitenancy/#onboard-tenant\n\n## v0.7.16 - 2024-01-13\n\n### Added\n\n- srv: new functionality to dump certificates from app server (pr #53) contributed by @kkoile\n\n### Changed\n\n- srv: environment dump now exports VCAP_APPLICATION (pr #55) contributed by @kkoile\n\n## v0.7.15 - 2023-12-21\n\n### Added\n\n- cds: added missing timestamp functionality (fixes #46)\n\n- cds,hdi: allow users to control request concurrency with env variables `MTX_CDS_CONCURRENCY`, `MTX_HDI_CONCURRENCY`\n\n### Changed\n\n- cds,hdi: changed default request concurrency from 5 to 10\n\n## v0.7.14 - 2023-10-20\n\n### Added\n\n- add response time to all logged requests\n\n- reg: enable access for registry instances with `service` plan\n\n### Fixed\n\n- srv: fix debug command for case where uaa is not configured\n\n## v0.7.13 - 2023-08-04\n\n### Added\n\n- reg: optional flag to skip unchanged dependencies for updates (fixes #38)\n\n## v0.7.12 - 2023-07-24\n\n### Added\n\n- out of the box support for deploy with confidence \"uuid-versioned\" app suffixes (fixes #35)\n\n## v0.7.11 - 2023-07-12\n\n### Fixed\n\n- cds: auto undeploy for mtxs (#34)\n\n- hdi: allow hdi tenantIds to contain forward slash\n\n- uaa: make uaa service token work with user provided services\n\n## v0.7.10 - 2023-03-13\n\n### Added\n\n- reg: enable update subscribe apps' url (fixes #25) contributed by @jiangxin0503\n\n### Fixed\n\n- homogenize single and multi tenant registry calls\n\n- change function signatures to avoid null parameters\n\n- reg: common enum for registry response states\n\n## v0.7.9 - 2023-02-23\n\n### Fixed\n\n- respect uaa-token expiry (fixes #22)\n\n- code cleanup\n\n## v0.7.8 - 2023-02-17\n\n### Fixed\n\n- documented `--force` arg for scripts (relates to #20)\n\n- reg: `--registry-update-all` now retries tenants with previously failed updates\n\n## v0.7.7 - 2023-02-10\n\n### Added\n\n- uaa: expose uaa userinfo (fixes #13)\n\n### Fixed\n\n- hdi: fix access problems for hdi containers with no associated tenant\n\n- srv: allow server-start-debugger to pass an app instance\n\n## v0.7.6 - 2023-02-01\n\n### Added\n\n- first external release\n\n### Fixed\n\n- cds: mtxs cds-upgrade error did not cause a non-zero exit code\n\n## v0.7.5 - 2023-01-12\n\n### Added\n\n- cds: support cds-mtxs\n\n### Fixed\n\n- better pagination for cf requests\n\n- reg: support enforced pagination in saas-registry api\n\n## v0.7.4 - 2022-12-14\n\n### Added\n\n- hdi: new command `--hdi-list-relations` to show mapping of service-manager containers to their bindings. makes it\n  easy to see if some containers have too many or no binding, or conversely, if some bindings have no container.\n\n- hdi: new command `--hdi-repair-bindings` to harmonize service-manager containers and bindings, so they are 1-to-1\n\n### Fixed\n\n- hdi: add service manager instance information to hdi long list\n\n- hdi: allow `--hdi-rebind-*` to create new bindings with custom parameters\n\n## v0.7.3 - 2022-10-28\n\n### Fixed\n\n- hdi: rebind all tenants with one command\n\n- hdi: hdi list instances and bindings separately\n\n## v0.7.2 - 2022-10-19\n\n### Changed\n\n- rollback required engine to node v14 npm v6.14.\n  Note: support for node v14 will end shortly after the official end of life 2023-04-30.\n\n## v0.7.1 - 2022-10-17\n\n### Added\n\n- upgrade required engines to node v16 and npm v8\n\n### Fixed\n\n- cds: fixes cds-upgrade-all bug where number of tenants is below number of app instances\n\n- cds: update docs with tenant upgrade scaling info\n\n## v0.6.2 - 2022-10-13\n\n### Added\n\n- cds: cds-upgrade-all is now spreads the load across app instances\n\n### Fixed\n\n- rework internal error handling\n\n- reorganize some internal reuse functions\n\n## v0.6.1 - 2022-07-01\n\n### Fixed\n\n- hana cloud cannot tunnel warning for combination of `hditt` and port 443\n\n## v0.6.0 - 2022-07-01\n\n### Removed\n\n- various dedicated paas commands for reg/cds/hdi areas have been removed.\n  provider subaccount should not be treated specially here.\n\n### Changed\n\n- uaa: combined logically similar commands:\n\n  - `uaap` and `uaas` become `uaac`,\n  - `uaac` and `uaasc` become `uaap`\n\n- srv: `srvda` app_instance_id argument is now optional and defaults to zero\n\n### Fixed\n\n- `regl`/`regll`, `cdsl`/`cdsll`, `hdil`/`hdill` all allow filters\n\n- uaa: `uaac` can handle both subdomain and tenant id\n\n- updates for tests and documentation related to new command line interfaces\n\n## v0.5.49 - 2022-06-27\n\n### Fixed\n\n- use cf oauth-token instead of cf curl for better testability\n\n- testing reg/cds/hdi with nock and anonymize playback files\n\n- better status reporting for failed requests\n\n- reg: make registry tenant update serial\n\n- uaa: allow uaa code to handle tenantId\n\n## v0.5.48 - 2022-06-09\n\n### Added\n\n- rename repo to btp-tools-mtx\n\n## v0.5.47 - 2022-05-25\n\n### Added\n\n- cds: switch to manual control of auto undeploy\n\n### Fixed\n\n- cds: handle some tenant upgrade errors better\n\n## v0.5.45 - 2022-05-10\n\n### Fixed\n\n- uaa: allow 32-char passcode length\n\n## v0.5.44 - 2022-03-10\n\n### Fixed\n\n- hdi: bugfix in `hditp` / `hditt` where tunnel is not opened correctly\n\n## v0.5.43 - 2022-03-08\n\n### Fixed\n\n- hdi: work properly with multiple service-bindings to a single (hdi) service-instance\n\n- resilience with respect to missing cfRouteDomain\n\n## v0.5.42 - 2022-01-28\n\n### Added\n\n- support for x509 enabled uaa bindings\n\n- allow readonly commands for apps with `-live` suffix\n\n## v0.5.41 - 2022-01-21\n\n### Added\n\n- hdi: separate hdi tunnel information into runtime and design time user\n\n### Fixed\n\n- better error handling in cf curl\n\n- hdi: missing await for delete hdi tenant with service manager\n\n## v0.5.40 - 2021-11-15\n\n### Fixed\n\n- change order in cf target log to api/org/space\n\n- cds: write cds upgrade buildlog\n\n- hdi: expect service-manager first\n\n- hdi: change order in hdil so that tenant_id is leading and gets sorted\n\n- hdi: enhance hdil with host information for multi-db environments\n\n- srv: bugfix for --server-debug-app\n\n## v0.5.39 - 2021-10-26\n\n### Added\n\n- support for blue-green projects\n\n## v0.5.38 - 2021-10-20\n\n### Added\n\n- switch to minimal engine node 12 for eslint 8\n\n- hdi: new command `--hdi-migrate-all` to migrate hdi containers from instance-manager to service-manager\n\n### Fixed\n\n- hdi: fix tablelist in `hdit*`\n\n## v0.5.37 - 2021-09-01\n\n### Added\n\n- reg: new registry-update-all command\n\n- srv: new server-debug-app command\n-\n- allow `--force` flag to override danger guard\n\n### Fixed\n\n- reg: add global account id to regl\n\n- tablelist with row numbers by default\n\n## v0.5.36 - 2021-07-12\n\n### Added\n\n- add cds-onboard-tenant\n\n### Fixed\n\n- proper handling when `err.message` is undefined\n\n## v0.5.35 - 2021-06-14\n\n### Added\n\n- server start debugger feature\n\n### Fixed\n\n- uaa tests\n\n- tablelist handles sorting on columns where values are undefined\n\n## v0.5.34 - 2021-05-20\n\n### Added\n\n- allow uaa service-plan broker\n\n- registry-list and hdi-list with optional timestamps (new `--time` flag)\n\n### Fixed\n\n- show cf target with org/space/api before danger-guard\n\n- more user input validation for pass arguments and flag arguments\n\n- extend tests with pass argument consistency validation\n\n## v0.5.33 - 2021-04-28\n\n### Fixed\n\n- hdi: can now rebind hdi-container for credential rotation\n\n## v0.5.32 - 2021-03-30\n\n### Added\n\n- documentation for service manager support\n\n### Fixed\n\n- reg: more relevant information extracted for regl\n\n- bugfix for uaad\n\n## v0.5.31 - 2021-03-11\n\n### Added\n\n- hdi: service-manager support\n\n### Fixed\n\n- uaa: more resilient way to get service tokens\n\n## v0.5.30 - 2021-03-07\n\n### Added\n\n- moved repo to cds-community\n\n## v0.5.29 - 2021-03-04\n\n### Added\n\n- uaa: added saas service token feature\n\n## v0.5.28 - 2020-11-25\n\n### Fixed\n\n- hdi: automatically use next free sid port for hdi tunnel\n\n## v0.5.27 - 2020-11-20\n\n### Added\n\n- reg: added registry update dependencies\n\n### Fixed\n\n- reg: rewrote registry offboard subscription for skipping multiple apps\n\n- spawned subprocesses get cleaned up on SIGINT/SIGTERM\n\n## v0.5.26 - 2020-11-12\n\n### Fixed\n\n- better handling of the case when an app has no route\n\n- better text for hidden passwords\n\n## v0.5.25 - 2020-11-09\n\n### Fixed\n\n- fix regression for buildpack location in CF V3 API\n\n## v0.5.24 - 2020-08-30\n\n### Added\n\n- switch to CAPI v3\n  https://v3-apidocs.cloudfoundry.org/version/3.91.0/\n\n### Fixed\n\n- add app-version check to cache\n\n## v0.5.23 - 2020-08-30\n\n### Fixed\n\n- cds: second pass on error-handling for cds-upgrade\n\n## v0.5.22 - 2020-08-30\n\n### Fixed\n\n- mark long-list commands as uncommon\n\n- cds: fix error-handling during cds upgrade polling\n\n## v0.5.21 - 2020-08-22\n\n### Added\n\n- add flagArgs like `--decode` (for `uaa`) and `--reveal` (for `hdi`)\n\n### Fixed\n\n- passwords are now confidential by default\n\n- decrease cache gap to 12 hours to enable a quicker discovery for changes\n\n- show partial outputs for sub-exec failures\n\n## v0.5.20 - 2020-06-03\n\n### Fixed\n\n- cds: more resilient upgrade-tenant\n\n## v0.5.19 - 2020-05-25\n\n### Fixed\n\n- cds: failing upgrade-tenant should cause a non-zero errorcode\n\n## v0.5.18 - 2020-05-25\n\n### Added\n\n- srv: add command to extract env information\n\n### Fixed\n\n- cds: increase polling time to 20sec\n\n- cds: fix instance for upgrades and use capitalized headers consistently\n\n## v0.5.17 - 2020-05-18\n\n### Added\n\n- srv: add app-instance-index to openTunnel\n\n### Fixed\n\n- srv: get debugPort through /info and add instance information\n\n- srv: better handling of dynamic buildpacks from Github\n\n- srv: better handling for openTunnel without passing appInstanceIndex\n\n## v0.5.16 - 2020-05-15\n\n### Added\n\n- initial release\n"},{"name":"@cap-js-community/cds-cucumber","version":"0.3.10","description":"A library to write behaviour-driven tests for CAP applications","homepage":"https://cap-js-community.github.io/cds-cucumber/","keywords":["Cucumber","CAP","CDS"],"author":"SAP SE (https://www.sap.com)","license":"SEE LICENSE IN LICENSE","repository":"cap-js-community/cds-cucumber","bin":{"cds-add-cucumber":"./bin/cds-add-cucumber.js","cds-add-cucumber-plugin":"./cds-plugins/addCdsPlugin.js","cds-cucumber-build-ui5-tgz":"./cds-plugins/local-ui5-tgz/build.sh"},"main":"./lib/index.js","files":["bin","lib","cds-plugins/local-ui5-build","cds-plugins/local-ui5-tgz","CHANGELOG.md"],"engines":{"node":">=18"},"scripts":{"check":"./test/bin/check.sh","prepare:test":"./test/bin/prepare.sh","test":"./test/bin/test.sh","test:bookshop":"./test/bin/testBookshop.sh","test:sflight":"./test/bin/testSFlightNode.sh"},"dependencies":{"@sap-cloud-sdk/http-client":"^3","@sap-cloud-sdk/resilience":"^3","@sap/cds":"^7","chai":"^4","chai-shallow-deep-equal":"^1","chai-sorted":"^0.2","chromedriver":"latest","selenium-webdriver":"^4","sqlite3":"^5"},"peerDependencies":{"@cucumber/cucumber":"^10"},"type":"plugin","tags":["cucumber"],"gitHubOwner":"cap-js-community","gitHubRepo":"cds-cucumber","licenseSource":"apache-2.0","forks":1,"stars":2,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-07-10T13:13:12.977Z","updatedAt":"2024-04-30T10:08:35.468Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js-community/cds-cucumber/tree/main/","readme":"# CDS for Cucumber\n\nProvides a library for behaviour-driven tests of CAP applications.\nIt contains ready-to-use steps that help you write tests in a BDD style.\nThe [cucumber](https://cucumber.io) project provides framework for that.\n\nAs of now, the library supports SAP Fiori® Elements as UI framework and OData as communication protocol.\n\nA typical test looks like this:\n\n```gherkin\nFeature: Fiori preview page\n\n  Scenario: Open first Fiori preview page\n    Given we have started the application\n      And we have opened the url \"/\"\n    When we click on first Fiori preview page\n      And we search for \"jane\"\n    Then we expect to have 1 table records\n```\n\nThe project is in early **beta phase**, please expect changes.\n\n## Documentation\n\nList of steps and details is available in the [documentation](https://cap-js-community.github.io/cds-cucumber/list_namespace.html).\n\n## Usage\n\n### Setup\n\nInstall the [CAP development toolkit](https://cap.cloud.sap/docs/get-started/jumpstart#setup):\n\n```sh\nnpm add -g @sap/cds-dk\n```\n\n### Create a project\n\nMake sure you have a CAP project. You can create one with the following command:\n\n```sh\ncds init --add sample bookshop\ncd bookshop\n```\n\n### Configure\n\n```sh\nnpm add -D @cap-js-community/cds-cucumber\nnpx cds-add-cucumber\n```\n\n### Add feature files\n\nFile: test/features/first.feature\n```gherkin\nFeature: Bookshop first feature file\n\n  Scenario: Open \"Manage Books\" as \"alice\" and search for \"jane\"\n    Given we have started the application\n      And we have opened the url \"/\" with user \"alice\"\n    When we select tile \"Manage Books\"\n      And we search for \"jane\"\n    Then we expect to have 2 table records\n```\n\nFor existing projects you have to adjust the example above.\n\n### Run feature tests\n\n```\nnpx cucumber-js test\n```\n\nA recent version of the **chrome browser** should be present on the system.\n\n\n## More\n\nFor additional information see the [details](docs/DETAILS.md) page.\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js-community/cds-cucumber/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](https://github.com/cap-js-community/.github/blob/main/CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and cds-cucumber contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js-community/cds-cucumber).\n","downloadsCurrentMonth":71,"downloadsCurrentFortnight":9,"downloads365":1344,"downloadsFortnightGrowth":-85.48,"downloadsHistory":[{"yearMonth":"2023-07","downloads":95},{"yearMonth":"2023-08","downloads":24},{"yearMonth":"2023-09","downloads":258},{"yearMonth":"2023-10","downloads":199},{"yearMonth":"2023-11","downloads":137},{"yearMonth":"2023-12","downloads":40},{"yearMonth":"2024-01","downloads":130},{"yearMonth":"2024-02","downloads":239},{"yearMonth":"2024-03","downloads":81},{"yearMonth":"2024-04","downloads":62},{"yearMonth":"2024-05","downloads":79}],"npmlink":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber","versions":[{"version":"created","date":"2023-07-10T13:13:12.977Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/created","changelog":"","sourceType":"plugin"},{"version":"0.1.0","date":"2023-07-10T13:13:13.349Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.1.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-04-30T10:08:35.468Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.2.0","date":"2023-09-06T15:13:02.359Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.2.0","changelog":"","sourceType":"plugin"},{"version":"0.2.1","date":"2023-09-20T09:32:01.550Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.2.1","changelog":"","sourceType":"plugin"},{"version":"0.3.0","date":"2023-09-28T09:33:06.306Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.0","changelog":"","sourceType":"plugin"},{"version":"0.3.1","date":"2023-10-13T09:53:43.584Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.1","changelog":"","sourceType":"plugin"},{"version":"0.3.2","date":"2023-10-31T09:59:53.717Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.2","changelog":"","sourceType":"plugin"},{"version":"0.3.3","date":"2023-11-21T15:48:11.761Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.3","changelog":"","sourceType":"plugin"},{"version":"0.3.4","date":"2024-01-17T14:56:39.261Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.4","changelog":"","sourceType":"plugin"},{"version":"0.3.5","date":"2024-02-05T09:54:40.508Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.5","changelog":"","sourceType":"plugin"},{"version":"0.3.6","date":"2024-02-05T10:11:29.029Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.6","changelog":"","sourceType":"plugin"},{"version":"0.3.7","date":"2024-02-13T10:43:40.435Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.7","changelog":"","sourceType":"plugin"},{"version":"0.3.8","date":"2024-03-12T10:18:07.971Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.8","changelog":"","sourceType":"plugin"},{"version":"0.3.9","date":"2024-04-30T10:08:34.868Z","link":"https://www.npmjs.com/package/@cap-js-community/cds-cucumber/v/0.3.9","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## Version 0.3.10 - 2024-xx-xx\n\n### Added\n\n* server-side code-coverage\n* OData:\n  - support protocol version 2: *Given we require communication protocol \"odata-v2\"*\n  - perform actions: *When we execute action {word} with payload*\n\n### Changed\n### Removed\n### Fixed\n\n## Version 0.3.9 - 2024-04-30\n\n### Added\n\n* cds-add-cucumber - create an example github actions workflow file\n\n### Fixed\n\n* UI - skip InvisibleText elements\n\n## Version 0.3.8 - 2024-03-12\n\n### Fixed\n\n* UI: 1.121.0 onfocusin requires target\n\n## Version 0.3.7 - 2024-02-13\n\n### Added\n\n* Environment variable: CDS_CUCUMBER_BROWSER=chrome|firefox\n\n### Changed\n\n* Browser: default browser set to 'firefox' when Application Studio is detected\n\n### Removed\n\n* Environment variable: CDS_CUCUMBER_FIREFOX\n\n### Fixed\n\n* Secure working directory removal\n\n## Version 0.3.6 - 2024-02-05\n\n### Fixed\n\n* Plugin: generated test using removed step\n* Documentation: README referencing removed step\n\n## Version 0.3.5 - 2024-02-05\n\n### Added\n\n* Documentation: environment variable CDS_COMMAND_ARGn\n\n### Removed\n\n* Steps *Given we have started the CAP application*  \n  alternative: *Given we have started the application*\n\n### Fixed\n\n* selenium-webdriver: add option *--headless*\n\n## Version 0.3.4 - 2024-01-17\n\n### Added\n\n* Firefox support enabled via environment variable CDS_CUCUMBER_FIREFOX=1\n\n### Fixed\n\n* OData: retrieve service path via annotation \"@path\"\n\n## Version 0.3.3 - 2023-11-21\n\n### Added\n* UI: enable SAP UI5 1.120.1\n* cds-add-cucumber: create vscode extensions recommendation file when missing\n\n### Changed\n* chromedriver: changed dependency to \"latest\"\n* UI: reuse TableUtils when selecting rows in ValueHelp dialogs\n\n### Fixed\n* Security issue in axios - dependency tree update\n\n## Version 0.3.2 - 2023-10-31\n### Fixed\n\n* OData: expectation step \"its {word} to be {word}\"\n* UI: \"modify field\" step\n\n## Version 0.3.1 - 2023-10-13\n### Fixed\n\n* service\n  - terminate service process\n  - home directory for Windows OS\n\n## Version 0.3.0 - 2023-09-28\n### Changed\n\n* UI\n  - step \"modify field\" extended with ValueHelp dialog support\n* node\n  - require engine >= 18\n\n## Version 0.2.1 - 2023-09-20\n### Added\n\n* Windows OS support\n* UI\n  - enable CORS\n  - specify Accept-Language\n* OData\n  - expectation for count(*) result\n\n### Changed\n\n* Simplified \"Getting started\" guide\n* UI\n  - step \"we select one row in value help dialog\" does not clear the previous selection\n\n### Removed\n\n* UI\n  - step \"we select additional row in value help dialog\"\n\n### Fixed\n\n* UI\n  - step \"we select one row in value help dialog\" works with all target UI5 versions\n* temporary directory creation when running in parallel\n\n## Version 0.2.0 - 2023-09-06\n\n### Added\n\n* OData steps\n\n### Changed\n\n* Readme: switch to bookshop sample \"cds add sample\"\n\n### Fixed\n\n* Readme: install from npm repository\n* Plugins:\n  - reject failing commands\n  - hide test plugins\n* Concurrency:\n  - allow cucumber parallel jobs: `npx cucumber-js test --parallel 2`\n  - create new working directory (username and process ID dependent) using it as follows:\n    - Chrome: user data directory\n    - CAP services: home directory\n* Steps:\n  - detect technical issues when selecting tiles\n  - detect missing ValueHelp popup\n  - add new step: remove ValueHelp selection\n  - locating active dialog\n* cucumber:\n  - remove deprecated configuration: publishQuiet\n\n## Version 0.1.0 - 2023-07-10\n\n### Added\n\n- Initial version\n"},{"name":"@cap-js-community/odata-v2-adapter","version":"1.12.10","description":"OData V2 adapter for CDS","homepage":"https://cap.cloud.sap/","engines":{"node":">=18"},"author":"Oliver Klemenz <oklemenz@gmail.com>, Richard Lindner <rlindner81@gmail.com>","keywords":["COV2AP","CAP","CDS","ODATA","V2","V4"],"files":["src","cds-plugin.js","CHANGELOG.md"],"main":"src/index.js","types":"src/index.d.ts","scripts":{"run":"cd ./test/_env && cds-serve","start":"npm start --prefix=./test/_env","start:debug":"CDS_LOG_LEVELS_COV2AP=debug npm start","start:file":"npm run start:file --prefix=./test/_env","start:root":"npm run start:root --prefix=./test/_env","start:hana":"npm start --prefix=./test-integration/_env","start:hana:debug":"CDS_LOG_LEVELS_COV2AP=debug npm run start:hana","test":"jest","test:update":"npm test -- -u","test:debug":"CDS_LOG_LEVELS_COV2AP=debug npm run test","test:unit":"jest --testPathPattern='/test/'","test:external":"npm run test:unit -- --config=jest.external.config.js","test:unit:file":"CDS_ENV=testdb npm run test:unit","test:integration":"jest --testPathPattern='/test-integration/'","build:unit":"npm run build --prefix=./test/_env","build:integration":"npm run build --prefix=./test-integration/_env","deploy:unit":"cd ./test/_env && npm run test:deploy","deploy:integration":"npm run test:deploy --prefix=./test-integration/_env","lint":"npm run eslint && npm run prettier","lint:ci":"npm run eslint:ci && npm run prettier:ci","eslint":"eslint --fix .","eslint:ci":"eslint .","prettier":"prettier \"**/*.{js,json,md,yml,yaml}\" --write --log-level error","prettier:ci":"prettier \"**/*.{js,json,md,yml,yaml}\" --check","upgrade-lock":"rm -rf package-lock.json node_modules && npm i --package-lock=true","prepareRelease":"npm prune --production","audit":"npm audit --only=prod"},"dependencies":{"body-parser":"^1.20.2","body-parser-xml":"^2.0.5","express":"^4.19.2","express-fileupload":"^1.5.0","http-proxy-middleware":"^3.0.0","superagent":"^9.0.2","xml2js":"^0.6.2"},"devDependencies":{"@cap-js-community/odata-v2-adapter":"./","@cap-js/hana":"^0.4.0","@cap-js/sqlite":"^1.7.1","@sap/cds":"^7.9.1","@sap/cds-dk":"^7.9.2","@sap/cds-hana":"^2.0.0","@types/express":"^4.17.21","@types/jest":"29.5.12","@typescript-eslint/eslint-plugin":"^7.9.0","@typescript-eslint/parser":"^7.9.0","compression":"^1.7.4","eslint":"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^28.5.0","jest":"^29.7.0","prettier":"^3.2.5","supertest":"^7.0.0"},"license":"Apache-2.0","repository":{"type":"git","url":"https://github.com/cap-js-community/odata-v2-adapter.git"},"type":"plugin","tags":["odata"],"gitHubOwner":"cap-js-community","gitHubRepo":"odata-v2-adapter","licenseSource":"apache-2.0","forks":7,"stars":22,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-04-05T10:08:26.323Z","updatedAt":"2024-05-03T05:52:56.764Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js-community/odata-v2-adapter/tree/main/","readme":"# @cap-js-community/odata-v2-adapter (cov2ap)\n\n[![npm version](https://img.shields.io/npm/v/@cap-js-community/odata-v2-adapter)](https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter)\n[![monthly downloads](https://img.shields.io/npm/dm/@cap-js-community/odata-v2-adapter)](https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter)\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js-community/odata-v2-adapter)](https://api.reuse.software/info/github.com/cap-js-community/odata-v2-adapter)\n[![Main CI](https://github.com/cap-js-community/odata-v2-adapter/actions/workflows/main-ci.yml/badge.svg)](https://github.com/cap-js-community/odata-v2-adapter/commits/main)\n\n### [OData V2 adapter for CDS](https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter)\n\n> Exposes a full-fledged OData V2 service, converting OData V2 requests to CDS OData V4 service calls and responses back.\n> Runs in context of the [SAP Cloud Application Programming Model (CAP)](https://cap.cloud.sap/docs/)\n> using CDS Node.js module [@sap/cds](https://www.npmjs.com/package/@sap/cds) or CDS Java modules\n> [com.sap.cds](https://mvnrepository.com/artifact/com.sap.cds).\n\n## Getting Started\n\n- Run `npm add @cap-js-community/odata-v2-adapter` in `@sap/cds` project\n- Execute `cds-serve` to start server\n  - OData V2 service is available at http://localhost:4004/odata/v2/<service-path>\n  - OData V4 service is available at http://localhost:4004/odata/v4/<service-path>\n\n## Options\n\nThe OData V2 adapter for CDS instantiates an Express router. The following options are available:\n\n- **plugin:** OData V2 adapter is instantiated as part of CDS plugin. Default is `true`.\n- **build:** In case of plugin scenario, a build step is registered to prepare the OData V2 metadata. Default is `true`.\n- **base:** Base path under which the service is reachable. Default is `''`.\n- **path:** Path under which the service is reachable. Default is `'odata/v2'`. Default path is `'v2'` for CDS <7 or `middlewares` deactivated.\n- **model:** CDS service model (path(s) or CSN). Default is `'all'`.\n- **port:** Target port which points to OData V4 backend port. Default is process.env.PORT or `4004`.\n- **target:** Target which points to OData V4 backend host:port. Use `'auto'` to infer the target from server url after listening. Default is e.g. `'http://localhost:4004'`.\n- **targetPath:** Target path to which is redirected. Default is `'odata/v4'`. Default path is `''` for CDS <7 or `middlewares` deactivated.\n- **services:** Service mapping object from url path name to service name. Default is `{}`.\n- **mtxRemote:** CDS model is retrieved remotely via MTX endpoint for multitenant scenario (classic MTX only). Default is `false`.\n- **mtxEndpoint:** Endpoint to retrieve MTX metadata when option 'mtxRemote' is active (classic MTX only). Default is `'/mtx/v1'`.\n- **ieee754Compatible:** Edm.Decimal and Edm.Int64 are serialized IEEE754 compatible. Default is `true`.\n- **fileUploadSizeLimit:** File upload file size limit (in bytes) for multipart/form-data requests. Default is `10485760` (10 MB).\n- **continueOnError:** Indicates to OData V4 backend to continue on error. Default is `false`.\n- **isoTime:** Use ISO 8601 format for type cds.Time (Edm.Time). Default is `false`.\n- **isoDate:** Use ISO 8601 format for type cds.Date (Edm.DateTime). Default is `false`.\n- **isoDateTime:** Use ISO 8601 format for type cds.DateTime (Edm.DateTimeOffset). Default is `false`.\n- **isoTimestamp:** Use ISO 8601 format for type cds.Timestamp (Edm.DateTimeOffset). Default is `false`.\n- **isoDateTimeOffset:** Use ISO 8601 format for type Edm.DateTimeOffset (cds.DateTime, cds.Timestamp). Default is `false`.\n- **bodyParserLimit:** Request and response body parser size limit. Default is `'100mb'`.\n- **returnCollectionNested**: Collection of entity type is returned nested into a results section. Default is `true`.\n- **returnComplexNested**: Function import return structure of complex type (non collection) is nested using function import name. Default is `true`.\n- **returnPrimitiveNested**: Function import return structure of primitive type (non collection) is nested using function import name. Default is `true`.\n- **returnPrimitivePlain**: Function import return value of primitive type is rendered as plain JSON value. Default is `true`.\n- **messageTargetDefault**: Specifies the message target default, if target is undefined. Default is `'/#TRANSIENT#'`.\n- **caseInsensitive**: Transforms search functions i.e. substringof, startswith, endswith to case-insensitive variant. Default is `false`.\n- **propagateMessageToDetails**: Propagates root error or message always to details section. Default is `false`.\n- **contentDisposition**: Default content disposition for media streams (inline, attachment), if not available or calculated. Default is `'attachment'`.\n- **calcContentDisposition**: Calculate content disposition for media streams even if already available. Default is `false`.\n- **quoteSearch**: Specifies if search expression is quoted automatically. Default is `true`.\n- **fixDraftRequests**: Specifies if unsupported draft requests are converted to a working version. Default is `false`.\n- **changesetDeviationLogLevel**: Log level of batch changeset content-id deviation logs (none, debug, info, warn, error). Default is `'info'`.\n- **defaultFormat**: Specifies the default entity response format (json, atom). Default is `'json'`.\n- **processForwardedHeaders** Specifies if the `x-forwarded` headers are processed. Default is `true`.\n- **cacheDefinitions** Specifies if the definition elements are cached. Default is `true`.\n\n> All OData V2 adapter for CDS options can also be specified as part of CDS project-specific configuration\n> under section `cds.cov2ap` and accessed during runtime via `cds.env.cov2ap`.\n\n> Options can also be passed as command line environment variable, by converting the camel-cased option name to snake-case.\n> Underscores (`_`) need then to be escaped as double underscore (`__`) when provided via command line environment variable.\n>\n> Example:\n>\n> - path => CDS_COV2AP_PATH=odatav2\n> - quoteSearch => quote_search => CDS_COV2AP_QUOTE\\_\\_SEARCH=false\n\n## Advanced\n\n### Custom Server\n\n- Enhance or create `./srv/server.js`:\n  ```js\n  const cds = require(\"@sap/cds\");\n  const cov2ap = require(\"@cap-js-community/odata-v2-adapter\");\n  cds.on(\"bootstrap\", (app) => app.use(cov2ap()));\n  module.exports = cds.server;\n  ```\n\n### Logging\n\nLogging is based on [cds.log](https://cap.cloud.sap/docs/node.js/cds-log), therefore CDS logging configurations apply.\n\n#### Logging Modules\n\n| Component                | Module Name(s) |\n| ------------------------ | -------------- |\n| OData V2 adapter for CDS | cov2ap         |\n\n#### Kibana Logging\n\nIn order to enable Kibana friendly logging for `cds.log`\nfeature toggle `cds.features.kibana_formatter: true` needs to be set.\n\n#### Debug Mode\n\nDebug mode can be activated to log requests and responses processed (V2) and initiated (V4)\nby OData V2 adapter for CDS. The following information can be retrieved for analysis:\n\n- **Request:** url, headers, body\n- **Response:** status code/message, headers, body\n\nDebug log level can be activated\n\n- via command line environment variable: `CDS_LOG_LEVELS_COV2AP=debug`\n- via `cds.env` in code: `cds.env.log.levels.cov2ap = \"debug\"`\n\nDetails on how to set CDS environment can be found at [cds.env](https://cap.cloud.sap/docs/node.js/cds-env).\n\n#### Log Levels\n\nLogging can be configured to respect the following log levels:\n\n- **error**: Error logs are written (includes **warn**)\n- **warn**: Warning logs are written (includes **info**)\n- **info**: Info logs are written (includes **debug**)\n- **debug**: Debug logs are written\n- **trace**: Same as **debug**\n- **silent**: No logs are written\n\n#### Logging Components\n\n##### cds.log.levels.cov2ap: \"error\"\n\n- `[cov2ap] - Proxy:` Proxy processing error\n- `[cov2ap] - Cache:` Metadata cache error\n- `[cov2ap] - Authorization:` Authorization header parsing error\n- `[cov2ap] - MetadataRequest:` Metadata request processing error\n- `[cov2ap] - Request:` Request processing error\n- `[cov2ap] - Response:` Response processing error\n- `[cov2ap] - Batch:` Batch processing error\n- `[cov2ap] - AggregationKey:` Aggregation key error\n- `[cov2ap] - MediaStream:` Media stream processing error\n- `[cov2ap] - FileUpload:` File upload processing error\n\n##### cds.log.levels.cov2ap: \"warn\"\n\n- `[cov2ap] - Service:` Invalid service definition (name, path)\n- `[cov2ap] - Context:` Invalid (sub-)definition (name, path)\n- `[cov2ap] - ContentDisposition:` Content disposition warning\n\n##### cds.log.levels.cov2ap: \"info\"\n\n- `[cov2ap] - Batch:` Changeset order deviation (req, res)\n\n##### cds.log.levels.cov2ap: \"debug\"\n\n- `[cov2ap] - Request:` Log OData V2 client request (url, headers, body)\n- `[cov2ap] - ProxyRequest:` Log OData V4 proxy request (url, headers, body)\n- `[cov2ap] - ProxyResponse:` Log OData V4 proxy response (status code/message, headers, body)\n- `[cov2ap] - Response:` Log OData V2 client response (status code/message, headers, body)\n\n#### http-proxy-middleware\n\n- `[cov2ap] - [HPM]`: Proxy middleware processing logs\n\n### CDS Annotations\n\nThe following OData V2 adapter for CDS specific annotations are supported:\n\n**Service Level**:\n\n- `@protocol: [{ kind: 'odata-v2', path: '<path>' }]`: Specifies an additional custom relative OData V2 protocol service path (prepending OData V2 protocol prefix)\n- `@protocol: [{ kind: 'odata-v2', path: '/<path>' }]`: Specifies an additional custom absolute OData V2 protocol service path (ignoring OData V2 protocol prefix)\n- `@cov2ap.ignore`: Exclude service from OData V2 adapter conversion (service is not exposed as OData V2 service)\n\n**Entity Level**:\n\n- `@cov2ap.analytics: false`: Suppress analytics conversion for the annotated entity, if set to `false`.\n- `@cov2ap.analytics.skipForKey`: Suppress analytical conversion for the annotated entity, if all dimension key elements are requested\n- `@cov2ap.deltaResponse: 'timestamp'`: Delta response '\\_\\_delta' is added to response data of annotated entity with current timestamp information.\n- `@cov2ap.isoTime`: Values of type cds.Time (Edm.Time) are represented in ISO 8601 format for annotated entity.\n- `@cov2ap.isoDate`: Values of type cds.Date (Edm.DateTime) are represented in ISO 8601 format for annotated entity.\n- `@cov2ap.isoDateTime`: Values of type cds.DateTime (Edm.DateTimeOffset) are represented in ISO 8601 format for annotated entity.\n- `@cov2ap.isoTimestamp`: Values of type cds.Timestamp (Edm.DateTimeOffset) are represented in ISO 8601 format for annotated entity.\n- `@cov2ap.isoDateTimeOffset`: Values of type Edm.DateTimeOffset (cds.DateTime, cds.Timestamp) are represented in ISO 8601 format for annotated entity.\n\n**Entity Element Level**:\n\n- `@Core.ContentDisposition.Filename: <element>`: Specifies entity element, representing the filename during file upload/download.\n- `@Core.ContentDisposition.Type: '<value>'`: Controls the content disposition behavior in client/browser (`inline` or `attachment`).\n- `@cov2ap.headerDecode: [...]`: Array of sequential decoding procedures ('uri', 'uriComponent', 'base64') used for media entity upload header.\n\n### CDS Modeling Restrictions\n\nCDS project configuration `cds.odata.version` shall be set to `v4`, as OData V2 maps to OData V4.\nCDS supports modelling features that are not compatible with OData V2 standard:\n\n- **Singletons:** Usage of annotation `@odata.singleton` is not supported in combination with OData V2\n- **Structured Types:** Usage of `cds.odata.structs: true` is not supported in combination with OData V2\n- **Arrayed Types:** Usages of `array of` or `many` in entity element definitions lead to CDS compilation error: `Element must not be an \"array of\" for OData V2`\n- **Managed Compositions:** The usage of managed composition (currently) produces Format Exception in Fiori Elements V2 for Date/Time data types\n\nTo provide an OData V2 service based on the OData V2 adapter for CDS, those CDS modelling features must not be used.\nIn general any CDS OData API flavor must not be used in combination with OData V2 adapter for CDS.\n\nPer default, those modelling incompatibilities are reported as `Warning` and will not stop the compilation.\nThe resulting EDMX V2 may be invalid and not processable by an OData V2 client. To prevent this situation and fail\nearly to detect modelling incompatibilities, the severity for respective codes can be increased to `Error`,\nby setting the following environment variables:\n\n```json\n{\n  \"cdsc\": {\n    \"severities\": {\n      \"odata-spec-violation-array\": \"Error\",\n      \"odata-spec-violation-param\": \"Error\",\n      \"odata-spec-violation-returns\": \"Error\",\n      \"odata-spec-violation-assoc\": \"Error\",\n      \"odata-spec-violation-constraints\": \"Error\"\n    }\n  }\n}\n```\n\n### Cloud Foundry Deployment\n\nWhen deploying the OData V2 adapter for CDS to Cloud Foundry, make sure that it has access to the whole CDS model.\nEspecially, it’s the case, that normally the Node.js server is only based on folder `srv` and folder `db` is then missing on Cloud Foundry.\n\nTo come around this situation, trigger a `cds build` during development time, that generates a `csn.json` at location `gen/srv/srv/csn.json`.\nPoint your Cloud Foundry deployment of the OData V2 adapter for CDS to the folder `gen/srv` (using manifest.json or MTA), so that\nthe CDS models can be found via file `srv/csn.json`, during runtime execution on Cloud Foundry.\n\nMake sure, that all i18n property files reside next to the `csn.json` in a `i18n` or `_i18n` folder, to be detected by localization.\n\n### Multitenancy, Feature Toggles and Extensibility (MTX)\n\nOData V2 adapter for CDS supports multitenant scenarios. Basic extensibility is already supported in combination with the\n[CDS MTX](https://www.npmjs.com/package/@sap/cds-mtx) module. More advanced extensibility scenarios and feature toggles\nare supported in combination with the [CDS Streamlined MTX services](https://www.npmjs.com/package/@sap/cds-mtxs).\n\nIn order to provide the feature toggle vector to be used to build-up the corresponding `CSN` and `EDMX` metadata documents,\nthe Express request object `req` needs to enhanced by feature definitions.\nTo add support for a specific feature toggles management you can add a simple Express middleware as follows, for example, in your `server.js`:\n\n```js\nconst cds = require(\"@sap/cds\");\ncds.on(\"bootstrap\", (app) =>\n  app.use((req, res, next) => {\n    req.features = req.features || [\"advanced\"];\n    next();\n  }),\n);\n```\n\n### Build Task\n\nCDS OData V2 Adapter includes an CDS build task, that allows to prepare the OData V2 EDMX files for MTX sidecar app.\nThe build task is automatically active, in case project is running in multi-tenant context including MTX sidecar.  \nIt can be deactivated using option `cds.cov2ap.build: false`.\n\n### Unit-Tests\n\nThis repository comes with a suite of unit-tests covering the complete proxy implementation.\nThe tests can be executed as follows:\n\n- SQLite based:\n  - `npm run test:unit` ([source](test))\n- HANA based:\n  - Place HANA credentials at `test-integration/_env/db/default-services.json` in format:\n    ```json\n    {\n      \"hana\": [\n        {\n          \"credentials\": {}\n        }\n      ]\n    }\n    ```\n  - Deploy HANA test schema\n    - Switch dir: `cd test-integration/_env`\n    - Build model: `npm run build`\n    - Deploy model: `npm run deploy`\n  - Run tests (root dir): `npm run test:integration` ([source](test-integration))\n- All:\n  - `npm test`\n\nAll tests are executed as part of the GitHub Actions Continuous Integration (CI) pipeline.\n\n### SAP Fiori Elements V2\n\nThe OData V2 service provided by the OData V2 adapter for CDS can be used to serve an SAP Fiori Elements V2 UI.\n\nSAP Fiori Elements V2 examples:\n\n- SQLite based:\n  - **Analytics**: Analytical List Page app ([source](test/_env/app/analytics))\n  - **Basic Edit**: Basic editing app ([source](test/_env/app/basic))\n  - **Draft Edit**: Draft supported editing app ([source](test/_env/app/draft))\n  - **Hierarchy**: Hierarchical display of data in tree table ([source](test/_env/app/hierarchy))\n  - **Overview**: Overview Page app ([source](test/_env/app/overview))\n  - **XML**: Basic app (Atom format) ([source](test/_env/app/xml))\n- HANA based:\n  - **Parameters**: Parameterized Entity app ([source](test-integration/_env/app/parameters))\n\nExamples can be tested as follows:\n\n- Start server:\n  - SQLite based: `npm start`\n  - HANA based: `npm run start:hana`\n- Open Fiori Launchpad: http://localhost:4004/flp.html\n\n### Compression Support\n\nResponse compressions can be enabled, by registering the `compression` Node.js\nmodule in Express app at bootstrap time, e.g. in `srv/server.js`:\n\n```js\nconst cds = require(\"@sap/cds\");\nconst cov2ap = require(\"@cap-js-community/odata-v2-adapter\");\nconst compression = require(\"compression\");\n\ncds.on(\"bootstrap\", (app) => {\n  app.use(compression({ filter: shouldCompress }));\n  app.use(cov2ap());\n});\n\nfunction shouldCompress(req, res) {\n  const type = res.getHeader(\"Content-Type\");\n  if (type && typeof type === \"string\" && type.startsWith(\"multipart/mixed\")) {\n    return true;\n  }\n  // fallback to standard filter function\n  return compression.filter(req, res);\n}\n```\n\nThe shown compression filter function enables compression including\nOData Batch (`$batch`) calls with content type `multipart/mixed`.\n\n### Approuter Compression\n\n`@sap/approuter` now support out-of-the-box compression for OData $batch calls with `multipart/mixed`.\nIt's disabled by default, but can be enabled using option [compressResponseMixedTypeContent](https://www.npmjs.com/package/@sap/approuter#compression-property).\n\n## Custom Bootstrap\n\n### CAP Node.js Custom\n\n- Run `npm install @cap-js-community/odata-v2-adapter -s` in `@sap/cds` project\n- Create new file `./srv/index.js`:\n\n```js\nconst express = require(\"express\");\nconst cds = require(\"@sap/cds\");\nconst cov2ap = require(\"@cap-js-community/odata-v2-adapter\");\n\nconst host = \"0.0.0.0\";\nconst port = process.env.PORT || 4004;\n\n(async () => {\n  const app = express();\n\n  // OData V2\n  app.use(cov2ap());\n\n  // OData V4\n  await cds.connect.to(\"db\");\n  await cds.serve(\"all\").in(app);\n\n  const server = app.listen(port, host, () => console.info(`app is listing at ${host}:${port}`));\n  server.on(\"error\", (error) => console.error(error.stack));\n})();\n```\n\n- Run `node srv/index` from the project root to start the server:\n  - OData V2 service will be available at http://localhost:4004/odata/v2/<service-path>\n  - OData V4 service will be available at http://localhost:4004/odata/v4/<service-path>\n\nNote that `@sap/cds` is a peer dependency and needs to be available as module as well.\n\n### CAP Java Custom\n\n> For CAP Java projects prefer the Native OData V2 Adapter ([com.sap.cds/cds-adapter-odata-v2](https://mvnrepository.com/artifact/com.sap.cds/cds-adapter-odata-v2)).\n\n- Run `npm install @cap-js-community/odata-v2-adapter -s` in `@sap/cds` project\n- Provide CDS models (`db`, `srv`, `app`) or compile a generated CSN (see details below)\n- Create new file `./srv/index.js`:\n\n```js\nconst express = require(\"express\");\nconst cov2ap = require(\"@cap-js-community/odata-v2-adapter\");\n\nconst host = \"0.0.0.0\";\nconst port = process.env.PORT || 4004;\n\n(async () => {\n  const app = express();\n\n  // OData V2\n  app.use(\n    cov2ap({\n      target: \"<odata-v4-backend-url>\", // locally e.g. http://localhost:8080\n      services: {\n        \"<odata-v4-service-path>\": \"<qualified.ServiceName>\",\n      },\n    }),\n  );\n\n  const server = app.listen(port, host, () => console.info(`app is listing at ${host}:${port}`));\n  server.on(\"error\", (error) => console.error(error.stack));\n})();\n```\n\n- Run `node srv/index` from the project root to start the server:\n  - OData V2 service will be available at http://localhost:4004/odata/v2/<odata-v4-service-path>\n  - OData V4 service shall be available e.g. at http://localhost:8080/<odata-v4-service-path>\n\n#### Additional Considerations\n\n- A deployed version of OData V2 adapter for CDS shall have option `target` set to the deployed OData V4 backend URL.\n  This can be retrieved from the Cloud Foundry environment using `process.env`, for example,\n  from the `destinations` environment variable. Locally e.g. http://localhost:8080 can be used.\n- In option `services`, every OData V4 service URL path needs to mapped to\n  the corresponding fully qualified CDS service name, e.g. `\"/odata/v4/MainService/\": \"test.MainService\"`,\n  to establish the back-link connection between OData URL and its CDS service.\n- Make sure, that your CDS models are also available in the project.\n  Those reside either in `db`, `srv`, `add` folders, or a compiled (untransformed) `srv.json` is provided.\n  This can be generated by using the following command: `cds srv -s all -o .`\n- Alternatively, a `cds build` can be triggered as described in section \"Cloud Foundry Deployment\".\n- If not detected automatically, the model path can be set with option `model` (especially if `csn.json`/`srv.json` option is used).\n- Make sure, that all i18n property files reside next to the `csn.json` in a `i18n` or `_i18n` folder, to be detected by localization.\n- In a multitenant scenario in combination with a standalone app, the CDS model can be retrieved remotely via MTX endpoint (`mtxEndpoint`) by setting option `mtxRemote: true`.\n- Option `mtxEndpoint` can be specified as absolute url (starting with `http://` or `https://`), to be able to address MTX Sidecar\n  possibly available under a target different from OData v4 backend URL. If not specified absolutely, `target` is prepended to `mtxEndpoint`.\n\n## Contributions\n\n- Unit Tests: `npm test`\n- Test Server: `npm start`\n  - Service: `http://localhost:4004/odata/v2/main`\n  - Metadata: `http://localhost:4004/odata/v2/main/$metadata`\n  - Data: `http://localhost:4004/odata/v2/main/Header?$expand=Items`\n\nFor more details see [CONTRIBUTION](CONTRIBUTING.md) guide.\n\n## Features\n\n- GET, POST, PUT / MERGE / PATCH, DELETE\n- Batch support\n- Actions, Functions\n- Analytical Annotations\n- Deep Expands/Selects\n- JSON, Atom (XML) format\n- Deep Structures\n- Data Type Mapping\n- IEEE754Compatible\n- Messages / Error Handling\n- Location Header\n- $inlinecount / $count / \\$value\n- Entity with Parameters\n- File Upload (binary, multipart/form-data)\n- Stream Support (Octet and Url)\n- Content Disposition\n- Content-ID\n- Multitenancy (mtx, mtxs)\n- Feature Toggles\n- Extensibility\n- Draft Support\n- Search Support\n- Localization\n- Temporal Data\n- Tracing Support\n- Logging Correlation\n- ETag Support (Concurrency Control)\n- Next Links (skiptoken)\n- Delta Responses (deltatoken)\n- Continue-On-Error\n- X-HTTP-Method\n\n## OData V2/V4 Delta\n\n[What’s New in OData Version 4.0](http://docs.oasis-open.org/odata/new-in-odata/v4.0/cn01/new-in-odata-v4.0-cn01.html)\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js-community/odata-v2-adapter/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and <your-project> contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js-community/odata-v2-adapter).\n","downloadsCurrentMonth":14864,"downloadsCurrentFortnight":7480,"downloads365":139482,"downloadsFortnightGrowth":1.3,"downloadsHistory":[{"yearMonth":"2023-07","downloads":5577},{"yearMonth":"2023-08","downloads":9322},{"yearMonth":"2023-09","downloads":10850},{"yearMonth":"2023-10","downloads":13650},{"yearMonth":"2023-11","downloads":16994},{"yearMonth":"2023-12","downloads":11411},{"yearMonth":"2024-01","downloads":12359},{"yearMonth":"2024-02","downloads":13311},{"yearMonth":"2024-03","downloads":14312},{"yearMonth":"2024-04","downloads":13971},{"yearMonth":"2024-05","downloads":15063}],"npmlink":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter","versions":[{"version":"created","date":"2023-04-05T10:08:26.323Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/created","changelog":"","sourceType":"plugin"},{"version":"1.10.0","date":"2023-04-05T10:08:26.595Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-05-03T05:52:56.764Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/modified","changelog":"","sourceType":"plugin"},{"version":"1.10.1","date":"2023-04-12T07:52:54.144Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.1","changelog":"","sourceType":"plugin"},{"version":"1.10.2","date":"2023-04-18T14:18:28.402Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.2","changelog":"","sourceType":"plugin"},{"version":"1.10.3","date":"2023-04-19T08:03:01.646Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.3","changelog":"","sourceType":"plugin"},{"version":"1.10.4","date":"2023-04-24T06:50:16.491Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.4","changelog":"","sourceType":"plugin"},{"version":"1.10.5","date":"2023-05-15T08:59:09.621Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.5","changelog":"","sourceType":"plugin"},{"version":"1.10.6","date":"2023-06-05T11:10:52.955Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.10.6","changelog":"","sourceType":"plugin"},{"version":"1.11.0","date":"2023-06-26T08:46:31.454Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.0","changelog":"","sourceType":"plugin"},{"version":"1.11.1","date":"2023-06-27T13:54:31.767Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.1","changelog":"","sourceType":"plugin"},{"version":"1.11.2","date":"2023-07-03T06:30:16.120Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.2","changelog":"","sourceType":"plugin"},{"version":"1.11.3","date":"2023-07-03T09:06:31.473Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.3","changelog":"","sourceType":"plugin"},{"version":"1.11.4","date":"2023-07-04T05:59:44.136Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.4","changelog":"","sourceType":"plugin"},{"version":"1.11.5","date":"2023-08-02T11:47:24.546Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.5","changelog":"","sourceType":"plugin"},{"version":"1.11.6","date":"2023-08-10T08:01:04.772Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.6","changelog":"","sourceType":"plugin"},{"version":"1.11.7","date":"2023-09-29T06:22:49.170Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.7","changelog":"","sourceType":"plugin"},{"version":"1.11.8","date":"2023-10-24T09:01:29.354Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.8","changelog":"","sourceType":"plugin"},{"version":"1.11.9","date":"2023-11-20T12:14:21.763Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.9","changelog":"","sourceType":"plugin"},{"version":"1.11.10","date":"2023-12-01T08:09:42.338Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.10","changelog":"","sourceType":"plugin"},{"version":"1.11.11","date":"2023-12-01T13:14:39.760Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.11","changelog":"","sourceType":"plugin"},{"version":"1.11.12","date":"2023-12-18T14:37:13.690Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.11.12","changelog":"","sourceType":"plugin"},{"version":"1.12.0","date":"2024-01-08T10:04:02.689Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.0","changelog":"","sourceType":"plugin"},{"version":"1.12.1","date":"2024-01-08T10:57:30.957Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.1","changelog":"","sourceType":"plugin"},{"version":"1.12.2","date":"2024-01-09T13:15:36.306Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.2","changelog":"","sourceType":"plugin"},{"version":"1.12.3","date":"2024-02-05T07:02:15.253Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.3","changelog":"","sourceType":"plugin"},{"version":"1.12.4","date":"2024-02-09T11:40:11.684Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.4","changelog":"","sourceType":"plugin"},{"version":"1.12.5","date":"2024-02-09T13:20:33.908Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.5","changelog":"","sourceType":"plugin"},{"version":"1.12.6","date":"2024-03-04T07:19:14.494Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.6","changelog":"","sourceType":"plugin"},{"version":"1.12.7","date":"2024-03-06T15:01:51.734Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.7","changelog":"","sourceType":"plugin"},{"version":"1.12.8","date":"2024-04-02T06:56:42.903Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.8","changelog":"","sourceType":"plugin"},{"version":"1.12.9","date":"2024-05-03T05:52:56.429Z","link":"https://www.npmjs.com/package/@cap-js-community/odata-v2-adapter/v/1.12.9","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).\n\n## Version 1.12.10 - 2024-06-xx\n\n### Fixed\n\n- Do not log authorization header in debug traces\n- Fix error response for errors during media stream read\n\n## Version 1.12.9 - 2024-05-03\n\n### Fixed\n\n- Adopt new http proxy middleware\n- Remove `odata-version` header from request\n- Remove obsolete documentation about `cds.odata.v2proxy.urlpath` as now derived from protocols\n\n## Version 1.12.8 - 2024-04-02\n\n### Fixed\n\n- Convert OData V2 date string more relaxed allowing optional backslashes before forward slashes\n- Fix definition element cache for prototypes\n- Freeze definition element cache to prevent modification and store it as symbol\n- Option to disable definition cache via `cacheDefinitions: false`\n- ESLint interface typings correctly\n\n## Version 1.12.7 - 2024-03-06\n\n### Fixed\n\n- Fix build task for projects without MTX sidecar\n\n## Version 1.12.6 - 2024-03-04\n\n### Fixed\n\n- Support OData V2 CDS protocol annotation via (`@protocol: [{ kind: 'odata-v2', path: '<path>' }]`)\n- Expose OData V2 service at specified `odata-v2` protocol path, in addition to default endpoint\n- Make pipeline stream errors only warnings as root cause is already logged\n- Serve OData V2 Adapter routes always after CDS listening (also for non-plugin case)\n- Fix build task in case of compilation errors\n- Fix build task to also include pre-compiled OData V2 EDMX files in `srv`\n- Fix build task for Java\n\n## Version 1.12.5 - 2024-02-09\n\n### Fixed\n\n- Make data type conversion of values more robust\n- Fix bound action call error, where action parameter name also is an entity element name\n\n## Version 1.12.4 - 2024-02-09\n\n### Fixed\n\n- Fix `undefined` access for message filtering\n- Remove header `connection` for propagation via `fetch`\n\n## Version 1.12.3 - 2024-02-05\n\n### Fixed\n\n- Fix definition lookup for suffixed entity names (e.g. `.texts`)\n- Support message target context relative to draft root\n- Support request header `sap-messages: transientOnly\"` where state messages with target not starting with `/#TRANSIENT` are removed\n- Log message target context resolution issues as reduced level (`debug`)\n\n## Version 1.12.2 - 2024-01-09\n\n### Fixed\n\n- Build task only applicable if MTX sidecar is active\n- Use adapter singleton in CDS plugin\n\n## Version 1.12.1 - 2024-01-08\n\n### Fixed\n\n- Apply defaults in plugin build\n\n## Version 1.12.0 - 2024-01-08\n\n### Removed\n\n- Drop Node.js 16 support (as out-of-maintenance)\n- Replace `node-fetch` by standard `fetch`\n\n### Added\n\n- Support Node.js 20 (as new active)\n- Default of `target` changed to `auto`\n- Activate CDS plugin per default (can be disabled with option `plugin: false`)\n- Activate CDS build to precompile OData V2 metadata per default (can be disabled with option `build: false`)\n- Start CDS OData V2 adapter as CDS plugin in test setup\n- Protect against double instantiation, when loaded via CDS plugin\n\n## Version 1.11.12 - 2023-12-18\n\n### Fixed\n\n- Replace deprecated access (CDS 7.5)\n\n## Version 1.11.11 - 2023-12-01\n\n### Fixed\n\n- Convert transient message target without warning\n\n## Version 1.11.10 - 2023-12-01\n\n### Fixed\n\n- Respect return type for unbound actions/functions for message target resolution\n- Convert transient and absolute message targets correctly\n- Access prepared EDMX files if existing, otherwise compile like before\n- Register build plugin to prepare V2 metadata (enabled via adapter option `build: true`)\n- Skip conversion for element name only message targets\n- Check ModelProviderService before access\n- Service annotation `@cov2ap.ignore` to exclude service from OData V2 adapter\n- Log error with status code 400 as warning (before it was error)\n- Replace deprecated `substr` usages\n-\n\n## Version 1.11.9 - 2023-11-20\n\n### Fixed\n\n- Support union queries as parameterized views\n- Fix pull requests actions for external contributions\n- Simplify plugin detection again\n- Performance improvements\n\n## Version 1.11.8 - 2023-10-24\n\n### Fixed\n\n- Automatically activate plugin, if mentioned explicitly in `cds.plugins`\n- Move custom server section in README under advanced section, as plugin is the preferred way to bootstrap adapter\n\n## Version 1.11.7 - 2023-09-29\n\n### Added\n\n- Set CDS OData V2 protocol\n\n### Fixed\n\n- Fix absolute service path starting with target path parts e.g. `/odata`\n- Fix escaping of backslashes in search phrases\n\n## Version 1.11.6 - 2023-08-10\n\n### Changed\n\n- Switch to `better-sqlite3` via `@cap-js/sqlite`\n\n### Added\n\n- Suppress analytical conversion via entity annotation `@cov2ap.analytics.skipForKey`, if all dimension key elements are requested\n\n## Version 1.11.5 - 2023-08-02\n\n### Fixed\n\n- Respect new service endpoints\n- Support entity names with special characters\n\n## Version 1.11.4 - 2023-07-04\n\n### Fixed\n\n- Remove support for `serve_on_root`. Define path explicitly to `v2` to restore previous behavior\n\n## Version 1.11.3 - 2023-07-03\n\n### Fixed\n\n- Fix absolute OData V4 paths for `$batch` calls\n\n## Version 1.11.2 - 2023-07-03\n\n### Fixed\n\n- Fix `$metadata` request for absolute OData V4 paths\n\n## Version 1.11.1 - 2023-06-27\n\n### Fixed\n\n- Fix compatibility for option `middlewares` disabled or feature `serve_on_root` enabled\n\n## Version 1.11.0 - 2023-06-26\n\n### Added\n\n- CDS 7 support\n- Default route with CDS < 7 or option `middlewares` disabled or feature `serve_on_root` enabled stays `v2`\n- Default route with CDS >= 7 is `/odata/v2`\n\n## Version 1.10.6 - 2023-06-05\n\n### Fixed\n\n- Fix metadata type for managed composition entities and sub-entities\n\n## Version 1.10.5 - 2023-05-15\n\n### Fixed\n\n- Replace deprecated usage of `req.run` with `cds.run`\n- Update of `node-fetch`\n- Remove soon deprecated `req.getUriInfo`\n\n## Version 1.10.4 - 2023-04-24\n\n### Fixed\n\n- Fix start of `cds.plugin`\n\n## Version 1.10.3 - 2023-04-19\n\n### Fixed\n\n- Fix access to `undefined` element during data conversion\n\n## Version 1.10.2 - 2023-04-18\n\n### Fixed\n\n- Convert array structures\n\n## Version 1.10.1 - 2023-04-12\n\n### Added\n\n- Bootstrapping via CDS plugin (`cds.cov2ap.plugin: true`)\n\n### Fixed\n\n- Update `xml2js` dependency to fix security vulnerability\n\n## Version 1.10.0 - 2023-04-05\n\n### Added\n\n- Transition to open source code\n\n### Fixed\n\n- Bound entity operation result is correctly nested with entity name prefix\n\n## Version 1.9.21 - 2023-03-24\n\n### Removed\n\n- Deprecation of inner source library\n\n## Version 1.9.20 - 2023-03-09\n\n### Fixed\n\n- Cache invalidation for Streamlined MTX (extensibility enabled) with CDS 6.6.1\n- Use named parameters for mtxs actions to protect against incompatible changes\n- Allow status code 304 (not modified) when reading OData V4 metadata (as success)\n\n## Version 1.9.19 - 2023-02-15\n\n### Fixed\n\n- Provide subdomain information to logs\n- Use correct correlation-id for logging (setup CDS context correctly)\n- React to incompatible change of mtxs getEdmx, to provide (internal) model parameter\n- Enhance example app to show usage of bound/unbound OData V2 actions in Fiori UI via annotation\n\n## Version 1.9.18 - 2023-01-18\n\n### Fixed\n\n- Unicode encode messages header\n\n## Version 1.9.17 - 2023-01-09\n\n### Fixed\n\n- Fix special replacement pattern in $filter conversion\n\n## Version 1.9.16 - 2022-12-20\n\n### Fixed\n\n- Reject proxy processing of non OData services\n- Use stream pipeline for result streaming\n- Proxy does not end request to target anymore after writing body\n- Document that managed compositions will not work correctly in Fiori Elements V2\n\n## Version 1.9.15 - 2022-11-11\n\n### Fixed\n\n- Keep `ID__` parameter as query option for bound action/function on analytical entities\n- Remove introduced query option `select` for bound action calls on analytical entities again\n\n## Version 1.9.14 - 2022-11-07\n\n### Fixed\n\n- Provide `value` section of `ID__` aggregation key as query option `select` to bound action handler\n- Accept aggregation annotations in lowercase and uppercase writing\n- Support `@Aggregation.ReferenceElement` and `@Aggregation.Reference` annotations to perform aggregation on different element\n- Only a single aggregation reference element is supported, specified as array with single element, e.g. `['element']`\n- Cast aggregation values of `#COUNT_DISTINCT` to `Integer` type to be represented as number (not as string), if typed accordingly\n- Map default aggregation `#COUNT` to virtual property `$count` of `$apply`\n- Remove unneeded temporary aggregation `$COUNT`. Use `#COUNT` instead.\n\n## Version 1.9.13 - 2022-11-03\n\n### Fixed\n\n- Escape entity key value for bound action key parameter mapping\n- Support action parameters that overload bound entity key names\n- Support action/function on analytical entities via `ID__` aggregation key\n\n## Version 1.9.12 - 2022-11-02\n\n### Fixed\n\n- Fix `$metadata` lookup with query options\n\n## Version 1.9.11 - 2022-11-02\n\n### Fixed\n\n- Support new CDS integer types\n- Fallback target `auto` to `default` target until dynamic `target/port` assignment is available\n- Prevent loading OData V4 `$metadata` when OData V2 `$metadata` is requested\n- Fix draft requests re-write for `$filter`\n- Proxy option to disable `x-forwarded` header processing (`processForwardedHeaders: false`)\n\n## Version 1.9.10 - 2022-10-04\n\n### Fixed\n\n- Atom format fixes\n- Trim spaces for filter function parameter transformations\n- Allow passing proxy options as command line env (`camelCase` to `snake_case`, escape `_` by doubling)\n\n## Version 1.9.9 - 2022-09-21\n\n### Fixed\n\n- Fix logging layers and debug trace activation\n- Connect `cds.log` with `http-proxy-middleware`\n\n## Version 1.9.8 - 2022-09-20\n\n### Fixed\n\n- Fix data type conversion for single attribute value responses (incl. $value)\n- Fix response mapping of parameters for `Parameters` entity\n- Respect `$format=json` for service root document\n- Introduce proxy options to specify OData default format (default is `json`)\n- `Atom (XML)` format support\n\n## Version 1.9.7 - 2022-09-14\n\n### Fixed\n\n- Respect `$select` filter for `deferreds` structure\n- Fix definition lookup for service entities with scoped name\n- Fix definition lookup for unbound service operations (actions, functions) with scoped name\n- Improve Kibana logging even more\n- Use project specific logger\n- Document that option `fileUploadSizeLimit` only applies to uploads via `POST` using `multipart/form-data` requests\n\n## Version 1.9.6 - 2022-09-01\n\n### Fixed\n\n- Improve Kibana logging\n- Improve error and warning logging messages\n- Make log level of `Changeset order deviation` configurable via `changesetDeviationLogLevel`. Default is now `'info'`.\n\n## Version 1.9.5 - 2022-08-30\n\n### Fixed\n\n- Fix media upload via associations/compositions using POST\n- Fix duplication of streaming request data for media entity (chunked)\n- Fix result structure for parameterized entities entry addressed by key (object or not found)\n- Update README on sample apps\n\n## Version 1.9.4 - 2022-08-01\n\n### Fixed\n\n- Remove logging library `@sap/logging`. Use `cds.log` instead.\n- Remove obsolete proxy option `disableNetworkLog`\n- Proxy option `fixDraftRequests` suppresses unsupported draft expand to `SiblingEntity` and injects `SiblingEntity: null`\n\n## Version 1.9.3 - 2022-07-21\n\n### Fixed\n\n- Fix batch handling of parameterized entities\n\n## Version 1.9.2 - 2022-07-18\n\n### Fixed\n\n- Check on `cds.mtx.eventEmitter` before access\n- Restructure README\n\n## Version 1.9.1 - 2022-07-15\n\n### Fixed\n\n- Compile CSN for Node.js when loaded from CDS MTX services\n- Check on `cds.requires.multitenancy` instead of deprecated `cds.requires.db.multiTenant` (compatible)\n- Support `$count` with parameterized entities\n- Make decoding of JWT token body more robust (error log in case of invalid JWT)\n- Synchronize parallel loading of CSN and EDMX\n- First (alpha) support for CDS Streamlined MTX (no extensibility support yet)\n- Move `@types/express` to devDependencies\n\n## Version 1.9.0 - 2022-07-04\n\n### Fixed\n\n- CDS 6 compatible version\n- Enhance proxy option `target` with mode `auto` to handle dynamic target/port assignment (e.g. for unit-tests)\n- Represent time component of `cds.Date/Edm.DateTime` with second precision (i.e. `00:00:00`)\n\n## Version 1.8.21 - 2022-06-22\n\n### Fixed\n\n- Add `Type` suffix to fix `__metadata.type` for parameterized entities (datajs did skip date type conversion)\n- Fix parameterized entities navigation links\n- Enhance Fiori Elements example apps\n\n## Version 1.8.20 - 2022-06-13\n\n### Fixed\n\n- Change README on Approuter compression flag `compressResponseMixedTypeContent`\n- Fill and process surrogate key `ID__` correctly in case of analytical queries\n- Add an example Fiori Elements applications showcasing hierarchical `TreeTable` usage\n- Rework UI application examples (basic, draft and hierarchy apps)\n\n## Version 1.8.19 - 2022-05-18\n\n### Fixed\n\n- Don't propagate `host` header to forwarded calls.\n\n## Version 1.8.18 - 2022-05-13\n\n### Fixed\n\n- Propagate all headers to forwarded calls.\n\n## Version 1.8.17 - 2022-05-12\n\n### Fixed\n\n- Filter out annotation elements in response data starting with `odata.` or including `@odata.`.\n- Elements starting with `@` are excluded as before.\n- Propagate special headers to forwarded calls (i.e. starting with `dwc`).\n\n## Version 1.8.16 - 2022-04-28\n\n### Fixed\n\n- Fix if elements are annotated with `@cds.api.ignore`\n- Abort file upload when limit is reached\n\n## Version 1.8.15 - 2022-04-25\n\n### Fixed\n\n- Remove internal repository reference\n- Document that Singletons are not available in OData V2\n- Ignore omitted elements annotated with `@cds.api.ignore`\n- Support validated for absolute context urls via `cds.odata.contextAbsoluteUrl`.\n- Skip aggregation for measures with aggregation `#NONE` and `#NOP`\n- Support `$count` aggregations for measures with aggregation `#COUNT`\n- Changed OData type mapping for `Edm.Byte` to `cds.Integer`\n\n## Version 1.8.14 - 2022-04-08\n\n### Fixed\n\n- Upgrade `@sap/logging` to fix vulnerability\n\n## Version 1.8.13 - 2022-04-07\n\n### Fixed\n\n- Remove peer dependency to prevent workspace failures\n\n## Version 1.8.12 - 2022-04-01\n\n### Fixed\n\n- Refactorings to support universal CSN\n- Refactorings to support metadata prototype layering\n- Include `search` in `$apply` aggregations\n\n## Version 1.8.11 - 2022-03-11\n\n### Fixed\n\n- Fix for `falsy` values during data type conversion for functions and actions\n- Add OData V2 links via link providers to HTML index page\n\n## Version 1.8.10 - 2022-03-01\n\n### Fixed\n\n- Refactor locale determination from CDS\n- Serialize body to string in case of type `object` before calculating content length\n- Support `AnalyticalContext` annotations in addition to deprecated `Analytics` annotations\n\n## Version 1.8.9 - 2022-02-09\n\n### Fixed\n\n- Stabilization fixes\n\n## Version 1.8.8 - 2022-02-08\n\n### Fixed\n\n- Proxy option `calcContentDisposition` to calculate `content-disposition` header even if already available\n\n## Version 1.8.7 - 2022-02-03\n\n### Fixed\n\n- Proxy option `fixDraftRequests` to convert unsupported draft request to a working version (default: false)\n\n## Version 1.8.6 - 2022-02-01\n\n### Fixed\n\n- Fix README for combined custom backend bootstrap\n- Allow annotation `@odata.type` in lower case format\n- Allow type prefix `datetime` in addition to `datetimeoffset`\n- Add peer dependency @types/express\n\n## Version 1.8.5 - 2022-01-17\n\n### Fixed\n\n- Prevent additional call to fill `content-disposition`, in case header is already provided with stream\n- Support OData V2 `binary` media upload via POST for entities with element of type `Binary` and without `@Core.MediaType` annotations\n- Return server error as response, if OData V4 server does not support media upload without `@Core.MediaType` annotation\n  - e.g. `No payload deserializer available for resource kind 'PRIMITIVE' and mime type 'image/png'`\n\n## Version 1.8.4 - 2021-12-06\n\n### Fixed\n\n- Unquote action/function parameter of types `cds.UUID`, `cds.Binary`, `cds.LargeBinary`, `cds.Date`, `cds.Time`, `cds.DateTime`, `cds.Timestamp`\n\n## Version 1.8.3 - 2021-12-06\n\n### Fixed\n\n- Prevent parsing body for HEAD requests against $batch\n- Fix single quotes of URL parameters for request body conversion respecting line breaks\n- Introduce proxy option `quoteSearch` to control search expression quoting. Default is `true`\n- Fix bound action call to entity key having association type\n- Fix action/function parameter of types date, time, datetime\n\n## Version 1.8.2 - 2021-12-01\n\n### Fixed\n\n- Catch and handle unexpected errors during proxy request processing\n- Validate request body and content-type in request\n- Switch of internal NPM repository (Nexus -> Artifactory)\n\n## Version 1.8.1 - 2021-11-19\n\n### Fixed\n\n- Change action/function return type value representation for primitive types to include nesting to conform to OData standard\n- Introduce proxy options `returnPrimitiveNested: false` to keep previous action/function return value representation for primitive types\n- Introduce proxy option `returnCollectionNested` to control collection of entity type nesting into a `results` section. Default is `true`\n- Fill standardized `x-correlation-id` request header in addition to `x-correlationid` for proxy requests\n\n## Version 1.8.0 - 2021-11-17\n\n### Fixed\n\n- Add README documentation for annotation `@Core.ContentDisposition.Type`\n- Change `content-disposition` header default from `inline` to `attachment`\n- Proxy option `contentDisposition` to specify default content disposition for media streams (inline, attachment)\n- Unescape single quotes of action URL parameters for request body conversion\n- Fix action/function return type representation for `cds.LargeString`\n- Improve formatting of README and CHANGELOG\n- Adjust repository url\n\n## Version 1.7.16 - 2021-11-10\n\n### Fixed\n\n- `Content-Disposition` header filename is now url encoded\n- Annotation `@Core.ContentDisposition.Type` to specify content disposition type (e.g. inline, attachment (default), etc.)\n\n## Version 1.7.15 - 2021-11-08\n\n### Fixed\n\n- Quote key parts of type `cds.LargeString` for uri generation\n\n## Version 1.7.14 - 2021-11-03\n\n### Fixed\n\n- Decode url key values before conversion\n\n## Version 1.7.13 - 2021-10-18\n\n### Fixed\n\n- Escape quotes in search string before quoting\n\n## Version 1.7.12 - 2021-10-07\n\n### Fixed\n\n- Proxy option `propagateMessageToDetails` to always propagate root error or message to details section\n- Support for fetching Edmx metadata locally via `cds.mtx.getEdmx`\n- Support for fetching Edmx metadata remotely via MTX service url\n\n## Version 1.7.11 - 2021-09-09\n\n### Fixed\n\n- Convert ContentID for warning messages and error body and propagate to details\n- Fix batch boundary parsing from content type with charset definition\n- Functions `startswith` and `endswith` respect proxy option `caseInsensitive`\n\n## Version 1.7.10 - 2021-08-31\n\n### Fixed\n\n- Fix query options not part of action parameters\n- Proxy option `caseInsensitive` to transform search function e.g. `substringof` to case-insensitive variant\n\n## Version 1.7.9 - 2021-08-06\n\n### Fixed\n\n- Add metadata type of inline return type for actions and functions\n- Proxy option `messageTargetDefault` to specify default message target, if undefined\n- Empty proxy option `messageTargetDefault` leaves message target untouched\n\n## Version 1.7.8 - 2021-07-28\n\n### Fixed\n\n- Support for verb tunneling, i.e., `POST` with `X-HTTP-Method` header\n\n## Version 1.7.7 - 2021-07-27\n\n### Fixed\n\n- Support inline return type for actions and functions\n- Default undefined message target to `/#TRANSIENT#`\n- Return 404 for unknown service name during model compilation\n- Enhance logging to contain service name for service lookup from request\n\n## Version 1.7.6 - 2021-07-01\n\n### Fixed\n\n- Prevent exception on handling entities without keys\n\n## Version 1.7.5 - 2021-06-21\n\n### Fixed\n\n- Prevent unnecessary expensive `isExtended` call per request using metadata cache\n\n## Version 1.7.4 - 2021-06-18\n\n### Fixed\n\n- Support annotation `@odata.Type` for non-UUID CDS types\n- Set header `x-cds-odata-version: v2` to indicate target OData version to CDS runtime\n- Explain usage of response compression in README\n\n## Version 1.7.3 - 2021-06-11\n\n### Fixed\n\n- Change OData V4 `continue-on-error` default to `false`\n- Proxy option `continueOnError: true` available to activate `continue-on-error`\n\n## Version 1.7.2 - 2021-06-10\n\n### Fixed\n\n- Fix content type normalization to preserve charset\n\n## Version 1.7.1 - 2021-05-28\n\n### Fixed\n\n- Fix return type determination for external services definitions\n\n## Version 1.7.0 - 2021-05-27\n\n### Fixed\n\n- Change action/function return type value representation for complex and primitive types\n- Introduce proxy options `returnComplexNested` and `returnPrimitivePlain` to keep previous action/function return value representation\n\n## Version 1.6.3 - 2021-05-26\n\n### Fixed\n\n- Convert additional targets of response messages\n- Transform leading part of locale to lower-case\n- Fix local entity name determination for scoped entities, e.g. `.texts`\n\n## Version 1.6.2 - 2021-04-29\n\n### Fixed\n\n- Merge headers and body of POST and PUT media entity upload calls\n- Handle error case in PUT media entity upload call\n\n## Version 1.6.1 - 2021-04-12\n\n### Fixed\n\n- Handle authorization header correctly in media upload\n\n## Version 1.6.0 - 2021-04-06\n\n### Fixed\n\n- Final CDS 5 compatibility version\n\n## Version 1.5.11 - 2021-03-26\n\n### Fixed\n\n- CDS 5 compatibility (>= 1.6.0 needed for CDS 5)\n- Support `content-disposition` header in media entity upload\n- Introduction of element annotation `@cov2ap.headerDecode` to decode header values\n\n## Version 1.5.10 - 2021-03-18\n\n### Fixed\n\n- Fix crash for bound action without return type\n- Consider bound action binding parameter for messages targets\n\n## Version 1.5.9 - 2021-03-02\n\n### Fixed\n\n- Improve TypeScript typings\n\n## Version 1.5.8 - 2021-02-25\n\n### Fixed\n\n- Update `@sap/logging` dependency\n\n## Version 1.5.7 - 2021-02-19\n\n### Fixed\n\n- Restore backwards compatibility with CDS 3\n\n## Version 1.5.6 - 2021-02-12\n\n### Fixed\n\n- Convert response message targets\n\n## Version 1.5.5 - 2021-01-27\n\n### Fixed\n\n- Align determination of locale including sub tags (e.g. `zh-TW`)\n\n## Version 1.5.4 - 2021-01-26\n\n### Fixed\n\n- Support action/function array parameter types\n- Introduce proxy option `bodyParserLimit` for body parser size limit\n\n## Version 1.5.3 - 2021-01-12\n\n### Fixed\n\n- Improve TypeScript typings\n\n## Version 1.5.2 - 2021-01-11\n\n### Fixed\n\n- Add TypeScript typings for proxy constructor\n\n## Version 1.5.1 - 2020-12-21\n\n### Fixed\n\n- Normalize service root path in service root xml to include trailing slash\n\n## Version 1.5.0 - 2020-12-16\n\n### Fixed\n\n- Update minor version\n\n## Version 1.4.63 - 2020-12-15\n\n### Fixed\n\n- Fix that file upload error message does not return with `500` status code\n\n## Version 1.4.61 - 2020-12-11\n\n### Fixed\n\n- Fix accept header for binary data retrieval to include `application/json`\n\n## Version 1.4.60 - 2020-12-07\n\n### Fixed\n\n- Respect offset for `Edm.DateTimeOffset`, and default to UTC offset (+0000)\n- Fix ticks and offset calculation for type `DateTimeOffset` to handle offset as minutes\n- Update README for custom bootstrap to give `proxy()` priority over `cds.serve` (as with `cds run`)\n- Make authorization header parsing more robust\n- Provide `__metadata` type information for function/action result\n- Data format of type `cds.Time (Edm.Time)` is switchable to ISO 8601 with proxy option `isoTime` or entity annotation `@cov2ap.isoTime`\n- Data format of type `cds.Date (Edm.DateTime)` is switchable to ISO 8601 with proxy option `isoDate` or entity annotation `@cov2ap.isoDate`\n- Data format of type `cds.DateTime / Edm.DateTimeOffset` is switchable to ISO 8601 with proxy option `isoDateTime` or entity annotation `@cov2ap.isoDateTime`\n- Data format of type `cds.Timestamp / Edm.DateTimeOffset` is switchable to ISO 8601 with proxy option `isoTimestamp` or entity annotation `@cov2ap.isoTimestamp`\n- Process DateTimeOffset always as UTC information (with `Z`)\n\n## Version 1.4.59 - 2020-12-02\n\n### Fixed\n\n- Change accept header to `application/json`, if accept `xml` is requested\n- Fix single service support bound to root url\n- Data format of type `Edm.DateTimeOffset` (`cds.DateTime`, `cds.Timestamp`) is switchable to ISO 8601 with proxy option `isoDateTimeOffset` or entity annotation `@cov2ap.isoDateTimeOffset`\n\n## Version 1.4.58 - 2020-11-26\n\n### Fixed\n\n- Support boolean header value in media entity\n- Prevent escaping of quotes in url for batch requests\n- Add `media_src` and `content-type` in `__metadata` for media entities\n\n## Version 1.4.57 - 2020-11-24\n\n### Fixed\n\n- Match headers case-insensitive for custom body in media entity\n- Parse header string values for non-string types in media entity\n\n## Version 1.4.56 - 2020-11-12\n\n### Fixed\n\n- Enable OData V4 `continue-on-error` per default\n- Add proxy option to deactivate `continue-on-error`\n\n## Version 1.4.55 - 2020-11-10\n\n### Fixed\n\n- Fix host port in response links\n- Handle duplication of link tokens\n\n## Version 1.4.54 - 2020-11-05\n\n### Fixed\n\n- Support mapping of `__next` annotation\n- Forward file upload headers to media entity POST call\n- Explain annotation `@Core.ContentDisposition.Filename` in README\n- Update README on OData API flavors\n- Fix links for navigation collections and query options\n\n## Version 1.4.53 - 2020-10-30\n\n### Fixed\n\n- Support custom body for binary media upload via POST\n- Set `Accept` header for `$batch` proxy request to `multipart/mixed`\n- Set missing response header `Content-Transfer-Encoding: binary`\n\n## Version 1.4.52 - 2020-10-27\n\n### Fixed\n\n- Log warning for change set order violation, instead returning an error response\n\n## Version 1.4.51 - 2020-10-27\n\n### Fixed\n\n- Support OData V2 `binary` media upload via POST\n- Support OData V2 `multipart/form-data media` upload via POST\n- Update README on logging layers\n\n## Version 1.4.50 - 2020-10-22\n\n### Fixed\n\n- Rewrite batch success status code from `200` to `202`\n- Remove OData V4 header `odata-entityid`\n- Propagate `Content-ID` in response to HTTP request headers\n- Remove artificially added `Content-ID` header from batch response\n- Fix `Content-ID` order check for deviations between request and response\n\n## Version 1.4.49 - 2020-10-19\n\n### Fixed\n\n- Fix entity uris with `x-forwarded-path` headers for OData batch calls\n- Support of `odata-entityid` header rewrite\n\n## Version 1.4.48 - 2020-10-16\n\n### Fixed\n\n- Fix entity uris with `x-forwarded-path` headers\n- Forward `x-request-id`, `x-correlationid` for metadata request\n\n## Version 1.4.47 - 2020-10-08\n\n### Fixed\n\n- Respect `Content-ID` in HTTP request headers\n- Update on peer dependencies\n- Update README on OData V2 Adapter for CAP Java\n- Update README on mission statement\n\n## Version 1.4.46 - 2020-09-29\n\n### Fixed\n\n- Update README on option `cds.env.odata.v2proxy.urlpath`\n- Delta response annotation `@cov2ap.deltaResponse: 'timestamp'`\n\n## Version 1.4.45 - 2020-09-17\n\n### Fixed\n\n- Prepare `Delta Responses` support in proxy (not yet supported by CDS)\n- Remove metadata information in request payload deeply\n- Update README on CDS modelling restrictions\n\n## Version 1.4.44 - 2020-09-03\n\n### Fixed\n\n- Rename proxy option `standalone` to `mtxRemote`\n- Allow proxy option `mtxEndpoint` to be absolute http url\n- Support for `cds.env` for proxy options under section `cds.cov2ap`\n- Update README and JSDoc documentation\n\n## Version 1.4.43 - 2020-09-01\n\n### Fixed\n\n- Fix `$filter` function conversion\n- Fix remote CSN fetch for standalone proxy\n- Fix `@sap.aggregation.role` annotation detection\n- Annotation `@cov2ap.analytics: false` to suppress analytical conversion\n- Update README documentation\n\n## Version 1.4.42 - 2020-08-05\n\n### Fixed\n\n- Add missing `Content-ID` header for batch changeset\n\n## Version 1.4.41 - 2020-08-03\n\n### Fixed\n\n- CDS 4 compatibility\n- Improve logging layers\n- Update README documentation\n- Improve JWT tenant processing\n\n## Version 1.4.40 - 2020-07-20\n\n### Fixed\n\n- Fix aggregation grouping on filtered elements\n- Support `sap:` analytical annotations\n\n## Version 1.4.39 - 2020-07-10\n\n### Fixed\n\n- Move annotation `ContentDisposition.Filename` to data element\n- Improve stability of content disposition\n\n## Version 1.4.38 - 2020-07-06\n\n### Fixed\n\n- Fix `base` proxy option (follow-up)\n\n## Version 1.4.37 - 2020-06-26\n\n### Fixed\n\n- Replace `pathRewrite` option by `targetPath` option\n- Fix `base` proxy option\n- Respect OData annotation `@odata.Type`\n- Alternative annotation `@Common.ContentDisposition.Filename`\n\n## Version 1.4.36 - 2020-06-24\n\n### Fixed\n\n- Fix escaping of quote for function parameters\n- SAP Fiori Elements V2 sample app\n\n## Version 1.4.35 - 2020-06-23\n\n### Fixed\n\n- Fix reserved uri characters (follow-up)\n\n## Version 1.4.34 - 2020-06-17\n\n### Fixed\n\n- Fix entity key with (encoded) reserved uri characters\n\n## Version 1.4.33 - 2020-05-29\n\n### Fixed\n\n- Service Document in XML format (default)\n- Update dependencies\n- Disable network log per default\n\n## Version 1.4.32 - 2020-05-27\n\n### Fixed\n\n- Update dependencies\n- Update README on localization\n- Toggle switch for network logging\n- Allow HANA `SYSUUID` as UUID\n\n## Version 1.4.31 - 2020-05-25\n\n### Fixed\n\n- Align model resolving\n- Fix data types conversion for numbers\n- Fix data types recognition in functions\n- Support response compression\n- Prevent unnecessary data serialization for tracing\n- Performance optimization for entity key/uri calculation\n- General performance optimizations\n- Update dependencies\n\n## Version 1.4.30 - 2020-05-01\n\n### Fixed\n\n- Make function call with request body more robust\n- Fallback severity for detail messages to error\n- Keep request body for action call\n- Update README on CF deployment\n\n## Version 1.4.29 - 2020-04-28\n\n### Fixed\n\n- Fix analytics default value for all OData types\n- Fix long running data type conversion for filter elements\n\n## Version 1.4.28 - 2020-04-27\n\n### Fixed\n\n- Fix `$filter` in analytics query\n- Fix count for empty analytics result\n- Fix result projection for analytics query\n- Fix analytics `null` result values\n- Only add root error, if no details messages\n\n## Version 1.4.27 - 2020-04-21\n\n### Fixed\n\n- Add root error as first detail message\n- Error code including `transition` marks transition message\n\n## Version 1.4.26 - 2020-04-20\n\n### Fixed\n\n- Fix `$filter` for navigation elements\n- Fix OData annotations conversion for Java backends\n- Add request authorization parsing for logging\n\n## Version 1.4.25 - 2020-04-08\n\n### Fixed\n\n- Add additional messages as details\n\n## Version 1.4.24 - 2020-04-07\n\n### Fixed\n\n- Fix for metadata transfer-encoding chunked\n- Filter `@` attributes\n\n## Version 1.4.23 - 2020-04-01\n\n### Fixed\n\n- Fix type conversion for `le` operator\n\n## Version 1.4.22 - 2020-03-27\n\n### Fixed\n\n- Fix entity uri path behind app router\n- Update dependencies\n\n## Version 1.4.21 - 2020-03-02\n\n### Fixed\n\n- Improve `$metadata` logging\n- Fix `$metadata` call headers\n\n## Version 1.4.20 - 2020-02-27\n\n### Fixed\n\n- Fix CDS backwards compatibility\n\n## Version 1.4.19 - 2020-02-25\n\n### Fixed\n\n- Fix ETag Support (Concurrency Control)\n- Support streaming from URL media\n- Adding custom path rewrite\n- Custom `server.js` support\n- Fix for rendering aggregation of integers\n- Fix time duration parsing\n- Misc fixes and improvements\n- General housekeeping\n- Moving from `axios` to `node-fetch`\n\n## Version 1.4.18 - 2020-02-03\n\n### Fixed\n\n- Improve `$value` handling for streaming\n- Fix stream filename retrieval\n- Optimize edmx localization\n- Improve logging and tracing handling\n- Fix for external services (e.g. Java backend) support\n- Re-add `services` configuration for external service mapping\n- Fix for search phrase\n\n## Version 1.4.17 - 2020-01-20\n\n### Fixed\n\n- Support for virtual hosts (e.g. Cloud Connector)\n- Fix decode URI for path name\n- Fix IEEE754 compatibility for single requests\n- Add IEEE754 compatibility option switch\n\n## Version 1.4.16 - 2020-01-14\n\n### Fixed\n\n- Enforce IEEE754 compatibility\n- Pin `axios` library\n\n## Version 1.4.15 - 2019-12-20\n\n### Fixed\n\n- Fix authentication prompt for `$metadata`\n- Improve trace handling\n\n## Version 1.4.14 - 2019-12-19\n\n### Fixed\n\n- Protect `$metadata` call\n- Fix `$filter` parentheses nesting\n- Fix `all` model loading from app, srv\n- Improve `$filter` handling, incl. data type and negative tests\n\n## Version 1.4.13 - 2019-12-12\n\n### Fixed\n\n- Remove `services` configuration, as it is obsolete\n- Fix nested functions in `$filter`\n\n## Version 1.4.12 - 2019-12-06\n\n### Fixed\n\n- Fix service and CSN model detection\n\n## Version 1.4.9 - 2019-12-05\n\n### Fixed\n\n- Allow CSN JSON object as model option\n- Raise error, if service not found based on path\n- Fix service paths with hyphen\n- Fix `cds.Date`, `cds.Time` data type mappings\n\n## Version 1.4.8 - 2019-11-14\n\n### Fixed\n\n- Increased body size limit\n- Fix engine config, to allow Node >= 8\n- Map `cds.DateTime` and `cds.Timestamp` to `Edm.DateTimeOffset`\n\n## Version 1.4.6 - 2019-11-07\n\n### Fixed\n\n- Update on README documentation\n- Minor fixes\n\n## Version 1.4.5 - 2019-10-25\n\n### Fixed\n\n- `__count` is now of type String\n- Aggregation values are converted according to dynamic type\n- Search support\n- Fix for converting warning messages\n\n## Version 1.4.4 - 2019-10-07\n\n### Fixed\n\n- Filter data type conversions\n\n## Version 1.4.3 - 2019-10-01\n\n### Fixed\n\n- Check CDS multitenancy/extensibility (mtx)\n- Allow options that are falsy for Javascript\n\n## Version 1.4.2 - 2019-09-24\n\n### Fixed\n\n- Looser declaration or peer dependency to be compatible with snapshots\n\n## Version 1.4.1 - 2019-09-11\n\n### Fixed\n\n- Fixed compatibility to CDS 3.17.0\n- Propagate `x-request-id`, `x-correlationid`\n\n## Version 1.4.0 - 2019-09-09\n\n### Fixed\n\n- Raise error message for not supported aggregation function (e.g. `#FORMULA`)\n- Fixed entity key calculation for key associations\n- Fixed DateTime representation in entity key structure\n\n## Version 1.3.0 - 2019-08-30\n\n### Fixed\n\n- Passing through responses in XML (just for errors)\n- Data-type mapping on aggregation values works for non-strings\n\n## Version 1.2.0 - 2019-08-08\n\n### Added\n\n- External Release\n\n## Version 1.0.0 - 2019-05-21\n\n### Added\n\n- Internal Release\n"},{"name":"@cap-js-community/event-queue","version":"1.4.7","description":"An event queue that enables secure transactional processing of asynchronous and periodic events, featuring instant event processing with Redis Pub/Sub and load distribution across all application instances.","main":"src/index.js","types":"src/index.d.ts","files":["src","db","cds-plugin.js","index.cds"],"keywords":["CAP","CDS","messaging","async","redis","load-balancing","eventing","multi-tenancy"],"scripts":{"test:unit":"jest --testPathIgnorePatterns=\"/test-integration/\"","test:integration":"jest --testPathIgnorePatterns=\"/test/\" --runInBand --forceExit","test":"npm run test:unit && npm run test:integration","test:all:coverage":"jest --runInBand --forceExit --collect-coverage","test:prepare":"npm run build:ci --prefix=./test-integration/_env","test:deploySchema":"node test-integration/_env/srv/hana/deploy.js","test:cleanSchemas":"node test-integration/_env/srv/hana/cleanObsoletSchemas.js","lint":"npm run eslint && npm run prettier","lint:ci":"npm run eslint:ci && npm run prettier:ci","eslint":"eslint --fix .","eslint:ci":"eslint .","prettier":"prettier --write --loglevel error .","prettier:ci":"prettier --check .","prepareRelease":"npm prune --production","docs":"cd docs && bundle exec jekyll serve","docs:install":"cd docs && npx shx rm -rf vendor Gemfile.lock && bundle install","upgrade-lock":"npx shx rm -rf package-lock.json node_modules && npm i --package-lock"},"engines":{"node":">=18"},"dependencies":{"@sap/xssec":"^3.6.1","redis":"^4.6.14","verror":"^1.10.1","yaml":"^2.4.2"},"devDependencies":{"@cap-js/hana":"^0.4.0","@cap-js/sqlite":"^1.7.1","@sap/cds":"^7.9.2","@sap/cds-dk":"^7.8.0","eslint":"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-node":"^11.1.0","express":"^4.18.2","hdb":"^0.19.7","jest":"^29.7.0","prettier":"^2.8.8","sqlite3":"^5.1.7"},"homepage":"https://cap-js-community.github.io/event-queue/","repository":{"type":"git","url":"https://github.com/cap-js-community/event-queue.git"},"cds":{"eventQueue":{"[production]":{"disableRedis":false},"[test]":{"registerAsEventProcessor":false,"isRunnerDeactivated":true,"updatePeriodicEvents":false}},"requires":{"event-queue":{"model":"@cap-js-community/event-queue"}}},"author":"Maximilian Gruenfelder <maximilian.gruenfelder@sap.com>","license":"Apache-2.0","type":"plugin","tags":["lib"],"gitHubOwner":"cap-js-community","gitHubRepo":"event-queue","licenseSource":"apache-2.0","forks":2,"stars":10,"addedToBoUI5":"2023-11-16T11:37:57.868Z","createdAt":"2023-07-05T08:49:49.581Z","updatedAt":"2024-05-29T09:47:21.469Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js-community/event-queue/tree/main/","readme":"# @cap-js-community/event-queue\n\n[![npm version](https://img.shields.io/npm/v/@cap-js-community/event-queue)](https://www.npmjs.com/package/@cap-js-community/event-queue)\n[![monthly downloads](https://img.shields.io/npm/dm/@cap-js-community/event-queue)](https://www.npmjs.com/package/@cap-js-community/event-queue)\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js-community/event-queue)](https://api.reuse.software/info/github.com/cap-js-community/event-queue)\n[![CI Main](https://github.com/cap-js-community/event-queue/actions/workflows/main-ci.yml/badge.svg)](https://github.com/cap-js-community/event-queue/commits/main)\n\nThe Event-Queue is a framework built on top of CAP Node.js, designed specifically for efficient and\nstreamlined asynchronous event processing. With a focus on load balancing, this package ensures optimal\nevent distribution across all available application instances. By providing managed transactions similar to CAP\nhandlers, the Event-Queue framework simplifies event processing, enhancing the overall performance of your application.\n\nAdditionally, Event-Queue provides support for [periodic events](https://cap-js-community.github.io/event-queue/configure-event/#periodic-events),\nallowing for processing at defined intervals. This feature further extends its capabilities in load balancing and\ntransaction management, ensuring that even regularly occurring tasks are handled efficiently and effectively without\noverloading any single instance. This makes it an ideal solution for applications needing consistent, reliable event processing.\n\n## Getting Started\n\nDive right in and check out the getting started [documentation](https://cap-js-community.github.io/event-queue/setup).\n\n## Features\n\nLearn more about features in the [documentation](https://cap-js-community.github.io/event-queue/#functionality-and-problem-solutions). To compare the\nevent-queue with other SAP products head over to [Distinction from other solutions](https://cap-js-community.github.io/event-queue/diff-to-outbox/).\n\n- [load balancing](https://cap-js-community.github.io/event-queue/load-balancing) and concurrency control of event processing across app instances\n- [periodic events](https://cap-js-community.github.io/event-queue/configure-event/#periodic-events) similar to running cron jobs for business processes\n- [managed transactions](https://cap-js-community.github.io/event-queue/transaction-handling) for event processing\n- async processing of processing intensive tasks for better UI responsiveness\n- push/pull mechanism for reducing delay between publish an event and processing\n- cluster published events during processing (e.g. for combining multiple E-Mail events to one E-Mail)\n- [plug and play](https://cap-js-community.github.io/event-queue/setup) via cds-plugin\n\n## Documentation\n\nHead over to our [Documentation](https://cap-js-community.github.io/event-queue/) to learn more.\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc.\nvia [GitHub issues](https://github.com/cap-js-communityevent-queue/issues). Contribution and feedback are encouraged\nand always welcome. For more information about how to contribute, the project structure, as well as additional\ncontribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for\neveryone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all\ntimes.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and `@cap-js-community/event-queue` contributors. Please see\nour [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and\ntheir licensing/copyright information is\navailable [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js-community/<your-project>).\n","downloadsCurrentMonth":293,"downloadsCurrentFortnight":120,"downloads365":20830,"downloadsFortnightGrowth":-30.64,"downloadsHistory":[{"yearMonth":"2023-07","downloads":279},{"yearMonth":"2023-08","downloads":1576},{"yearMonth":"2023-09","downloads":4592},{"yearMonth":"2023-10","downloads":4820},{"yearMonth":"2023-11","downloads":5104},{"yearMonth":"2023-12","downloads":1889},{"yearMonth":"2024-01","downloads":711},{"yearMonth":"2024-02","downloads":652},{"yearMonth":"2024-03","downloads":549},{"yearMonth":"2024-04","downloads":364},{"yearMonth":"2024-05","downloads":294}],"npmlink":"https://www.npmjs.com/package/@cap-js-community/event-queue","versions":[{"version":"created","date":"2023-07-05T08:49:49.581Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/created","changelog":"","sourceType":"plugin"},{"version":"0.1.49","date":"2023-07-05T08:49:49.780Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.49","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-05-29T09:47:21.469Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.1.50","date":"2023-07-15T10:53:46.467Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.50","changelog":"","sourceType":"plugin"},{"version":"0.1.51","date":"2023-07-27T14:06:08.368Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.51","changelog":"","sourceType":"plugin"},{"version":"0.1.52","date":"2023-07-31T12:50:17.703Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.52","changelog":"","sourceType":"plugin"},{"version":"0.1.53","date":"2023-08-07T16:04:26.441Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.53","changelog":"","sourceType":"plugin"},{"version":"0.1.54","date":"2023-08-16T07:57:16.801Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.54","changelog":"","sourceType":"plugin"},{"version":"0.1.55","date":"2023-08-17T09:28:21.407Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.55","changelog":"","sourceType":"plugin"},{"version":"0.1.56","date":"2023-08-31T06:55:16.722Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.56","changelog":"","sourceType":"plugin"},{"version":"0.1.57","date":"2023-09-26T06:30:41.698Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.57","changelog":"","sourceType":"plugin"},{"version":"0.1.58","date":"2023-11-03T07:27:39.226Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.1.58","changelog":"","sourceType":"plugin"},{"version":"0.2.0","date":"2023-11-09T16:40:34.721Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.2.0","changelog":"","sourceType":"plugin"},{"version":"0.2.1","date":"2023-11-13T14:34:36.201Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.2.1","changelog":"","sourceType":"plugin"},{"version":"0.2.2","date":"2023-11-14T14:11:16.023Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.2.2","changelog":"","sourceType":"plugin"},{"version":"0.2.3","date":"2023-11-15T13:10:34.056Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.2.3","changelog":"","sourceType":"plugin"},{"version":"0.2.4","date":"2023-11-16T14:45:43.949Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.2.4","changelog":"","sourceType":"plugin"},{"version":"0.2.5","date":"2023-11-27T12:41:53.303Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.2.5","changelog":"","sourceType":"plugin"},{"version":"0.3.0","date":"2023-11-30T09:07:03.664Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/0.3.0","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2023-12-20T10:19:38.936Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.0.0","changelog":"","sourceType":"plugin"},{"version":"1.0.1","date":"2024-01-04T09:18:45.338Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.0.1","changelog":"","sourceType":"plugin"},{"version":"1.0.2","date":"2024-01-05T15:25:34.647Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.0.2","changelog":"","sourceType":"plugin"},{"version":"1.0.3","date":"2024-01-08T13:08:52.820Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.0.3","changelog":"","sourceType":"plugin"},{"version":"1.1.0","date":"2024-01-22T17:29:09.587Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.1.0","changelog":"","sourceType":"plugin"},{"version":"1.2.0","date":"2024-01-26T17:50:14.227Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.0","changelog":"","sourceType":"plugin"},{"version":"1.2.1","date":"2024-01-30T19:39:52.168Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.1","changelog":"","sourceType":"plugin"},{"version":"1.2.2","date":"2024-02-05T19:43:16.069Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.2","changelog":"","sourceType":"plugin"},{"version":"1.2.3","date":"2024-02-07T07:25:08.646Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.3","changelog":"","sourceType":"plugin"},{"version":"1.2.4","date":"2024-02-07T08:25:06.014Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.4","changelog":"","sourceType":"plugin"},{"version":"1.2.5","date":"2024-02-13T07:57:40.481Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.5","changelog":"","sourceType":"plugin"},{"version":"1.2.6","date":"2024-02-15T06:56:39.893Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.2.6","changelog":"","sourceType":"plugin"},{"version":"1.3.0","date":"2024-02-21T10:37:19.139Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.0","changelog":"","sourceType":"plugin"},{"version":"1.3.1","date":"2024-02-23T16:23:33.254Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.1","changelog":"","sourceType":"plugin"},{"version":"1.3.2","date":"2024-03-01T19:01:29.484Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.2","changelog":"","sourceType":"plugin"},{"version":"1.3.3","date":"2024-03-06T12:01:07.992Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.3","changelog":"","sourceType":"plugin"},{"version":"1.3.4","date":"2024-03-08T15:02:10.859Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.4","changelog":"","sourceType":"plugin"},{"version":"1.3.5","date":"2024-03-12T10:03:48.416Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.5","changelog":"","sourceType":"plugin"},{"version":"1.3.6","date":"2024-03-14T11:52:11.761Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.3.6","changelog":"","sourceType":"plugin"},{"version":"1.4.0","date":"2024-03-19T10:52:07.550Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.0","changelog":"","sourceType":"plugin"},{"version":"1.4.1","date":"2024-03-27T10:41:10.426Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.1","changelog":"","sourceType":"plugin"},{"version":"1.4.2","date":"2024-04-04T14:26:44.414Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.2","changelog":"","sourceType":"plugin"},{"version":"1.4.3","date":"2024-04-17T17:28:31.937Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.3","changelog":"","sourceType":"plugin"},{"version":"1.4.4","date":"2024-04-22T11:30:16.456Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.4","changelog":"","sourceType":"plugin"},{"version":"1.4.5","date":"2024-05-03T09:58:10.293Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.5","changelog":"","sourceType":"plugin"},{"version":"1.4.6","date":"2024-05-29T09:47:21.250Z","link":"https://www.npmjs.com/package/@cap-js-community/event-queue/v/1.4.6","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).\n\n## v1.4.6 - 2024-06-XX\n\n### Added\n\n- use less db connections with new locking mechanism\n\n## v1.4.6 - 2024-05-28\n\n### Added\n\n- federate unsubscribe events via redis to all application instances and allow to register custom handler for unsubscribe events\n- types for event-queue config\n\n### Fixed\n\n- upgrade dependencies\n\n## v1.4.5 - 2024-04-24\n\n### Fixed\n\n- add xssec authInfo to CDS user also for CAP outbox\n\n## v1.4.4 - 2024-04-22\n\n### Fixed\n\n- `insertEventsBeforeCommit` did not commit all events in certain scenarios.\n\n## v1.4.3 - 2024-04-17\n\n### Added\n\n- typescript types for the most common functions\n- add subdomain for logging of broadcasting events via redis\n\n### Changed\n\n- the getter of eventType cuts the periodic event suffix and returns the exact name of the event definition\n\n## v1.4.2 - 2024-04-04\n\n### Added\n\n- [cds-outboxed] Add eventQueue processor, key, queueEntries, and payload to req (can be accessed via req.context.\\_eventQueue)\n- Add option `insertEventsBeforeCommit` to improve performance for `publishEvent`.\n- Add cds shutdown handler to clear existing redis locks before shutdown of the instance.\n\n### Fixed\n\n- [cds-outboxed] Call cds.connect.to for open outboxed events\n\n## v1.4.1 - 2024-03-27\n\n### Changed\n\n- Removed authInfo from context.http.req and moved to a full-fledged xssec/xsuaa authInfo attached to context.user.authInfo\n- [cds-plugin] return promise for init for cds to wait until plugin is fully initialized\n\n## v1.4.0 - 2024-03-21\n\n### Added\n\n- add to supply custom redis options for create client.\n\n### Changed\n\n- Reworked periodic processing of all events to be more efficient and to reduce the load on the database and use less database connections.\n- Removed support for custom tables. The event-queue now uses always the provided tables.\n\n## v1.3.6 - 2024-03-14\n\n### Fixed\n\n- Redis reconnects\n\n## v1.3.5 - 2024-03-12\n\n### Fixed\n\n- In instances of overlapping intervals, periodic events may fall behind schedule.\n\n## v1.3.4 - 2024-03-08\n\n### Added\n\n- Trigger processing again if time is exceeded for event processing.\n\n### Changed\n\n- removed CF check to enable redis to allow using redis even if process.env.USER is not vcap.\n\n## v1.3.3 - 2024-03-06\n\n### Changed\n\n- Default for runInterval changed from 5 minutes to 25 minutes. This is to reduce the load on the database.\n- The load of the internal periodic event DELETE_EVENTS is increased to 20 to only process 5 tenants in parallel. This is to reduce the load on the database.\n- The max processing time for the event-queue is set to the runInterval.\n\n## v1.3.2 - 2024-03-01\n\n### Added\n\n- option for delayed events for cds outboxed services: [documentation](https://cap-js-community.github.io/event-queue/use-as-cap-outbox/#how-to-delay-outboxed-service-calls)\n\n### Fixed\n\n- Delay registration of processors until the database connection is established.\n\n## v1.3.1 - 2024-02-21\n\n### Fixed\n\n- Log message for blocked events\n\n### Changed\n\n- Reduce log severity for skip publish redis event as no lock is available to debug\n- Only do etag checks after a processing time of 10 minutes to improve performance\n\n## v1.3.0 - 2024-02-21\n\n### Added\n\n- add option to block ad-hoc events. More information in [documentation](https://cap-js-community.github.io/event-queue/configure-event/##blocking-events).\n- Define priorities for event types. More information in [documentation](https://cap-js-community.github.io/event-queue/configure-event/#priority-of-events).\n\n### Fixed\n\n- In more cases the global cds.context was not set correctly because the async-chain could break in high load scenarios.\n\n## v1.2.6 - 2024-02-15\n\n### Fixed\n\n- In some cases the global cds.context was not set correctly because the async-chain could break in high load scenarios.\n\n## v1.2.5 - 2024-02-13\n\n### Added\n\n- The `cleanupLocksAndEventsForDev` parameter allows for the cleanup of all locks and events in progress during server\n  start. This option is intended for development purposes.\n\n### Fixed\n\n- Allow to initialize event-queue without config.yml in case of usage as CAP outbox\n\n### Changed\n\n- The parameter `runInterval` is checked during init. Only values greater than 10 seconds are allowed.\n\n## v1.2.4 - 2024-02-07\n\n### Changed\n\n- Optimize promise handling\n\n## v1.2.3 - 2024-02-07\n\n### Changed\n\n- update redis to 4.6.13\n\n## v1.2.2 - 2024-02-05\n\n### Added\n\n- improved logging\n- better tenant subdomain caching\n\n## v1.2.1 - 2024-01-30\n\n### Fixed\n\n- fix registration of db-handler\n\n## v1.2.0 - 2024-01-26\n\n### Added\n\n- option to set user for all created cds contexts and with that the user for updating the managed database fields.\n\n### Changed\n\n- rework initialization via cds-plugin.\n\n## v1.1.0 - 2024-01-22\n\n### Added\n\n- enable event-queue to work as CAP outbox. The flag `useAsCAPOutbox` replaces the CAP implementation by\n  the event-queue.\n\n## v1.0.3 - 2024-01-08\n\n### Fixed\n\n- update tenant hash for newly onboarded tenants\n- consider running periodic events during update of periodic events\n\n## v1.0.2 - 2024-01-05\n\n### Added\n\n- filter out not invalid tenant ids during processing\n\n## v1.0.1 - 2024-01-04\n\n### Added\n\n- introduced `thresholdLoggingEventProcessing` config variable to adjust logging threshold for event\n  processing [documentation](https://cap-js-community.github.io/event-queue/setup/#initialization-parameters)\n\n## v1.0.0 - 2023-12-20\n\n### Added\n\n- block the run of periodic events via\n  config [documentation](https://cap-js-community.github.io/event-queue/configure-event/#blocking-periodic-events)\n- Add a label to the workerQueue. This will help in understanding which events were throttled in case of throttling.\n- The `isEventQueueActive` configuration can now be used to deactivate the runtime processing of all events.\n- with the function `getLastSuccessfulRunTimestamp` the timestamp of the last successful run for a periodic event can be\n  requested. [documentation](https://cap-js-community.github.io/event-queue/implement-event/#using-the-timestamp-of-the-last-successful-run-for-the-next-run)\n- Added a performance tracer for periodic events. This will log any processing that takes longer than 50ms.\n- Added type and subtype to all performance traces.\n\n### Fixed\n\n- Catch exception during Redis channel subscription\n- Endless running if event status open is returned and checkForNextChunk is activated\n\n### Changed\n\n- Refactored the deletion process for completed events. The default setting for deleting processed events has now been\n  updated to a 7-day timeframe.\n  [documentation](https://cap-js-community.github.io/event-queue/configure-event/#delete-processed-events)\n- the configuration variable `isRunnerDeactivated` is renamed to `isEventQueueActive`.\n- Reduced the log severity to debug for \"Selected event queue entries for processing\" during periodic events.\n\n## v0.3.0 - 2023-11-30\n\n### Changed\n\n- Removed the `instanceLoadLimit` parameter. The limit is now statically set to 100. The event load should henceforth be\n  specified as a percentage.\n- Upgrade docs dependencies\n- Adjusted workerQueue logging thresholds for waiting time\n\n### Fixed\n\n- fix transaction handling for periodic events\n- set cds.context correctly for periodic runner\n\n## v0.2.5 - 2023-11-16\n\n### Added\n\n- logger get setter for better providing own logger\n\n### Changed\n\n- new documentation\n- improve logging\n\n### Fixed\n\n- small bug fixes and improvements for periodic events\n\n## v0.2.4 - 2023-11-16\n\n### Added\n\n- further improve periodic events\n\n### Changed\n\n- rework of load management and concurrency control\n\n## v0.2.3 - 2023-11-15\n\n### Fixed\n\n- fixes and improvements for periodic events\n\n## v0.2.2 - 2023-11-14\n\n### Added\n\n- periodic events - use event-queue to process periodic jobs\n\n## v0.2.1 - 2023-11-13\n\n### Added\n\n- cds shutdown - close redis clients\n- add redis cluster support\n\n## v0.2.0 - 2023-11-09\n\n### Added\n\n- implementation of delayed events, which allows to publish events that should be processed at a later point in time\n- option to disable redis + refactoring of config\n- improved HANA integration test setup\n\n## v0.1.58 - 2023-11-03\n\n### Changed\n\n- update dependencies\n- remove uuid dependency\n\n## v0.1.56 - 2023-08-31\n\n### Added\n\n- example project\n\n### Fixed\n\n- small bug fixes for local mode\n\n### Changed\n\n- better documentation\n\n## v0.1.55 - 2023-08-17\n\n### Fixed\n\n- fix redis connect client\n\n## v0.1.54 - 2023-08-16\n\n### Added\n\n- allow to distribute config via redis to instances\n\n### Fixed\n\n- move loggers from top-level to functions because cds 7 has different require orders. This the event-queue to use the\n  custom project loggers\n\n## v0.1.53 - 2023-08-07\n\n### Added\n\n- more resilient for small clock shifts in setInterval\n\n## v0.1.52 - 2023-07-31\n\n### Fixed\n\n- fix missing catch for isOutdatedAndKeepalive\n\n## v0.1.51 - 2023-07-27\n\n### Added\n\n- Delete event entries after defined number of days\n- improve exceeded event handling\n\n### Fixed\n\n- fix model loading for cds-plugin\n- fix setInterval clock drift\n\n## v0.1.50 - 2023-07-13\n\n### Added\n\n- new transaction modes\n- register rollback of transaction in combination with returning successful event processing status\n\n## v0.1.49 - 2023-07-05\n\n### Added\n\n- first npm release after internal development\n"},{"name":"@cap-js-community/websocket","version":"1.0.1","description":"WebSocket adapter for CDS","homepage":"https://cap.cloud.sap/","engines":{"node":">=18"},"author":"Oliver Klemenz <oklemenz@gmail.com>","keywords":["CAP","CDS","WS","WebSocket","Socket.IO"],"files":["src","cds-plugin.js","CHANGELOG.md"],"main":"src/index.js","types":"src/index.d.ts","scripts":{"run":"cd ./test/_env && cds-serve","start":"npm start --prefix=./test/_env","start:socketio":"npm run start:socketio --prefix=./test/_env","start:uaa":"npm run start:uaa --prefix=./test/_env","start:socketio:uaa":"npm run start:socketio:uaa --prefix=./test/_env","start:approuter":"PORT=5001 npm start --prefix=./test/_env/approuter","test":"jest","test:update":"npm test -- -u","lint":"npm run eslint && npm run prettier","lint:ci":"npm run eslint:ci && npm run prettier:ci","eslint":"eslint --fix .","eslint:ci":"eslint .","prettier":"prettier \"**/*.{js,json,md,yml,yaml}\" --write --log-level error","prettier:ci":"prettier \"**/*.{js,json,md,yml,yaml}\" --check","upgrade-lock":"rm -rf package-lock.json node_modules && npm i --package-lock=true","prepareRelease":"npm prune --production","audit":"npm audit --only=prod"},"dependencies":{"@sap/xsenv":"^5.1.0","cookie":"^0.6.0","express":"^4.19.2","redis":"^4.6.14","socket.io":"^4.7.5","ws":"^8.17.0"},"devDependencies":{"@cap-js-community/websocket":"./","@cap-js/sqlite":"^1.7.1","@eslint/js":"9.2.0","@sap/cds":"^7.9.1","@sap/cds-dk":"^7.9.2","@sap/xssec":"4.0.0","@socket.io/redis-adapter":"^8.3.0","@socket.io/redis-streams-adapter":"^0.2.2","@types/express":"^4.17.21","eslint":"^9.2.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^28.5.0","eslint-plugin-n":"17.7.0","express-request-proxy":"^2.2.2","globals":"15.2.0","jest":"^29.7.0","passport":"0.7.0","prettier":"^3.2.5","socket.io-client":"^4.7.5"},"license":"Apache-2.0","repository":{"type":"git","url":"https://github.com/cap-js-community/websocket.git"},"cds":{"schema":{"cds":{"websocket":{"oneOf":[{"type":"object","properties":{"kind":{"type":"string","description":"Websocket implementation kind","enum":["ws","socket.io"],"default":"ws"},"impl":{"type":"string","description":"Websocket implementation path"},"options":{"type":"object","description":"Websocket implementation configuration options","additionalProperties":true},"adapter":{"type":"object","description":"Websocket adapter configuration options","properties":{"impl":{"type":"string","description":"Websocket adapter implementation","enum":["redis","@socket.io/redis-adapter","@socket.io/redis-streams-adapter"]},"options":{"type":"object","description":"Websocket adapter implementation options","additionalProperties":true},"config":{"type":"object","description":"Websocket adapter implementation configurations (i.e. Redis client options)","additionalProperties":true},"active":{"type":"boolean","description":"Enable websocket adapter","default":true},"local":{"type":"boolean","description":"Enable websocket adapter in local environment","default":false}}}}},{"type":"boolean","description":"Set to false to disable websockets"}]}}},"weboscket":{"kind":"ws"}},"type":"plugin","tags":["websocket"],"gitHubOwner":"cap-js-community","gitHubRepo":"websocket","licenseSource":"apache-2.0","forks":0,"stars":5,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2023-12-21T12:55:26.075Z","updatedAt":"2024-05-03T05:46:33.565Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/cap-js-community/websocket/tree/main/","readme":"# @cap-js-community/websocket\n\n[![npm version](https://img.shields.io/npm/v/@cap-js-community/websocket)](https://www.npmjs.com/package/@cap-js-community/websocket)\n[![monthly downloads](https://img.shields.io/npm/dm/@cap-js-community/websocket)](https://www.npmjs.com/package/@cap-js-community/websocket)\n[![REUSE status](https://api.reuse.software/badge/github.com/cap-js-community/websocket)](https://api.reuse.software/info/github.com/cap-js-community/websocket)\n[![Main CI](https://github.com/cap-js-community/websocket/actions/workflows/main-ci.yml/badge.svg)](https://github.com/cap-js-community/websocket/commits/main)\n\n### [WebSocket adapter for CDS](https://www.npmjs.com/package/@cap-js-community/websocket)\n\n> Exposes a WebSocket protocol via WebSocket standard or Socket.IO for CDS services.\n> Runs in context of the [SAP Cloud Application Programming Model (CAP)](https://cap.cloud.sap/docs/)\n> using [@sap/cds](https://www.npmjs.com/package/@sap/cds) (CDS Node.js).\n\n## Getting Started\n\n- Run `npm add @cap-js-community/websocket` in `@sap/cds` project\n- Annotate a service, that shall be exposed via WebSocket using one of the following annotations:\n  ```cds\n  @ws\n  @websocket\n  @protocol: 'ws'\n  @protocol: 'websocket'\n  @protocol: [{ kind: 'websocket', path: 'chat' }]\n  @protocol: [{ kind: 'ws', path: 'chat' }]\n  ```\n- Execute `cds-serve` to start server\n- Access the service endpoint via WebSocket\n\n## Usage\n\n### Server\n\n- Run `npm add @cap-js-community/websocket` in `@sap/cds` project\n- Create a service to be exposed as websocket protocol: **srv/chat-service.cds**\n  ```cds\n  @protocol: 'websocket'\n  service ChatService {\n    function message(text: String) returns String;\n    event received {\n      text: String;\n    }\n  }\n  ```\n- Implement CDS websocket service: **srv/chat-service.js**\n  ```js\n  module.exports = (srv) => {\n    srv.on(\"message\", async (req) => {\n      await srv.emit(\"received\", req.data);\n      return req.data.text;\n    });\n  };\n  ```\n\n### Client\n\nIn browser environment implement the websocket client: **index.html**\n\n#### WebSocket Standard\n\n- Connect with WebSocket\n  ```js\n  const protocol = window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\";\n  const socket = new WebSocket(protocol + window.location.host + \"/ws/chat\");\n  ```\n- Emit event\n  ```js\n  socket.send(\n    JSON.stringify({\n      event: \"message\",\n      data: { text: input.value },\n    }),\n  );\n  ```\n- Listen to event\n  ```js\n  socket.addEventListener(\"message\", (message) => {\n    const payload = JSON.parse(message.data);\n    switch (payload.event) {\n      case \"received\":\n        console.log(payload.data.text);\n        break;\n    }\n  });\n  ```\n\n#### Socket.IO (`kind: socket.io`)\n\n- Connect with Socket.IO client\n  ```js\n  const socket = io(\"/chat\", { path: \"/ws\" });\n  ```\n- Emit event\n  ```js\n  socket.emit(\"message\", { text: \"Hello World\" });\n  ```\n- Listen to event\n  ```js\n  socket.on(\"received\", (message) => {\n    console.log(message.text);\n  });\n  ```\n\n## Documentation\n\n### Architecture Overview\n\n![WebSocket Overview](./docs/assets/overview.png)\n\nThe CDS Websocket module supports the following use-cases:\n\n- Connect multiple websocket clients (browser and non-browser) to CAP server websockets\n- Process websockets messages as CDS entity CRUD, action and function calls\n- Broadcast CDS events across local server websockets and multi-instance server websockets (via Redis)\n- Broadcast CDS events across multiple CAP server applications and application instances (via Redis)\n- Tenant-ware emit/broadcast CDS events from server websockets to websocket clients (browser and non-browser)\n- Emit/Broadcast CDS events to a subset of websocket clients leveraging event contexts\n\n### WebSocket Server\n\nThe CDS websocket server is exposed on `cds` object implementation-independent at `cds.ws` and implementation-specific at\n`cds.wss` for WebSocket Standard or `cds.io` for Socket.IO. Additional listeners can be registered bypassing CDS definitions and runtime.\nWebSocket server options can be provided via `cds.websocket.options`.\n\nDefault protocol path is `/ws` and can be overwritten via `cds.env.protocols.websocket.path` resp. `cds.env.protocols.ws.path`;\n\n### WebSocket Implementation\n\nThe CDS websocket server supports the following two websocket implementations:\n\n- [WebSocket Standard](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API) (via Node.js [ws](https://www.npmjs.com/package/ws) package): `cds.websocket.kind: \"ws\"` **(default)**\n- [Socket.IO](https://socket.io): `cds.websocket.kind: \"socket.io\"`\n- Custom Server: A custom websocket server implementation can be provided via `cds.websocket.impl`\n\nThe server implementation abstracts from the concrete websocket implementation. The websocket client still needs to be implemented websocket implementation specific.\n\n#### WebSocket Service\n\nAnnotated services with websocket protocol are exposed at endpoint: `/ws/<service-path>`:\n\nWebsocket client connection happens as follows for exposed endpoints:\n\n- **WS**: `const socket = new WebSocket(\"ws://localhost:4004/ws/chat\");`\n- **Socket.IO**: `const socket = io(\"/chat\", { path: \"/ws\" })`\n\n#### WebSocket Event\n\nWebsocket services can contain events that are exposed as websocket events. Emitting an event on the service,\nbroadcasts the event to all websocket clients.\n\n```cds\n  @protocol: 'ws'\n  @path: 'chat'\n  service ChatService {\n    event received {\n      text: String;\n    }\n  }\n```\n\nIn addition, also non-websocket services can contain events that are exposed as websocket events:\n\n```cds\n  @protocol: 'odata'\n  @path: 'chat'\n  service ChatService {\n    entity Chat as projection on chat.Chat;\n    function message(text: String) returns String;\n    @websocket\n    event received {\n      text: String;\n    }\n  }\n```\n\nAlthough the service is exposed as an OData protocol at `/odata/v4/chat`, the service events annotated with `@websocket` or\n`@ws` are exposed as websocket events under the websocket protocol path as follows: `/ws/chat`. Entities and operations\nare not exposed, as the service itself is not marked as websocket protocol.\n\n> Non-websocket service events are only active when at least one websocket enabled service is available (i.e. websocket protocol adapter is active).\n\n### Server Socket\n\nEach CDS handler request context is extended to hold the current server `socket` instance of the event.\nIt can be accessed via the service websocket facade via `req.context.ws.service` or `cds.context.ws.service`.\nIn addition the native websocket server socket can be accessed via `req.context.ws.socket` or `cds.context.ws.socket`.\nEvents can be directly emitted via the native `socket`, bypassing CDS runtime, if necessary.\n\n#### Service Facade\n\nThe service facade provides native access to websocket implementation independent of CDS context. It abstracts from the\nconcrete websocket implementation by exposing the following public interface:\n\n- `service: String`: Service name/path\n- `socket: Object`: Server socket\n- `context: Object`: Current CDS context object for the websocket server socket\n- `on(event: String, callback: Function)`: Register websocket event\n- `async emit(event, data)`: Emit websocket event with data\n- `async broadcast(event: String, data: Object, user: String?, contexts: String[]?)`: Broadcast websocket event (except to sender) by excluding an user (optional) or restricting to contexts (optional)\n- `async broadcastAll(event: String, data: Object, user: String?, contexts: String[]?)`: Broadcast websocket event (including to sender) by excluding an user (optional) or restricting to contexts (optional)\n- `async enter(context: String)`: Enter a context\n- `async exit(context: String)`: Exit a context\n- `async disconnect()`: Disconnect server socket\n- `onDisconnect(callback: Function)`: Register callback function called on disconnect of server socket\n\n### Middlewares\n\nFor each server websocket connection the standard CDS middlewares are applied. That means, that especially the correct CDS\ncontext is set up and the configured authorization strategy is applied.\n\n### Tenant Isolation\n\nWebSockets are processed tenant aware. Especially for broadcasting events tenant isolation is ensured, that only\nwebsocket clients connected for the same tenant are notified in tenant context. Tenant isolation is also ensured\nover remote distribution via Redis.\n\n### Authentication & Authorization\n\nAuthentication only works via AppRouter (e.g. using a UAA configuration), as the auth token is forwarded\nvia authorization header bearer token by AppRouter to backend instance. CDS middlewares process the auth token and\nset the auth info accordingly. Authorization scopes are checked as defined in the CDS services `@requires` annotations and\nauthorization restrictions are checked as defined in the CDS services `@restrict` annotations.\n\n### Transactional Safety\n\nIn most situations only websocket events shall be broadcast, in case the primary transaction succeeded.\nIt can be done manually, by emitting CDS event as part of the `req.on(\"succeeded\")` handler.\n\n```js\nreq.on(\"succeeded\", async () => {\n  await srv.emit(\"received\", req.data);\n});\n```\n\nAlternatively you can leverage the CAP in-memory outbox via `cds.outboxed` as follows:\n\n```js\nconst chatService = cds.outboxed(await cds.connect.to(\"ChatService\"));\nawait chatService.emit(\"received\", req.data);\n```\n\nThis has the benefit, that the event emitting is coupled to the success of the primary transaction.\nStill the asynchronous event processing could fail, and would not be retried anymore.\nThat's where the CDS persistent outbox comes into play.\n\n#### CDS Persistent Outbox\n\nWebsocket events can also be sent via the CDS persistent outbox. That means, the CDS events triggering the websocket broadcast\nare added to the CDS persistent outbox when the primary transaction succeeded. The events are processed asynchronously\nand transactional safe in a separate transaction. It is ensured, that the event is processed in any case, as outbox keeps the\noutbox entry open, until the event processing succeeded.\n\nThe transactional safety can be achieved using `cds.outboxed` with kind `persistent-outbox` as follows:\n\n```js\nconst chatService = cds.outboxed(await cds.connect.to(\"ChatService\"), {\n  kind: \"persistent-outbox\",\n});\nawait chatService.emit(\"received\", req.data);\n```\n\nIn that case, the websocket event is broadcast to websocket clients exactly once, when the primary transaction succeeds.\nIn case of execution errors, the event broadcast is retried automatically, while processing the persistent outbox.\n\n### Event User\n\nEvents are broadcast to all websocket clients, including clients established in context of current event context user.\nTo influence event broadcasting based on current context user, the annotation `@websocket.user` or `@ws.user` is available on\nevent type level and event type element level (alternatives include `@websocket.broadcast.user` or `@ws.broadcast.user`):\n\nValid annotation values are:\n\n- **Event type level**:\n  - `'excludeCurrent'`: Current event context user is statically excluded everytime during broadcasting to websocket clients.\n    All websocket clients established in context to that user are not respected during event broadcast.\n- **Event type element level**:\n  - `'excludeCurrent'`: Current event context user is dynamically excluded during broadcasting to websocket clients,\n    based on the value of the annotated event type element.\n    If truthy, all websocket clients established in context to that user are not respected during event broadcast.\n\n### Event Contexts\n\nIt is possible to broadcast events to a subset of clients. By entering or exiting contexts, the server can be instructed to\ndetermined based on the event type, to which subset of clients the event shall be emitted. To specify which data parts of the\nevent are leveraged for setting up the context, the annotation `@websocket.context` or `@ws.context` is available on\nevent type element level (alternatives include `@websocket.broadcast.context` or `@ws.broadcast.context`). For static contexts\nthe annotation can also be used on event type level, providing a static event context string.\n\n```cds\nevent received {\n  @websocket.context\n  ID: UUID;\n  text: String;\n}\n```\n\nThis sets up the event context based on the unique ID of the event type data.\n\nThe annotation can be used on multiple event type elements setting up different event contexts in parallel,\nif event shall be broadcast/emitted into multiple contexts at the same time.\n\n```cds\nevent received {\n  @websocket.context\n  ID: UUID;\n  @websocket.context\n  name: String;\n  text: String;\n}\n```\n\nEvent contexts can also be established via event type elements of `many` or `array of` type:\n\n```cds\nevent received {\n  @websocket.context\n  ID: many UUID;\n  text: String;\n}\n```\n\nThis allows setting up an unspecified number of different event contexts in parallel during runtime.\n\nEvent contexts support all CDS/JS types. The serialization is performed as follows:\n\n- `Date`: `context.toISOString()`\n- `Object`: `JSON.stringify(context)`\n- other: `String(context)`\n\nTo manage event contexts the following options exist:\n\n- **Server side**: Call websocket service facade\n  - CDS context object `req` exposes the websocket facade via `req.context.ws.service` providing the following context functions\n    - **Enter Context**: `enter(context)` - Enter the current server socket into the passed context\n    - **Exit Context**: `exit(context)` - Exit the current server socket from the passed context\n- **Client side**: Emit `wsContext` event from client socket\n  - **Enter Context**:\n    - WS Standard:\n      ```js\n      socket.send(JSON.stringify({ event: \"wsContext\", data: { context: \"...\" } }));\n      ```\n    - Socket.IO:\n      ```js\n      socket.emit(\"wsContext\", { context: \"...\" });\n      ```\n  - **Exit**:\n    - WS Standard:\n      ```js\n      socket.send(JSON.stringify({ event: \"wsContext\", data: { context: \"...\", exit: true } }));\n      ```\n    - Socket.IO:\n      ```js\n      socket.emit(\"wsContext\", { context: \"...\", exit: true });\n      ```\n\nMultiple contexts can be entered for the same server socket at the same time. Furthermore, a service operation named\n`wsContext` is invoked, if existing on the websocket enabled CDS service. Event context isolation is also ensured\nover remote distribution via Redis.\n\nFor Socket.IO (`kind: socket.io`) contexts are implemented leveraging [Socket.IO rooms](https://socket.io/docs/v4/rooms/).\n\n### Event Client Identifier\n\nEvents are broadcast to all websocket clients, including clients that performed certain action. In some cases, the  \nwebsocket client shall not be informed about the event, that was triggered by the same client (maybe via a different channel, e.g. OData).\nTherefore, websocket clients can be identified optionally by a unique identifier provided as URL parameter option `?id=<globally unique value>`.\nThe annotation `@websocket.identifier` or `@ws.identifier` is available on event type level and event type element level\nto influence event broadcasting based websocket client identifier (alternatives include `@websocket.broadcast.identifier` or `@ws.broadcast.identifier`):\n\nValid annotation values are:\n\n- **Event type level**:\n  - Provide a static unique identifier to exclude the client from event broadcasting\n- **Event type element level**:\n  - Value from event data for the annotated element is used as unique identifier to exclude the websocket client from event broadcasting\n  - First annotated element with an defined event data value is taken\n\nThe unique identifier can be provided for a websocket client as follows:\n\n- WS Standard:\n  ```js\n  socket = new WebSocket(\"ws://localhost:4004/ws/chat?id=1234\");\n  ```\n- Socket.IO:\n  ```js\n  const socket = io(\"/chat?id=1234\", { path: \"/ws\" });\n  ```\n\n### Event Emit Headers\n\nThe websocket implementation allows to provide event emit headers to dynamically control websocket processing.\nThe following headers are available:\n\n- `excludeCurrentUser: boolean, wsExcludeCurrentUser: boolean`: Exclude current user from event broadcasting (see section Event User)\n- `contexts: String[], wsContexts: String[]`: Provide an array of context strings to identify a subset of clients (see section Event Contexts)\n- `identifier: String, wsIdentifier: String`: Exclude an websocket client via its identifier (see section Event Client Identifier)\n\nEmitting events with headers can be performed as follows:\n\n```js\nawait srv.emit(\"customEvent\", { ... }, {\n  contexts: [\"...\"],\n  excludeCurrentUser: req.data.type === \"1\",\n  identifier: \"...\",\n});\n```\n\nThe respective event annotations (described in sections above) are respected in addition to event emit header specification,\nso that primitive typed values have priority when specified as part of headers and array-like data is unified.\n\n### Connect & Disconnect\n\nEvery time a server socket is connected via websocket client, the CDS service is notified by calling the corresponding service operation:\n\n- `Connect`: Invoke service operation `wsConnect`, if available\n- `Disconnect`: Invoke service operation `wsDisconnect`, if available\n\n#### Approuter\n\nAuthorization in provided in production by approuter component (e.g. via XSUAA auth).\nValid UAA bindings for approuter and backend are necessary, so that the authorization flow is working.\nLocally, the following default environment files need to exist:\n\n- `test/_env/default-env.json`\n  ```json\n  {\n    \"VCAP_SERVICES\": {\n      \"xsuaa\": [{}]\n    }\n  }\n  ```\n- `test/_env/approuter/default-services.json`\n  ```json\n  {\n    \"uaa\": {}\n  }\n  ```\n\nApprouter is configured to support websockets in `xs-app.json` according to [@sap/approuter - websockets property](https://www.npmjs.com/package/@sap/approuter#websockets-property):\n\n```json\n{\n  \"websockets\": {\n    \"enabled\": true\n  }\n}\n```\n\n#### Local\n\nFor local testing a mocked basic authorization is hardcoded in `flp.html/index.html`.\n\n### Operations\n\nOperations comprise actions and function in the CDS service that are\nexposed by CDS service either unbound (static level) or bound (entity instance level).\nOperations are exposed as part of the websocket protocol as described below.\nOperation results will be provided via optional websocket acknowledgement callback.\n\n> Operation results are only supported with Socket.IO (`kind: socket.io`) using acknowledgement callbacks.\n\n#### Unbound\n\nEach unbound function and action is exposed as websocket event.\nThe signature (parameters and return type) is passed through without additional modification.\nOperation result will be provided as part of acknowledgment callback.\n\n##### Special operations\n\nThe websocket adapter tries to call the following special operations on the CDS service, if available:\n\n- `wsConnect`: Callback to notify that a socket was connected\n- `wsDisconnect`: Callback to notify that a socket was disconnected\n- `wsContext`: Callback to notify that a socket changed the event context (details see section Event Contexts)\n\n#### Bound\n\nEach service entity is exposed as CRUD interface via as special events as proposed [here](https://socket.io/get-started/basic-crud-application/).\nThe event is prefixed with the entity name and has the CRUD operation as suffix, e.g. `Books:create`.\nIn addition, also bound functions and actions are included into these schema, e.g. `Books:sell`.\nThe signature (parameters and return type) is passed through without additional modification.\nIt is expected, that the event payload contains the primary key information.\nCRUD/action/function result will be provided as part of acknowledgment callback.\n\n#### CRUD\n\nCreate, Read, Update and Delete (CRUD) actions are mapped to websocket events as follows:\n\n- `<entity>:create`: Create an entity instance\n- `<entity>:read`: Read an entity instance by key\n- `<entity>:readDeep`: Read an entity instance deep (incl. deep compositions) by key\n- `<entity>:update`: Update an entity instance by key\n- `<entity>:delete`: Delete an entity instance by key\n- `<entity>:list`: List all entity instances\n- `<entity>:<operation>`: Call a bound entity operation (action/function)\n\nEvents can be emitted and the response can be retrieved via acknowledgment callback.\n\n#### CRUD Broadcast Events\n\nCRUD events that modify entities automatically emit another event after successful processing:\n\n- `<entity>:create => <entity>:created`: Entity instance has been updated\n- `<entity>:update => <entity>:updated`: Entity instance has been created\n- `<entity>:delete => <entity>:deleted`: Entity instance has been deleted\n\nBecause of security concerns, it can be controlled which data of those events is broadcast,\nvia annotations `@websocket.broadcast` or `@ws.broadcast` on entity level.\n\n- Propagate only key via one of the following options (default, if no annotation is present):\n  - `@websocket.broadcast = 'key'`\n  - `@websocket.broadcast.content = 'key'`\n  - `@ws.broadcast = 'key'`\n  - `@ws.broadcast.content = 'key'`\n- Propagate complete entity data via one of the following options:\n  - `@websocket.broadcast = 'data'`\n  - `@websocket.broadcast.content = 'data'`\n  - `@ws.broadcast = 'data'`\n  - `@ws.broadcast.content = 'data'`\n- Propagate no data (hence suppress CRUD broadcast event) via one of the following options:\n  - `@websocket.broadcast = 'none'`\n  - `@websocket.broadcast.content = 'none'`\n  - `@ws.broadcast = 'none'`\n  - `@ws.broadcast.content = 'none'`\n\nIf the CRUD broadcast event is modeled as part of CDS service the annotations above are ignored for that event,\nand the broadcast data is filtered along the event type elements. As character `:` is not allowed in CDS service event names,\ncharacter `:` is replaced by a scoped event name using character `.`.\n\n**Example:**\nWebSocket Event: `Object:created` is mapped to CDS Service Event: `Object.created`\n\nPer default, events are broadcast to every connected socket, expect the socket, that was called with the CRUD event.\nTo also include the triggering socket within the broadcast, this can be controlled via annotations\n`@websocket.broadcast.all` or `@ws.broadcast.all` on entity level.\n\n### Examples\n\n#### Todo (UI5)\n\nThe example UI5 `todo` application using Socket.IO can be found at `test/_env/app/todo`.\n\nExample application can be started by:\n\n- Basic Auth\n  - Starting backend: `npm start`\n  - Open in browser: http://localhost:4004/flp.html#Todo-manage\n- XSUAA Auth:\n  - Starting approuter: `npm run start:approuter`\n  - Starting backend: `npm run start:uaa`\n  - Open in browser: http://localhost:5001/flp.html#Todo-manage\n\n#### Chat (HTML)\n\nAn example `chat` application using Socket.IO can be found at `test/_env/app/chat`.\n\nExample application can be started by:\n\n- Basic Auth:\n  - WebSocket Standard: `npm start`\n    - Browser: http://localhost:4004/chat_ws/index.html\n  - Socket.IO: `npm run start:socketio`\n    - Browser: http://localhost:4004/chat_socketio/index.html\n- XSUAA Auth:\n  - Approuter: `npm run start:approuter`\n  - WebSocket Standard: `npm run start:uaa`\n    - Browser: http://localhost:5001/chat_ws/index.html\n  - Socket.IO: `npm run start:socketio:uaa`\n    - Browser: http://localhost:5001/chat_socketio/index.html\n\n### Unit-Tests\n\nUnit-test can be found in folder `test` and can be executed via `npm test`;\nThe basic unit-test setup for WebSockets in CDS context looks as follows:\n\n#### WS\n\n```js\n\"use strict\";\n\nconst cds = require(\"@sap/cds\");\nconst WebSocket = require(\"ws\");\n\ncds.test(__dirname + \"/..\");\n\nconst authorization = `Basic ${Buffer.from(\"alice:alice\").toString(\"base64\")}`;\n\ndescribe(\"WebSocket\", () => {\n  let socket;\n\n  beforeAll((done) => {\n    const port = cds.app.server.address().port;\n    socket = new WebSocket(`ws://localhost:${port}/ws/chat`, {\n      headers: {\n        authorization,\n      },\n    });\n  });\n\n  afterAll(() => {\n    cds.ws.close();\n    socket.close();\n  });\n\n  test(\"Test\", (done) => {\n    socket.send(\n      JSON.stringify({\n        event: \"event\",\n        data: {},\n      }),\n    );\n  });\n});\n```\n\n#### Socket.io\n\n```js\n\"use strict\";\n\nconst cds = require(\"@sap/cds\");\nconst ioc = require(\"socket.io-client\");\n\ncds.test(__dirname + \"/..\");\n\ncds.env.websocket = {\n  kind: \"socket.io\",\n};\n\nconst authorization = `Basic ${Buffer.from(\"alice:alice\").toString(\"base64\")}`;\n\ndescribe(\"WebSocket\", () => {\n  let socket;\n\n  beforeAll((done) => {\n    const port = cds.app.server.address().port;\n    socket = ioc(`http://localhost:${port}/chat`, {\n      path: \"/ws\",\n      extraHeaders: {\n        authorization,\n      },\n    });\n    socket.on(\"connect\", done);\n  });\n\n  afterAll(() => {\n    cds.ws.close();\n    socket.disconnect();\n  });\n\n  test(\"Test\", (done) => {\n    socket.emit(\"event\", {}, (result) => {\n      expect(result).toBeDefined();\n      done();\n    });\n  });\n});\n```\n\n### Adapters (Socket.IO)\n\nAn Adapter is a server-side component which is responsible for broadcasting events to all or a subset of clients.\n\n#### Redis\n\nEvery event that is sent to multiple clients is sent to all matching clients connected to the current server\nand published in a Redis channel, and received by the other websocket servers of the cluster.\nThe app needs to be bound to a Redis service instance to set up and connect Redis client.\n\n##### WS Standard\n\nThe following adapters for WS Standard are supported out-of-the-box.\n\n###### Redis\n\nTo use the Redis Adapter (basic publish/subscribe), the following steps have to be performed:\n\n- Set `cds.websocket.adapter.impl: \"redis\"`\n- Application needs to be bound to a Redis instance\n  - Cloud Foundry: Redis is automatically active\n    - Use option `cds.websocket.adapter.active: false` to disable Redis adapter\n  - Other Environment (e.g. Kyma): Redis is NOT automatically active\n    - Use option `cds.websocket.adapter.active: true` to enable Redis adapter\n  - Local: Redis is NOT automatically active\n    - Use option `cds.websocket.adapter.local: true` to enable Redis adapter\n    - File `default-env.json` need to exist with Redis configuration\n- Redis Adapter options can be specified via `cds.websocket.adapter.options`\n- Redis channel key can be specified via `cds.websocket.adapter.options.key`. Default value is `websocket`.\n- Redis client connection configuration can be passed via `cds.websocket.adapter.config`\n\n###### Custom Adapter\n\nA custom websocket adapter implementation can be provided via relative path set configuration of `cds.websocket.adapter.impl`.\n\n##### Socket.IO\n\nThe following adapters for Socket.IO are supported out-of-the-box.\n\n###### Redis Adapter\n\nTo use the Redis Adapter, the following steps have to be performed:\n\n- Install Redis Adapter dependency:\n  `npm install @socket.io/index-adapter`\n- Set `cds.websocket.adapter.impl: \"@socket.io/index-adapter\"`\n- Application needs to be bound to a Redis instance\n  - Locally a `default-env.json` file need to exist with index configuration\n- Redis Adapter options can be specified via `cds.websocket.adapter.options`\n- Redis channel key can be specified via `cds.websocket.adapter.options.key`. Default value is `socket.io`.\n\nDetails:\nhttps://socket.io/docs/v4/index-adapter/\n\n###### Redis Streams Adapter\n\nTo use the Redis Stream Adapter, the following steps have to be performed:\n\n- Install Redis Streams Adapter dependency:\n  `npm install @socket.io/index-streams-adapter`\n- Set `cds.websocket.adapter.impl: \"@socket.io/index-streams-adapter\"`\n- Application needs to be bound to a Redis instance\n  - Locally a `default-env.json` file need to exist with index configuration\n- Redis Streams Adapter options can be specified via `cds.websocket.adapter.options`\n- Redis channel key can be specified via `cds.websocket.adapter.options.streamName`. Default value is `socket.io`.\n\nDetails:\nhttps://socket.io/docs/v4/index-streams-adapter/\n\n### Deployment\n\nThis module also works on a deployed infrastructure like Cloud Foundry (CF) or Kubernetes (K8s).\n\nAn example Cloud Foundry deployment can be found in `test/_env`:\n\n- `cd test/_env`\n  - Use [manifest.yml](test/_env/manifest.yml)\n- `npm run cf:push`\n  - Prepares modules `approuter` and `backend` in `test/_env` and pushes to Cloud Foundry\n    - Approuter performs authentication flow with XSUAA and forwards to backend\n    - Backend serves endpoints (websocket, odata) and UI apps (runs on an in-memory SQLite3 database)\n\nIn deployed infrastructure, websocket protocol is exposed via Web Socket Secure (WSS) at `wss://` over an encrypted TLS connection.\nFor WebSocket standard the following setup in browser environment is recommended to cover deployed and local use-case:\n\n```js\nconst protocol = window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\";\nconst socket = new WebSocket(protocol + window.location.host + \"/ws/chat\");\n```\n\n## Support, Feedback, Contributing\n\nThis project is open to feature requests/suggestions, bug reports etc. via [GitHub issues](https://github.com/cap-js-community/websocket/issues). Contribution and feedback are encouraged and always welcome. For more information about how to contribute, the project structure, as well as additional contribution information, see our [Contribution Guidelines](CONTRIBUTING.md).\n\n## Code of Conduct\n\nWe as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone. By participating in this project, you agree to abide by its [Code of Conduct](CODE_OF_CONDUCT.md) at all times.\n\n## Licensing\n\nCopyright 2023 SAP SE or an SAP affiliate company and websocket contributors. Please see our [LICENSE](LICENSE) for copyright and license information. Detailed information including third-party components and their licensing/copyright information is available [via the REUSE tool](https://api.reuse.software/info/github.com/cap-js-community/websocket).\n","downloadsCurrentMonth":170,"downloadsCurrentFortnight":42,"downloads365":1303,"downloadsFortnightGrowth":-67.19,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":130},{"yearMonth":"2024-01","downloads":490},{"yearMonth":"2024-02","downloads":245},{"yearMonth":"2024-03","downloads":126},{"yearMonth":"2024-04","downloads":142},{"yearMonth":"2024-05","downloads":170}],"npmlink":"https://www.npmjs.com/package/@cap-js-community/websocket","versions":[{"version":"created","date":"2023-12-21T12:55:26.075Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/created","changelog":"","sourceType":"plugin"},{"version":"0.1.0","date":"2023-12-21T12:55:26.431Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.1.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-05-03T05:46:33.565Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.1.1","date":"2023-12-22T14:34:17.361Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.1.1","changelog":"","sourceType":"plugin"},{"version":"0.1.2","date":"2024-01-08T13:30:32.321Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.1.2","changelog":"","sourceType":"plugin"},{"version":"0.2.0","date":"2024-01-11T08:29:35.101Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.2.0","changelog":"","sourceType":"plugin"},{"version":"0.3.0","date":"2024-01-22T08:32:23.838Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.3.0","changelog":"","sourceType":"plugin"},{"version":"0.4.0","date":"2024-01-26T07:01:33.004Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.4.0","changelog":"","sourceType":"plugin"},{"version":"0.5.0","date":"2024-01-29T15:29:33.847Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.5.0","changelog":"","sourceType":"plugin"},{"version":"0.6.0","date":"2024-01-31T07:21:25.655Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.6.0","changelog":"","sourceType":"plugin"},{"version":"0.6.1","date":"2024-01-31T07:31:45.022Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.6.1","changelog":"","sourceType":"plugin"},{"version":"0.7.0","date":"2024-02-09T07:49:02.633Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.7.0","changelog":"","sourceType":"plugin"},{"version":"0.8.0","date":"2024-02-15T08:11:46.014Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.8.0","changelog":"","sourceType":"plugin"},{"version":"0.8.1","date":"2024-03-04T07:24:43.622Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.8.1","changelog":"","sourceType":"plugin"},{"version":"0.9.0","date":"2024-04-02T06:58:40.419Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/0.9.0","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2024-05-03T05:46:33.251Z","link":"https://www.npmjs.com/package/@cap-js-community/websocket/v/1.0.0","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).\n\n## Version 1.0.1 - 2024-06-xx\n\n### Fixed\n\n- tbd\n\n## Version 1.0.0 - 2024-05-03\n\n### Added\n\n- First major release\n- Exclude a client socket instance via a consumer-defined identifier\n\n### Fixed\n\n- Clear existing redis clients before shutdown\n- Call unknown adapter implementations for Socket.IO\n- Normalize logging layer\n\n## Version 0.9.0 - 2024-04-02\n\n### Fixed\n\n- Add option to activate Redis adapter in other (non-local) environments (e.g. Kyma)\n- Fix Redis re-connect behavior to prevent Redis overload\n- Pass adapter configurations to Redis client creation\n\n## Version 0.8.1 - 2024-03-04\n\n### Added\n\n- Allows to provide event emit headers to dynamically control websocket processing without annotations\n\n### Fixed\n\n- Describe the usage of CDS persistent outbox for websocket events\n\n## Version 0.8.0 - 2024-02-15\n\n### Added\n\n- Introduce optional `user` concept to broadcast event, except to current context user via annotation `@websocket.user` or `@ws.user`\n- Allow to suppress CRUD event broadcast via `@websocket.broadcast = 'none'` or `@ws.broadcast = 'none'`\n- Match CRUD broadcast event with CDS service event to filter broadcast data\n\n### Fixed\n\n- Fix leakage of internal processing information to websocket clients\n\n## Version 0.7.0 - 2024-02-09\n\n### Added\n\n- Allow custom server implementations via `cds.websocket.impl`\n- Allow custom adapter implementations via `cds.websocket.adapter.impl` (kind `ws` only)\n- Allow processing of multiple event contexts by annotating event type elements of `many` or `array of` type\n- Support for type `date` event contexts as ISO string representation\n- Support for type `object` event contexts as JSON stringified representation\n\n## Version 0.6.1 - 2024-01-31\n\n### Fixed\n\n- Correct version confusion (0.5.1 uses 0.6.0 in package.json)\n\n## Version 0.5.1 - 2024-01-31\n\n### Fixed\n\n- Fix message wrapping for Redis distribution (`kind: ws`)\n\n## Version 0.5.0 - 2024-01-29\n\n### Added\n\n- Provide user context in examples and tests, to verify authorization flow\n- Introduce optional `context` concept to broadcast to a client subset via annotation `@websocket.context` or `@ws.context`\n\n### Fixed\n\n- Respect tenant isolation for event broadcasting\n- Fix maxListeners issue for `ws` implementation\n- Refactor middlewares and authorization check\n- Change `cds.ws` to point to CDS websocket server (not the native implementation, use `cds.wss` or `cds.io` for that)\n\n## Version 0.4.0 - 2024-01-26\n\n### Added\n\n- Option to disable websockets via env configuration `cds.websocket: false`\n- Add configuration schema for websocket environment via `cds.schema` for CDS plugin\n\n### Fixed\n\n- Change `cds` websocket env from `cds.requires.websocket` to `cds.websocket` accessible via `cds.env.websocket`\n\n## Version 0.3.0 - 2024-01-22\n\nnpm\n\n### Added\n\n- Add overview graphic\n- Disable Redis per default locally, option to enable it\n- Option to broadcast CRUD post-events to all sockets via `@websocket.broadcast.all` or `@ws.broadcast.all`\n\n### Fixed\n\n- Remove Redis broadcast for kind `ws` on message receiving\n\n## Version 0.2.0 - 2024-01-11\n\n### Fixed\n\n- Broadcast service events without connected sockets via Redis\n- Document base websocket server class\n\n## Version 0.1.2 - 2024-01-08\n\n### Fixed\n\n- Set websocket default kind to `ws`\n- Mock request response more complete\n- More robust setup and error handling\n- Redis off per default\n- Refactoring\n\n## Version 0.1.1 - 2023-12-22\n\n### Added\n\n- Websocket events in non-websocket services\n- Support multiple endpoints\n\n## Version 0.1.0 - 2023-12-21\n\n### Added\n\n- Initial release\n"},{"name":"cds-mysql","version":"7.9.0","main":"lib/index.js","cds.main":"./index.cds","description":"mysql database adapter for cds","bin":{"cds-mysql-build":"./bin/build"},"scripts":{"install:dev":"node install_optional_deps.js","pretest":"npm run install:dev","prelint":"npm run install:dev","prebench":"npm run install:dev","prebuild":"npm run install:dev","test":"jest --passWithNoTests --runInBand --forceExit","build":"tsc","bench":"node bench/benchmark.js","postbuild":"tsc --noEmit --p tsconfig.lib.json","lint":"eslint src/** --fix","release":"npx standard-version --no-verify","alpha-release":"npx standard-version --prerelease alpha --no-verify","coverage":"npm test -- --coverage --no-cache"},"repository":{"type":"git","url":"https://github.com/Soontao/cds-mysql"},"engines":{"node":">=18","npm":">=9"},"dependencies":{"@newdash/graphlib":"3.1.4","@newdash/newdash":"5.22.1","cds-internal-tool":"1.7.9","colors":"1.4.0","generic-pool":"3.9.0","glob":"10.4.1","luxon":"3.4.4","mysql2":"3.10.0","ts-mysql-parser":"0.2.0","typeorm":"0.3.20"},"devDependencies":{"@types/generic-pool":"3.8.1","@types/glob":"8.1.0","@types/jest":"29.5.12","@types/luxon":"3.4.2","@types/node":"20.13.0","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0","axios":"1.7.2","benchmark":"2.1.4","eslint":"8.57.0","jest":"29.7.0","ts-jest":"29.1.4","ts-node":"10.9.2","typescript":"5.4.5"},"optionalDependencies":{"fsevents":"^2.3.3"},"cds":{"requires":{"kinds":{"mysql":{"impl":"cds-mysql"}}}},"license":"MIT","keywords":["CDS","CAP","MySQL","MariaDB"],"type":"database","tags":["mysql"],"gitHubOwner":"Soontao","gitHubRepo":"cds-mysql","licenseSource":"mit","forks":0,"stars":13,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2021-02-10T05:19:19.269Z","updatedAt":"2024-05-04T06:56:48.741Z","vscodeInstalls":-1,"sourceType":"database","githublink":"https://github.com/Soontao/cds-mysql/tree/main/","readme":"# cds mysql\n\n[![npm version](https://img.shields.io/npm/v/cds-mysql?label=cds-mysql)](https://www.npmjs.com/package/cds-mysql)\n[![node-test](https://github.com/Soontao/cds-mysql/actions/workflows/nodejs.yml/badge.svg)](https://github.com/Soontao/cds-mysql/actions/workflows/nodejs.yml)\n[![database-test](https://github.com/Soontao/cds-mysql/actions/workflows/database.yml/badge.svg)](https://github.com/Soontao/cds-mysql/actions/workflows/database.yml)\n\n[![codecov](https://codecov.io/gh/Soontao/cds-mysql/branch/main/graph/badge.svg?token=xTt6AaHeuu)](https://codecov.io/gh/Soontao/cds-mysql)\n[![Security Rating](https://sonarcloud.io/api/project_badges/measure?project=Soontao_cds-mysql&metric=security_rating)](https://sonarcloud.io/dashboard?id=Soontao_cds-mysql)\n[![Technical Debt](https://sonarcloud.io/api/project_badges/measure?project=Soontao_cds-mysql&metric=sqale_index)](https://sonarcloud.io/dashboard?id=Soontao_cds-mysql)\n[![Vulnerabilities](https://sonarcloud.io/api/project_badges/measure?project=Soontao_cds-mysql&metric=vulnerabilities)](https://sonarcloud.io/dashboard?id=Soontao_cds-mysql)\n\n> `MySQL`/`MariaDB` adapter for [CAP Framework](https://cap.cloud.sap/docs/about/), this module is heavily inspired by the [cds-pg](https://github.com/sapmentors/cds-pg) module.\n\n## Setup\n\nfirstly, install npm packages\n\n```bash\nnpm i cds-mysql mysql2\n```\n\nsetup the `mysql` database driver for cds -> edit the `package.json` > `cds` node (or `.cdsrc.json`)\n\n```json\n{\n  \"requires\": {\n    \"db\": {\n      \"kind\": \"mysql\"\n    }\n  }\n}\n```\n\ncreate an `.env` file and put that into your local CDS project, then fill the database credential\n\n```bash\nCDS_REQUIRES_DB_CREDENTIALS_HOST=127.0.0.1\nCDS_REQUIRES_DB_CREDENTIALS_PORT=3306\nCDS_REQUIRES_DB_CREDENTIALS_DATABASE= # db name\nCDS_REQUIRES_DB_CREDENTIALS_USER= # db user\nCDS_REQUIRES_DB_CREDENTIALS_PASSWORD= # db user pwd!\n```\n\nnow, start the cds server (`npx cds-serve`), everything is ready!\n\n> [!TIP]\n> read more about how to config [database credential](./docs/ADVANCED_USAGE.md#configure-database-credential-by-environments-variables).\n\n> [!TIP]\n> read more about how to setup [database user](./docs/ADVANCED_USAGE.md#database).\n\n---\n\nin addition, please check [cap-mysql-sflight](https://github.com/Soontao/cap-mysql-sflight) to get the `mysql` version of official `cap-sflight` example, and it works well.\n\n## [Advanced Documentation](./docs/ADVANCED_USAGE.md)\n\nplease read the full long version [Advanced Documentation](./docs/ADVANCED_USAGE.md) to get more technical details.\n\n## Feature and RoadMap\n\n- [x] fundamental `INSERT`/`UPDATE`/`DELETE`/`SELECT` query support\n  - [x] support [`UPSERT`](./docs/ADVANCED_USAGE.md#upsert) by `INSERT ... ON DUPLICATE KEY UPDATE` statement\n- [x] deep insert for association/composition\n  - [x] deep create/update/query/delete test case\n- [x] `fiori` draft support\n  - [x] `draftPrepare`/`draftEdit`/`draftActivate` test case\n- [x] `temporal` aspect, but not support [time-travel query](https://cap.cloud.sap/docs/guides/temporal-data#time-travel-queries)\n- [x] `incrementID` auto incremental key aspect\n- [x] `preDelivery` CSV aspect\n  - [x] migrate CSV on-demand (with option)\n  - [x] CSV migration with hash check\n  - [ ] care entity dependencies - the order of CSV import\n- [x] full text search\n- [x] schema migration optimization (ignore drop in some case)\n  - [ ] ignore column length reduce and with warning\n  - [x] model version, only incremental migration - `transparent migration`\n- [x] [`@Core.Media` attachment support](https://cap.cloud.sap/docs/guides/media-data)\n- [x] [localized data](https://cap.cloud.sap/docs/guides/localized-data)\n- [x] multi tenancy\n  - [x] deploy model on-fly\n  - [x] create database on-demand\n    - [ ] user permission check\n  - [x] _experimental_ [`@sap/cds-mtxs` support](https://cap.cloud.sap/docs/guides/multitenancy/mtxs) -> [document](./docs/MTXS.md) - behavior maybe changed later.\n    - [x] extensibility (`pull`/`push`)\n- [x] `$expand` navigation\n- [x] `$filter` with canonical functions (`concat`/`contains`/`substring`)\n- [x] test with `mariadb 10`, `mysql 5/8`\n- [x] initial data provision by `CSV`\n  - [x] better migration type/column/name adaption\n- [x] mysql index\n  - [ ] better error for not supported elements\n- [x] automatically schema sync (when connection pool provision)\n- [x] SELECT [`FOR UPDATE`](https://cap.cloud.sap/docs/node.js/cds-ql?q=forUpdate#select-forUpdate)/`LOCK IN SHARE MODE`\n  - [ ] `NOWAIT` support\n  - [ ] `SKIP LOCKED` support\n- [x] better E2E document/sample - [cap-mysql-sflight](https://github.com/Soontao/cap-mysql-sflight)\n- [ ] adapt new cds-dbs layer\n- [ ] real stream adoption for binary\n\n## [CHANGELOG](./CHANGELOG.md)\n\n## [LICENSE](./LICENSE)\n","downloadsCurrentMonth":341,"downloadsCurrentFortnight":111,"downloads365":5879,"downloadsFortnightGrowth":-51.74,"downloadsHistory":[{"yearMonth":"2023-07","downloads":316},{"yearMonth":"2023-08","downloads":623},{"yearMonth":"2023-09","downloads":407},{"yearMonth":"2023-10","downloads":1665},{"yearMonth":"2023-11","downloads":273},{"yearMonth":"2023-12","downloads":370},{"yearMonth":"2024-01","downloads":517},{"yearMonth":"2024-02","downloads":222},{"yearMonth":"2024-03","downloads":306},{"yearMonth":"2024-04","downloads":220},{"yearMonth":"2024-05","downloads":342}],"npmlink":"https://www.npmjs.com/package/cds-mysql","versions":[{"version":"created","date":"2021-02-10T05:19:19.269Z","link":"https://www.npmjs.com/package/cds-mysql/v/created","changelog":"","sourceType":"database"},{"version":"0.1.2","date":"2021-02-10T05:19:19.517Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.2","changelog":"","sourceType":"database"},{"version":"modified","date":"2024-05-04T06:56:48.741Z","link":"https://www.npmjs.com/package/cds-mysql/v/modified","changelog":"","sourceType":"database"},{"version":"0.1.3","date":"2021-02-22T09:17:20.630Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.3","changelog":"","sourceType":"database"},{"version":"0.1.4","date":"2021-02-23T04:33:30.578Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.4","changelog":"","sourceType":"database"},{"version":"0.1.5","date":"2021-02-23T05:50:55.716Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.5","changelog":"","sourceType":"database"},{"version":"0.1.6","date":"2021-02-23T06:59:37.605Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.6","changelog":"","sourceType":"database"},{"version":"0.1.7","date":"2021-03-03T10:01:00.472Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.7","changelog":"","sourceType":"database"},{"version":"0.1.8","date":"2021-03-10T05:24:35.774Z","link":"https://www.npmjs.com/package/cds-mysql/v/0.1.8","changelog":"","sourceType":"database"},{"version":"5.1.0","date":"2021-05-18T08:43:53.255Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.1.0","changelog":"","sourceType":"database"},{"version":"5.2.1","date":"2021-07-27T10:42:00.907Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.2.1","changelog":"","sourceType":"database"},{"version":"5.2.2","date":"2021-09-12T08:26:29.252Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.2.2","changelog":"","sourceType":"database"},{"version":"5.2.3","date":"2021-09-30T13:30:24.672Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.2.3","changelog":"","sourceType":"database"},{"version":"5.3.0","date":"2021-10-11T12:17:42.121Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.3.0","changelog":"","sourceType":"database"},{"version":"5.4.0","date":"2021-10-12T02:21:38.877Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.4.0","changelog":"","sourceType":"database"},{"version":"5.4.1","date":"2021-10-12T02:38:56.033Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.4.1","changelog":"","sourceType":"database"},{"version":"5.4.2","date":"2021-10-15T13:49:27.668Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.4.2","changelog":"","sourceType":"database"},{"version":"5.4.3","date":"2021-10-19T04:37:13.602Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.4.3","changelog":"","sourceType":"database"},{"version":"5.4.4","date":"2021-10-27T11:26:25.011Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.4.4","changelog":"","sourceType":"database"},{"version":"5.4.5","date":"2021-11-28T09:22:21.257Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.4.5","changelog":"","sourceType":"database"},{"version":"5.8.0","date":"2021-12-11T15:22:42.013Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.8.0","changelog":"","sourceType":"database"},{"version":"5.9.0","date":"2022-01-15T10:04:29.661Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.0","changelog":"","sourceType":"database"},{"version":"5.9.1","date":"2022-01-15T10:22:44.791Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.1","changelog":"","sourceType":"database"},{"version":"5.9.2","date":"2022-01-15T11:02:19.515Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.2","changelog":"","sourceType":"database"},{"version":"5.9.3","date":"2022-01-18T04:40:22.091Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.3","changelog":"","sourceType":"database"},{"version":"5.9.4","date":"2022-01-18T12:08:41.720Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.4","changelog":"","sourceType":"database"},{"version":"5.9.5","date":"2022-01-19T03:10:49.631Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.5","changelog":"","sourceType":"database"},{"version":"5.9.6-alpha.0","date":"2022-01-25T04:24:25.341Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.6-alpha.0","changelog":"","sourceType":"database"},{"version":"5.9.6-alpha.1","date":"2022-02-18T08:56:03.194Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.6-alpha.1","changelog":"","sourceType":"database"},{"version":"5.9.6","date":"2022-02-24T03:16:14.013Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.6","changelog":"","sourceType":"database"},{"version":"5.9.7-alpha.0","date":"2022-03-01T04:55:27.027Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.7-alpha.0","changelog":"","sourceType":"database"},{"version":"5.9.7","date":"2022-03-08T09:22:05.880Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.7","changelog":"","sourceType":"database"},{"version":"5.9.8","date":"2022-04-13T07:55:28.012Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.8","changelog":"","sourceType":"database"},{"version":"5.9.9-alpha.0","date":"2022-04-15T06:07:53.034Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.9-alpha.0","changelog":"","sourceType":"database"},{"version":"5.9.9","date":"2022-05-16T12:00:54.127Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.9","changelog":"","sourceType":"database"},{"version":"5.9.10-0","date":"2022-06-07T14:35:54.363Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.10-0","changelog":"","sourceType":"database"},{"version":"5.9.10","date":"2022-06-10T14:00:29.712Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.10","changelog":"","sourceType":"database"},{"version":"5.9.11","date":"2022-06-15T09:02:13.585Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.11","changelog":"","sourceType":"database"},{"version":"5.9.12","date":"2022-06-20T11:08:45.942Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.12","changelog":"","sourceType":"database"},{"version":"5.9.13","date":"2022-06-21T11:23:24.379Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.13","changelog":"","sourceType":"database"},{"version":"5.9.14","date":"2022-06-27T15:02:38.467Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.14","changelog":"","sourceType":"database"},{"version":"5.9.15","date":"2022-06-30T09:48:17.695Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.15","changelog":"","sourceType":"database"},{"version":"6.0.0","date":"2022-07-09T09:09:23.802Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.0.0","changelog":"","sourceType":"database"},{"version":"6.1.0","date":"2022-08-12T12:20:51.733Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.1.0","changelog":"","sourceType":"database"},{"version":"6.2.0-alpha.0","date":"2022-10-25T14:21:21.779Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.2.0-alpha.0","changelog":"","sourceType":"database"},{"version":"6.2.0-alpha.1","date":"2022-10-28T10:15:22.867Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.2.0-alpha.1","changelog":"","sourceType":"database"},{"version":"6.2.0-alpha.2","date":"2022-10-28T10:22:26.384Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.2.0-alpha.2","changelog":"","sourceType":"database"},{"version":"6.2.0","date":"2022-10-28T16:04:30.083Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.2.0","changelog":"","sourceType":"database"},{"version":"6.2.1","date":"2022-10-29T05:30:11.376Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.2.1","changelog":"","sourceType":"database"},{"version":"6.2.2","date":"2022-10-30T03:48:50.505Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.2.2","changelog":"","sourceType":"database"},{"version":"6.3.0-alpha.0","date":"2022-11-06T03:07:54.915Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.0-alpha.0","changelog":"","sourceType":"database"},{"version":"6.3.0-alpha.1","date":"2022-11-06T04:33:47.067Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.0-alpha.1","changelog":"","sourceType":"database"},{"version":"6.3.0-beta.0","date":"2022-11-07T08:41:00.015Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.0-beta.0","changelog":"","sourceType":"database"},{"version":"6.3.0-beta.1","date":"2022-11-14T13:21:21.013Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.0-beta.1","changelog":"","sourceType":"database"},{"version":"6.3.0-beta.2","date":"2022-11-16T05:43:40.494Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.0-beta.2","changelog":"","sourceType":"database"},{"version":"6.3.0","date":"2022-11-19T03:02:04.549Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.0","changelog":"","sourceType":"database"},{"version":"6.3.1","date":"2022-11-19T03:45:54.064Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.1","changelog":"","sourceType":"database"},{"version":"6.3.2","date":"2022-11-26T07:02:48.703Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.2","changelog":"","sourceType":"database"},{"version":"6.3.3","date":"2022-11-26T08:02:24.097Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.3","changelog":"","sourceType":"database"},{"version":"6.3.4-0","date":"2022-11-26T09:40:40.064Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.4-0","changelog":"","sourceType":"database"},{"version":"6.3.4-1","date":"2022-11-29T09:43:06.441Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.4-1","changelog":"","sourceType":"database"},{"version":"6.3.4-2","date":"2022-12-06T13:26:23.522Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.4-2","changelog":"","sourceType":"database"},{"version":"6.3.4-3","date":"2022-12-06T13:59:04.142Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.4-3","changelog":"","sourceType":"database"},{"version":"6.3.4","date":"2022-12-10T04:14:09.020Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.4","changelog":"","sourceType":"database"},{"version":"6.3.5","date":"2022-12-10T05:28:24.049Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.5","changelog":"","sourceType":"database"},{"version":"6.3.6-0","date":"2022-12-10T14:20:36.370Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.6-0","changelog":"","sourceType":"database"},{"version":"6.3.6-1","date":"2022-12-10T14:37:57.490Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.6-1","changelog":"","sourceType":"database"},{"version":"6.3.6-2","date":"2022-12-10T14:58:23.213Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.6-2","changelog":"","sourceType":"database"},{"version":"6.3.6-3","date":"2022-12-11T02:14:33.706Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.6-3","changelog":"","sourceType":"database"},{"version":"6.3.6","date":"2022-12-11T03:17:48.476Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.3.6","changelog":"","sourceType":"database"},{"version":"6.4.0-alpha.0","date":"2023-01-14T07:16:47.455Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.4.0-alpha.0","changelog":"","sourceType":"database"},{"version":"6.4.0","date":"2023-01-24T04:35:40.537Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.4.0","changelog":"","sourceType":"database"},{"version":"6.4.1","date":"2023-01-27T02:26:14.736Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.4.1","changelog":"","sourceType":"database"},{"version":"6.4.2","date":"2023-01-27T03:28:22.056Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.4.2","changelog":"","sourceType":"database"},{"version":"6.5.0-alpha.0","date":"2023-02-05T01:47:32.040Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.5.0-alpha.0","changelog":"","sourceType":"database"},{"version":"5.9.16","date":"2023-02-05T04:08:23.912Z","link":"https://www.npmjs.com/package/cds-mysql/v/5.9.16","changelog":"","sourceType":"database"},{"version":"6.5.0","date":"2023-02-24T07:15:17.731Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.5.0","changelog":"","sourceType":"database"},{"version":"6.6.0-alpha.0","date":"2023-03-16T08:09:49.960Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.6.0-alpha.0","changelog":"","sourceType":"database"},{"version":"6.7.0","date":"2023-03-31T05:39:03.569Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.7.0","changelog":"","sourceType":"database"},{"version":"6.8.0","date":"2023-05-16T04:16:12.796Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.8.0","changelog":"","sourceType":"database"},{"version":"6.8.1","date":"2023-06-14T12:52:27.425Z","link":"https://www.npmjs.com/package/cds-mysql/v/6.8.1","changelog":"","sourceType":"database"},{"version":"7.0.0","date":"2023-06-24T10:33:58.480Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.0.0","changelog":"","sourceType":"database"},{"version":"7.1.0","date":"2023-08-13T13:13:50.868Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.1.0","changelog":"","sourceType":"database"},{"version":"7.1.1","date":"2023-08-26T03:38:54.096Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.1.1","changelog":"","sourceType":"database"},{"version":"7.2.0","date":"2023-09-29T03:16:15.786Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.2.0","changelog":"","sourceType":"database"},{"version":"7.2.1","date":"2023-10-06T04:42:23.225Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.2.1","changelog":"","sourceType":"database"},{"version":"7.3.0","date":"2023-10-20T14:28:53.396Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.3.0","changelog":"","sourceType":"database"},{"version":"7.4.0","date":"2023-11-25T06:04:59.434Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.4.0","changelog":"","sourceType":"database"},{"version":"7.4.1","date":"2023-12-22T05:43:02.102Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.4.1","changelog":"","sourceType":"database"},{"version":"7.5.0","date":"2024-01-29T11:19:40.558Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.5.0","changelog":"","sourceType":"database"},{"version":"7.6.0","date":"2024-02-09T07:39:20.014Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.6.0","changelog":"","sourceType":"database"},{"version":"7.7.0","date":"2024-03-09T03:51:50.881Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.7.0","changelog":"","sourceType":"database"},{"version":"7.7.1","date":"2024-03-22T02:07:35.936Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.7.1","changelog":"","sourceType":"database"},{"version":"7.8.1","date":"2024-03-30T02:14:04.720Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.8.1","changelog":"","sourceType":"database"},{"version":"7.8.2","date":"2024-04-24T05:17:44.008Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.8.2","changelog":"","sourceType":"database"},{"version":"7.9.0","date":"2024-05-04T06:56:48.536Z","link":"https://www.npmjs.com/package/cds-mysql/v/7.9.0","changelog":"","sourceType":"database"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.\n\n## [7.9.0](https://github.com/Soontao/cds-mysql/compare/v7.8.2...v7.9.0) (2024-05-04)\n\n\n### Bug Fixes\n\n* **deps:** update dependency @newdash/newdash to v5.22.1 ([acc265f](https://github.com/Soontao/cds-mysql/commit/acc265fe1ca16f09bc8f208ab25be784a537775c))\n\n### [7.8.2](https://github.com/Soontao/cds-mysql/compare/v7.8.1...v7.8.2) (2024-04-24)\n\n\n### Bug Fixes\n\n* **deps:** update dependency mysql2 to v3.9.4 ([3fcde5a](https://github.com/Soontao/cds-mysql/commit/3fcde5a7632ab760fc8f95107381613de878ed12))\n* **deps:** update dependency mysql2 to v3.9.5 ([443a03b](https://github.com/Soontao/cds-mysql/commit/443a03b2669c9f34b83b1a7c0c4db3ebd5aec673))\n* **deps:** update dependency mysql2 to v3.9.6 ([faf5cc8](https://github.com/Soontao/cds-mysql/commit/faf5cc8ccc827f2537489bc09ab70dd8c9a57325))\n* **deps:** update dependency mysql2 to v3.9.7 ([f543922](https://github.com/Soontao/cds-mysql/commit/f543922c61703559c47cff4d67f7c2723db3a988))\n\n### [7.8.1](https://github.com/Soontao/cds-mysql/compare/v7.8.0...v7.8.1) (2024-03-30)\n\n\n### Bug Fixes\n\n* release script ([5b2b55d](https://github.com/Soontao/cds-mysql/commit/5b2b55d22cf3aae1b1b1257ab31c411d709dd168))\n\n## [7.8.0](https://github.com/Soontao/cds-mysql/compare/v7.7.2...v7.8.0) (2024-03-30)\n\n### [7.7.2](https://github.com/Soontao/cds-mysql/compare/v7.7.1...v7.7.2) (2024-03-30)\n\n\n### Bug Fixes\n\n* **deps:** update dependency glob to v10.3.12 ([25eb817](https://github.com/Soontao/cds-mysql/commit/25eb8174eb8d9aa85108f51add2d048d9a748e2a))\n* **deps:** update dependency mysql2 to v3.9.3 ([98cf331](https://github.com/Soontao/cds-mysql/commit/98cf331b1518d70a6d1b717e10269bb166c50296))\n\n### [7.7.1](https://github.com/Soontao/cds-mysql/compare/v7.7.0...v7.7.1) (2024-03-22)\n\n\n### Bug Fixes\n\n* deprecated user.tenant ([8a3e061](https://github.com/Soontao/cds-mysql/commit/8a3e061a6301758b788f99d9bc11a312854f6d92))\n\n## [7.7.0](https://github.com/Soontao/cds-mysql/compare/v7.6.0...v7.7.0) (2024-03-09)\n\n\n### Bug Fixes\n\n* **deps:** update dependency mysql2 to v3.9.2 ([bc45591](https://github.com/Soontao/cds-mysql/commit/bc45591177756022015ae93d94eb5d20b07a19d9))\n\n## [7.6.0](https://github.com/Soontao/cds-mysql/compare/v7.5.0...v7.6.0) (2024-02-09)\n\n\n### Bug Fixes\n\n* **deps:** update dependency mysql2 to v3.9.1 ([d31dea9](https://github.com/Soontao/cds-mysql/commit/d31dea9eb4ea318837d555717be0a9acb2f1e858))\n* stream ([fce733a](https://github.com/Soontao/cds-mysql/commit/fce733ae532b1a745facd84ed619a1c14da13102))\n\n## [7.5.0](https://github.com/Soontao/cds-mysql/compare/v7.4.1...v7.5.0) (2024-01-29)\n\n\n### Features\n\n* cds@7.5 and mtx@1.14 ([e7db62c](https://github.com/Soontao/cds-mysql/commit/e7db62c87f019acf3b6d4e542c6a7d01fbe90910))\n\n\n### Bug Fixes\n\n* **deps:** update dependency mysql2 to v3.7.0 ([fa92f6c](https://github.com/Soontao/cds-mysql/commit/fa92f6ca22bd51bf9a2423e67baa761804fab26e))\n* **deps:** update dependency mysql2 to v3.7.1 ([32b6d01](https://github.com/Soontao/cds-mysql/commit/32b6d01cd03797c1ba274d9a078c14a65efca9a8))\n* **deps:** update dependency mysql2 to v3.8.0 ([270b2bc](https://github.com/Soontao/cds-mysql/commit/270b2bcefb6ed81eb24393402d4c5e365c1e6997))\n* **deps:** update dependency mysql2 to v3.9.0 ([a388f06](https://github.com/Soontao/cds-mysql/commit/a388f06d814e8c584f14084c7384104c450c9df7))\n* ut ([c543115](https://github.com/Soontao/cds-mysql/commit/c543115e662e490f38493fe9f750fd1dd64da2a2))\n\n### [7.4.1](https://github.com/Soontao/cds-mysql/compare/v7.4.0...v7.4.1) (2023-12-22)\n\n## [7.4.0](https://github.com/Soontao/cds-mysql/compare/v7.3.0...v7.4.0) (2023-11-25)\n\n\n### Features\n\n* support cds 7.4 ([#479](https://github.com/Soontao/cds-mysql/issues/479)) ([97d9bb8](https://github.com/Soontao/cds-mysql/commit/97d9bb8175ce7fd5993632d415fdb2f51d164035))\n\n\n### Bug Fixes\n\n* **deps:** update dependency luxon to v3.4.4 ([d95bf09](https://github.com/Soontao/cds-mysql/commit/d95bf098d3f7ef930b0e19771709c8e8a31e9cb4))\n* **deps:** update dependency mysql2 to v3.6.3 ([e531652](https://github.com/Soontao/cds-mysql/commit/e531652f5593c7a8991fdb3a05ead950865c1d58))\n* **deps:** update dependency mysql2 to v3.6.4 ([549e1dd](https://github.com/Soontao/cds-mysql/commit/549e1dd4f251d6018f0b118366737f2c48241390))\n* **deps:** update dependency mysql2 to v3.6.5 ([13491a0](https://github.com/Soontao/cds-mysql/commit/13491a0af1a72b72e988d43b9f36d7a551211f0a))\n\n## [7.3.0](https://github.com/Soontao/cds-mysql/compare/v7.2.1...v7.3.0) (2023-10-20)\n\n\n### Features\n\n* support new job service/extensibility service ([54adcd4](https://github.com/Soontao/cds-mysql/commit/54adcd4ed5c60489405520550d46c3b16db64421))\n\n\n### Bug Fixes\n\n* **deps:** update dependency mysql2 to v3.6.2 ([08b28b9](https://github.com/Soontao/cds-mysql/commit/08b28b9d59b4e15a3c108f0c719896641306849b))\n\n### [7.2.1](https://github.com/Soontao/cds-mysql/compare/v7.2.0...v7.2.1) (2023-10-06)\n\n\n### Bug Fixes\n\n* **deps:** update dependency cds-internal-tool to v1.7.6 ([16ac161](https://github.com/Soontao/cds-mysql/commit/16ac16123b944e7d7d3123d46a7b95324c3a4c1c))\n* **deps:** update dependency cds-internal-tool to v1.7.8 ([5cd6d93](https://github.com/Soontao/cds-mysql/commit/5cd6d93fbad4fb2b5bc190fc0165c2cdd1adfe2f))\n* fixed cds version 7.2.0 ([9c2f308](https://github.com/Soontao/cds-mysql/commit/9c2f308ede7161c197dcaf0131113fa58c6ae392))\n\n## [7.2.0](https://github.com/Soontao/cds-mysql/compare/v7.1.1...v7.2.0) (2023-09-29)\n\n\n### Features\n\n* cds@7.2 support ([f07cbce](https://github.com/Soontao/cds-mysql/commit/f07cbce53867234f4522c6ab92e7a85e28289bf0))\n\n\n### Bug Fixes\n\n* **deps:** update dependency glob to v10.3.10 ([ff20a76](https://github.com/Soontao/cds-mysql/commit/ff20a76aa8bd5007a93fff66467b5615bcbe5148))\n* **deps:** update dependency glob to v10.3.4 ([099c569](https://github.com/Soontao/cds-mysql/commit/099c5696589ac418216c2a83c642686433104b65))\n* **deps:** update dependency glob to v10.3.5 ([961ac34](https://github.com/Soontao/cds-mysql/commit/961ac34cee60b4ac8769f037d8e365eeeaaa2eae))\n* **deps:** update dependency glob to v10.3.6 ([a78c3c4](https://github.com/Soontao/cds-mysql/commit/a78c3c4e190f9ae740c530faa93d12128ff9472f))\n* **deps:** update dependency glob to v10.3.7 ([ed531d8](https://github.com/Soontao/cds-mysql/commit/ed531d8892ed0f7e70ca7379efeb6bdcbccb390c))\n* **deps:** update dependency glob to v10.3.9 ([d2ef282](https://github.com/Soontao/cds-mysql/commit/d2ef2823ce276123e1b89797fe008923c511ddfd))\n* **deps:** update dependency luxon to v3.4.2 ([e9fb3c1](https://github.com/Soontao/cds-mysql/commit/e9fb3c1c002233e4ee57fb1530d045292d8518f2))\n* **deps:** update dependency luxon to v3.4.3 ([eec9630](https://github.com/Soontao/cds-mysql/commit/eec9630affc0724d25f9bc89b51439537f902455))\n* **deps:** update dependency mysql2 to v3.6.1 ([aa2d895](https://github.com/Soontao/cds-mysql/commit/aa2d895556f872c82937272bae7f8a978f749f17))\n\n### [7.1.1](https://github.com/Soontao/cds-mysql/compare/v7.1.0...v7.1.1) (2023-08-26)\n\n\n### Bug Fixes\n\n* **deps:** update dependency luxon to v3.4.1 ([9829e29](https://github.com/Soontao/cds-mysql/commit/9829e29cabedd67b10cdbedab2c4a8232dd4b5d9))\n* misspelling ([0f7ff98](https://github.com/Soontao/cds-mysql/commit/0f7ff9870985869b6f1d5d1c98518d1d8a719129))\n\n## [7.1.0](https://github.com/Soontao/cds-mysql/compare/v7.0.0...v7.1.0) (2023-08-13)\n\n\n### Features\n\n* adapt cds 7.1 ([75474af](https://github.com/Soontao/cds-mysql/commit/75474af332148373f10e873aa767a6f8854b5111))\n* cds plugin tech ([af21595](https://github.com/Soontao/cds-mysql/commit/af215955be64c78b8183a1d55ab261ae7c78a070))\n\n\n### Bug Fixes\n\n* **deps:** update dependency cds-internal-tool to v1.7.4 ([0776d90](https://github.com/Soontao/cds-mysql/commit/0776d90e362fd24e015b293dda6361bf12302cf4))\n* **deps:** update dependency glob to v10.3.1 ([32c55e8](https://github.com/Soontao/cds-mysql/commit/32c55e80b3ec8889a8a67d0a0eaf74c0124ca8f9))\n* **deps:** update dependency glob to v10.3.2 ([972b714](https://github.com/Soontao/cds-mysql/commit/972b714d323f738649026ebb4efe5443a3370402))\n* **deps:** update dependency glob to v10.3.3 ([8921625](https://github.com/Soontao/cds-mysql/commit/89216255278787b9c2debd27a0b1a801f252b9b7))\n* **deps:** update dependency luxon to v3.4.0 ([acee8df](https://github.com/Soontao/cds-mysql/commit/acee8dfba8c2b13bf2b50bffe9bbd3c7b25cd0f7))\n* **deps:** update dependency mysql2 to v3.4.1 ([7eb2e5b](https://github.com/Soontao/cds-mysql/commit/7eb2e5b0539e2ff711eba6ab72285fea14fe2288))\n* **deps:** update dependency mysql2 to v3.4.2 ([f41b604](https://github.com/Soontao/cds-mysql/commit/f41b604201e533d8494eb25aa72f923276e9d8e8))\n* **deps:** update dependency mysql2 to v3.4.3 ([8c3c313](https://github.com/Soontao/cds-mysql/commit/8c3c3139dd812ab387d24146b229db50b5ed2e82))\n* **deps:** update dependency mysql2 to v3.4.4 ([7ae1859](https://github.com/Soontao/cds-mysql/commit/7ae1859254d491f7a3514b92c96e8c4aab83d7d0))\n* **deps:** update dependency mysql2 to v3.4.5 ([29379e9](https://github.com/Soontao/cds-mysql/commit/29379e98e5431dcf254937eac21892ef9abb6c3f))\n* **deps:** update dependency mysql2 to v3.5.0 ([719c500](https://github.com/Soontao/cds-mysql/commit/719c5006e146dadc4edef7d5291c4e1ccfcf7e77))\n* **deps:** update dependency mysql2 to v3.5.1 ([b82c007](https://github.com/Soontao/cds-mysql/commit/b82c0071a2cc2994f73edbd4f01b89daac126343))\n* **deps:** update dependency mysql2 to v3.5.2 ([0ae8bdc](https://github.com/Soontao/cds-mysql/commit/0ae8bdcdb8a46af0ec03a79974abc9fd6e30c2ee))\n* **deps:** update dependency mysql2 to v3.6.0 ([f086cb4](https://github.com/Soontao/cds-mysql/commit/f086cb48cb9b55c15000674944fd99a7071d4d04))\n* pool ([c21e902](https://github.com/Soontao/cds-mysql/commit/c21e90283b53b67e7dcf502ff744c112499698f8))\n* rm mysql 5.6 support ([3e5f70a](https://github.com/Soontao/cds-mysql/commit/3e5f70a9341c2f665f2217a1974604f7d40f99e5))\n* ut ([239d362](https://github.com/Soontao/cds-mysql/commit/239d362432326082de4095f149a58d6931933f39))\n* version ([849c1be](https://github.com/Soontao/cds-mysql/commit/849c1be92ad305031c6781337a9f98e2e7a000c5))\n\n## [7.0.0](https://github.com/Soontao/cds-mysql/compare/v6.8.1...v7.0.0) (2023-06-24)\n\n\n### Features\n\n* cds 7 support ([#351](https://github.com/Soontao/cds-mysql/issues/351)) ([6eb6e08](https://github.com/Soontao/cds-mysql/commit/6eb6e08c380029f018243e84863485c7e838d417))\n\n\n### Bug Fixes\n\n* **deps:** update dependency glob to v10.3.0 ([df7bcf6](https://github.com/Soontao/cds-mysql/commit/df7bcf65101e817c91fb32f6f97ecce576cb5c98))\n* **deps:** update dependency mysql2 to v3.4.0 ([bfca73e](https://github.com/Soontao/cds-mysql/commit/bfca73e6211f3dc01f8f9c1e8af66c4dfe8c8a7b))\n* **deps:** update dependency typeorm to v0.3.17 ([53d34b9](https://github.com/Soontao/cds-mysql/commit/53d34b97ae2dc9bbb440ac14dd6ce2b3f791bca2))\n\n### [6.8.1](https://github.com/Soontao/cds-mysql/compare/v6.8.0...v6.8.1) (2023-06-14)\n\n\n### Bug Fixes\n\n* **deps:** update dependency glob to v10.2.5 ([df5bbbd](https://github.com/Soontao/cds-mysql/commit/df5bbbd241e0bb058ab72ac09d5709cad1c8aae5))\n* **deps:** update dependency glob to v10.2.6 ([ec22ad5](https://github.com/Soontao/cds-mysql/commit/ec22ad5947027c2384f91a3bd59f7b262e47c5e7))\n* **deps:** update dependency glob to v10.2.7 ([a4951ff](https://github.com/Soontao/cds-mysql/commit/a4951ff1e2a1bca75df2b8b204ac3b624a71f30b))\n* typo ([40cd0ad](https://github.com/Soontao/cds-mysql/commit/40cd0adca03314dcc319a7f1b8fa68334b17432b))\n\n## [6.8.0](https://github.com/Soontao/cds-mysql/compare/v6.7.0...v6.8.0) (2023-05-16)\n\n\n### Bug Fixes\n\n* **deps:** update dependency @newdash/newdash to v5.22.0 ([5791593](https://github.com/Soontao/cds-mysql/commit/5791593347c1546b6587fc3f7e93d9d8c8f449a5))\n* **deps:** update dependency glob to v10 ([04df1af](https://github.com/Soontao/cds-mysql/commit/04df1af1776ee2d4fe0504a79584bfba21da492e))\n* **deps:** update dependency glob to v10.1.0 ([2586164](https://github.com/Soontao/cds-mysql/commit/2586164f145a37131f8d0f3fb850bb07c28aa018))\n* **deps:** update dependency glob to v10.2.1 ([65976c2](https://github.com/Soontao/cds-mysql/commit/65976c276443d694c77a4cd03af80eb20243a93d))\n* **deps:** update dependency glob to v10.2.2 ([8a72701](https://github.com/Soontao/cds-mysql/commit/8a727019c3099a8e1563dc10d81b4b140e10e3f3))\n* **deps:** update dependency glob to v10.2.3 ([572f0a8](https://github.com/Soontao/cds-mysql/commit/572f0a876397763116f7b63b7431a0a1c6aa27d6))\n* **deps:** update dependency glob to v10.2.4 ([340efa9](https://github.com/Soontao/cds-mysql/commit/340efa9b3e4deeacd6f3979620e70128c1fe1d0a))\n* **deps:** update dependency glob to v9.3.4 ([#282](https://github.com/Soontao/cds-mysql/issues/282)) ([105941a](https://github.com/Soontao/cds-mysql/commit/105941addfbb1c0e329180cc6cd6099fbf018896))\n* **deps:** update dependency glob to v9.3.5 ([f9889e8](https://github.com/Soontao/cds-mysql/commit/f9889e86f02d1858fb75a64bcaccc842572f78bf))\n* **deps:** update dependency typeorm to v0.3.13 ([7088825](https://github.com/Soontao/cds-mysql/commit/7088825d8b6b003fefb078a51debf49329921fd2))\n* **deps:** update dependency typeorm to v0.3.14 ([556d236](https://github.com/Soontao/cds-mysql/commit/556d236fecccc1f81be09111bc1bbeaceea39751))\n* **deps:** update dependency typeorm to v0.3.15 ([2f1fecc](https://github.com/Soontao/cds-mysql/commit/2f1fecced1efc3785eb771c16314631ad48a98af))\n* **deps:** update dependency typeorm to v0.3.16 ([fa86fa3](https://github.com/Soontao/cds-mysql/commit/fa86fa3692685de24edbc1f555fd704b9285d254))\n* lint ([705ddcd](https://github.com/Soontao/cds-mysql/commit/705ddcd44684e1a7c238149bcac67a437723c00f))\n\n## [6.7.0](https://github.com/Soontao/cds-mysql/compare/v6.5.0...v6.7.0) (2023-03-31)\n\n\n### Features\n\n* adapt cds 6.6.0 ([325b136](https://github.com/Soontao/cds-mysql/commit/325b136ff2a4ac79afb97975d4ac23ddcf6251a4))\n* adapt cds 6.7 ([55e5cb6](https://github.com/Soontao/cds-mysql/commit/55e5cb669090e1d55acdcd1ce1492497f38d41ba))\n\n\n### Bug Fixes\n\n* **deps:** update dependency glob to v9 ([#247](https://github.com/Soontao/cds-mysql/issues/247)) ([809c785](https://github.com/Soontao/cds-mysql/commit/809c78592c9e6fff4bb3b71b24a4e796315b0a31))\n* **deps:** update dependency glob to v9.1.0 ([846c11c](https://github.com/Soontao/cds-mysql/commit/846c11c15c53043c70ba0532133d5659b3d75542))\n* **deps:** update dependency glob to v9.1.2 ([e6471be](https://github.com/Soontao/cds-mysql/commit/e6471be8e1e14c96be5c43219d6d4280cf810042))\n* **deps:** update dependency glob to v9.2.1 ([0f3a617](https://github.com/Soontao/cds-mysql/commit/0f3a617cd6b56bdfe88cceed427903a2f7740811))\n* **deps:** update dependency glob to v9.3.0 ([79a9937](https://github.com/Soontao/cds-mysql/commit/79a993768a60680427205b65593daa55f27c7980))\n* **deps:** update dependency glob to v9.3.1 ([95dc8ab](https://github.com/Soontao/cds-mysql/commit/95dc8ab9815c637bfeeff7ada10ab77ab6ed2a96))\n* **deps:** update dependency glob to v9.3.2 ([69816ea](https://github.com/Soontao/cds-mysql/commit/69816ea7d6fdaa297d8556529e05c5b10e45b955))\n* **deps:** update dependency luxon to v3.3.0 ([fa5e1e5](https://github.com/Soontao/cds-mysql/commit/fa5e1e51d64cd81ba9d89c3ddfbef00fd82c8348))\n* type ([db8e3b7](https://github.com/Soontao/cds-mysql/commit/db8e3b7e9ce0d0145b8a6ca1d5c29acf6603bc87))\n\n## [6.6.0-alpha.0](https://github.com/Soontao/cds-mysql/compare/v6.5.0...v6.6.0-alpha.0) (2023-03-16)\n\n\n### Features\n\n* adapt cds 6.6.0 ([325b136](https://github.com/Soontao/cds-mysql/commit/325b136ff2a4ac79afb97975d4ac23ddcf6251a4))\n\n\n### Bug Fixes\n\n* **deps:** update dependency glob to v9 ([#247](https://github.com/Soontao/cds-mysql/issues/247)) ([809c785](https://github.com/Soontao/cds-mysql/commit/809c78592c9e6fff4bb3b71b24a4e796315b0a31))\n* **deps:** update dependency glob to v9.1.0 ([846c11c](https://github.com/Soontao/cds-mysql/commit/846c11c15c53043c70ba0532133d5659b3d75542))\n* **deps:** update dependency glob to v9.1.2 ([e6471be](https://github.com/Soontao/cds-mysql/commit/e6471be8e1e14c96be5c43219d6d4280cf810042))\n* **deps:** update dependency glob to v9.2.1 ([0f3a617](https://github.com/Soontao/cds-mysql/commit/0f3a617cd6b56bdfe88cceed427903a2f7740811))\n* **deps:** update dependency glob to v9.3.0 ([79a9937](https://github.com/Soontao/cds-mysql/commit/79a993768a60680427205b65593daa55f27c7980))\n* **deps:** update dependency luxon to v3.3.0 ([fa5e1e5](https://github.com/Soontao/cds-mysql/commit/fa5e1e51d64cd81ba9d89c3ddfbef00fd82c8348))\n\n## [6.5.0](https://github.com/Soontao/cds-mysql/compare/v6.5.0-alpha.0...v6.5.0) (2023-02-24)\n\n\n### Bug Fixes\n\n* **deps:** update dependency typeorm to v0.3.12 ([c734689](https://github.com/Soontao/cds-mysql/commit/c734689bc1d52395dc06a383aba77637ccb795d7))\n\n## [6.5.0-alpha.0](https://github.com/Soontao/cds-mysql/compare/v6.4.2...v6.5.0-alpha.0) (2023-02-05)\n\n\n### Features\n\n* [#216](https://github.com/Soontao/cds-mysql/issues/216) array type ([202556e](https://github.com/Soontao/cds-mysql/commit/202556e5c6595a11e4c25edb277eaed55e9e693f))\n* [#216](https://github.com/Soontao/cds-mysql/issues/216) csv improvement ([08c775b](https://github.com/Soontao/cds-mysql/commit/08c775b30dfd97623770565dbebd6ba91bbafb41))\n* [#217](https://github.com/Soontao/cds-mysql/issues/217) improve schema migration ([3b966db](https://github.com/Soontao/cds-mysql/commit/3b966db5362f869d19f5e0fb42a3fd7c59ab39f8))\n* [#217](https://github.com/Soontao/cds-mysql/issues/217) migrate with transparent approach ([26bce29](https://github.com/Soontao/cds-mysql/commit/26bce2969930206eaf49210f72bc8e067dcb4a81))\n* [#217](https://github.com/Soontao/cds-mysql/issues/217) transparent deploy improvement ([d2d2e94](https://github.com/Soontao/cds-mysql/commit/d2d2e941c4572fdbaca7d4609e134daa5e99b6bb))\n* [#221](https://github.com/Soontao/cds-mysql/issues/221) unit test for index ([0a31ca3](https://github.com/Soontao/cds-mysql/commit/0a31ca33d89c28b2fbf6767a1b2f7a527ddb6b00))\n* add mtxs support for transparent deployment ([afa372e](https://github.com/Soontao/cds-mysql/commit/afa372e8935ee5e0ba5e6c2e4c6c71244f36f0c1))\n* migration script generator ([89d751f](https://github.com/Soontao/cds-mysql/commit/89d751fbd345dc78c37e0c7b7d1026c26f413226))\n* partial support for schema evolution ([4795280](https://github.com/Soontao/cds-mysql/commit/479528094295739addca5a9b6986ead49402811c))\n* schema evolution ([2a92306](https://github.com/Soontao/cds-mysql/commit/2a92306b09b2c953896c32ccbe31978a74e52ecf))\n* support cds@6.5.0 ([90d9f75](https://github.com/Soontao/cds-mysql/commit/90d9f75cbcf99c43184ee2272134e61d1602e510))\n* timestamp for migration script ([d0a630d](https://github.com/Soontao/cds-mysql/commit/d0a630d84b3659359bfe4aae949e7dfe3f830467))\n* transparent migration test ([1beda3a](https://github.com/Soontao/cds-mysql/commit/1beda3abfbb808f61f2c2c4d24ef6042872aa2ab))\n\n\n### Bug Fixes\n\n* build script for migration version ([51d169f](https://github.com/Soontao/cds-mysql/commit/51d169fc053d4092e119bf308cbf51ce030c348b))\n* column modify for mariadb ([ecd8b34](https://github.com/Soontao/cds-mysql/commit/ecd8b34839854bf061089241e4413b7ef77d7fe8))\n* coverage ([3caadcc](https://github.com/Soontao/cds-mysql/commit/3caadcc2612a1a0712fff3d231321394289c4aa0))\n* **deps:** update dependency cds-internal-tool to v1.7.1 ([#227](https://github.com/Soontao/cds-mysql/issues/227)) ([b60c5e3](https://github.com/Soontao/cds-mysql/commit/b60c5e3fe831675d5979f3521bbf0c047d58e427))\n* issues ([3970f26](https://github.com/Soontao/cds-mysql/commit/3970f2683b3bde1db9a5dee87fd97d2847cda771))\n* nvarchar ([8f7c80f](https://github.com/Soontao/cds-mysql/commit/8f7c80f94b8d75561a00fa6bc49e59a3f8c38fd7))\n* sonar ([ccfb203](https://github.com/Soontao/cds-mysql/commit/ccfb203ed1d23bf93d0a223edc8755b024fbd630))\n\n### [6.4.2](https://github.com/Soontao/cds-mysql/compare/v6.4.1...v6.4.2) (2023-01-27)\n\n\n### Bug Fixes\n\n* default tenant deployment ([886ee6f](https://github.com/Soontao/cds-mysql/commit/886ee6f35a65310a33765f33cd14d562fb5fa7e6))\n\n### [6.4.1](https://github.com/Soontao/cds-mysql/compare/v6.4.0...v6.4.1) (2023-01-27)\n\n\n### Features\n\n* add perf test for sql builder ([94bd782](https://github.com/Soontao/cds-mysql/commit/94bd78240406a9d816ad315aae8af62d6464deda))\n* benchmark ([eac955a](https://github.com/Soontao/cds-mysql/commit/eac955ae97ac722c92edf94a31997061c8d2f679))\n* new benchmark for csn to entity ([4b678f4](https://github.com/Soontao/cds-mysql/commit/4b678f4e7fa4720058ed125f67e690730c68d505))\n* partial of [#206](https://github.com/Soontao/cds-mysql/issues/206) test ([45fa636](https://github.com/Soontao/cds-mysql/commit/45fa63642878263a1d63081094599c2d8976f501))\n* refactor deployment service ([cb8fb33](https://github.com/Soontao/cds-mysql/commit/cb8fb33df6194a37bb8a2d787c1fc033de969d1b))\n* withMockUserTenants option ([289b681](https://github.com/Soontao/cds-mysql/commit/289b681d6c14d2974b3ab3e4877a318c1064ecf6))\n\n\n### Bug Fixes\n\n* bench ci ([6e5014a](https://github.com/Soontao/cds-mysql/commit/6e5014aa163fad08cf42b991791ffe5683c29b7f))\n* bench ci ([7d7aa01](https://github.com/Soontao/cds-mysql/commit/7d7aa01be03f5c02a9e824a1400670f86c7cfa2b))\n* benchmark ci ([aef2641](https://github.com/Soontao/cds-mysql/commit/aef2641881103a53714c0c0e4f329c6427113c6e))\n* ci ([d38b252](https://github.com/Soontao/cds-mysql/commit/d38b2529122885fefcb6724aadad7c52e7802f0a))\n* ci ([f4c9223](https://github.com/Soontao/cds-mysql/commit/f4c922339055be54424a048cb0f9091bd8b80345))\n* **deps:** update dependency @newdash/graphlib to v3.1.4 ([#212](https://github.com/Soontao/cds-mysql/issues/212)) ([c618983](https://github.com/Soontao/cds-mysql/commit/c618983ec2d740a0bdcc60f73119a69882d34956))\n* extensibility ([d535490](https://github.com/Soontao/cds-mysql/commit/d535490e3cb0487257a3b0979d6c6ee20d80e776))\n\n## [6.4.0](https://github.com/Soontao/cds-mysql/compare/v6.4.0-alpha.0...v6.4.0) (2023-01-24)\n\n\n### Bug Fixes\n\n* cached CSN ([0e39d58](https://github.com/Soontao/cds-mysql/commit/0e39d58800c36cd20c00e341f9b4304a668ab904))\n* **deps:** update dependency glob to v8.1.0 ([#199](https://github.com/Soontao/cds-mysql/issues/199)) ([87beefa](https://github.com/Soontao/cds-mysql/commit/87beefa1df3700b268c9a305fab2e598e7cf04de))\n\n## [6.4.0-alpha.0](https://github.com/Soontao/cds-mysql/compare/v6.3.6...v6.4.0-alpha.0) (2023-01-14)\n\n\n### Features\n\n* cds@6.4.0 ([b644a62](https://github.com/Soontao/cds-mysql/commit/b644a621045d6c5b0ffd98acc9f11c995b2623b8))\n* support mtxs@1.4.x ([b0fec1b](https://github.com/Soontao/cds-mysql/commit/b0fec1b7915664ce1d1804f1cae2530ce64fbda0))\n\n\n### Bug Fixes\n\n* ci for karma of sflight ([b05d0af](https://github.com/Soontao/cds-mysql/commit/b05d0afc9e3d24283eae68f467aab272b9f1e08a))\n* **deps:** update dependency cds-internal-tool to v1.7.0 ([#198](https://github.com/Soontao/cds-mysql/issues/198)) ([1986394](https://github.com/Soontao/cds-mysql/commit/19863944c9a004a06d2b9b412270689b397c5fe8))\n* **deps:** update dependency luxon to v3.2.0 ([3449187](https://github.com/Soontao/cds-mysql/commit/3449187173ba7d561a8b6a21c3516882f8f2d3ec))\n* **deps:** update dependency luxon to v3.2.1 ([#191](https://github.com/Soontao/cds-mysql/issues/191)) ([8bff679](https://github.com/Soontao/cds-mysql/commit/8bff679e03147b0927fce03e66bb184ba3856d0a))\n* link ([760a8de](https://github.com/Soontao/cds-mysql/commit/760a8ded3a0f07032f7b77a710f571539cab5511))\n* link ci for sflight ([c2e3069](https://github.com/Soontao/cds-mysql/commit/c2e3069df5e757f0f011171c6955bb4673c25ba8))\n* mtxs version ([ec269e8](https://github.com/Soontao/cds-mysql/commit/ec269e872ce8854c3f72573b8e33ef065daccb1c))\n* upsert ([abe0976](https://github.com/Soontao/cds-mysql/commit/abe0976eb130e750252521851b2dba5e5c32c782))\n* upsert ([c413287](https://github.com/Soontao/cds-mysql/commit/c4132877cfd665b546ab7263d2a8ce2b2550d687))\n* ut ([5466471](https://github.com/Soontao/cds-mysql/commit/5466471eb12cdb52d66e5dcaf8fe48df815be0de))\n* ut 3 ([292c31c](https://github.com/Soontao/cds-mysql/commit/292c31c3185f6b2a9f037ed323b0286d66ee614f))\n* ut again ([4db263c](https://github.com/Soontao/cds-mysql/commit/4db263c363a1ceefc30783df4bbb85eb2da98005))\n\n### [6.3.6](https://github.com/Soontao/cds-mysql/compare/v6.3.6-3...v6.3.6) (2022-12-11)\n\n\n### Bug Fixes\n\n* datetime definition ([54bbc28](https://github.com/Soontao/cds-mysql/commit/54bbc281619b8e0eaa4e5dbb95796fa2b3de80a8))\n\n### [6.3.6-3](https://github.com/Soontao/cds-mysql/compare/v6.3.6-2...v6.3.6-3) (2022-12-11)\n\n\n### Bug Fixes\n\n* add more ut for timestamp ([1a57343](https://github.com/Soontao/cds-mysql/commit/1a5734301b405b99730c0847c8472d3ca4cd7896))\n* ci ([858436e](https://github.com/Soontao/cds-mysql/commit/858436e9f884e02a1889aee54ba69b0895b65450))\n* datetime ([94b962f](https://github.com/Soontao/cds-mysql/commit/94b962f08c7131f57a01cbcef684144590dddf98))\n* datetime again ([71bb3e8](https://github.com/Soontao/cds-mysql/commit/71bb3e88d7c641d1397592ee4f483bc0e9e5adf5))\n* ut ([6124787](https://github.com/Soontao/cds-mysql/commit/6124787ed6ea646ddd9648c6fb6f3e4e50a44b3a))\n\n### [6.3.6-2](https://github.com/Soontao/cds-mysql/compare/v6.3.6-1...v6.3.6-2) (2022-12-10)\n\n\n### Bug Fixes\n\n* optional dep ([133a4c6](https://github.com/Soontao/cds-mysql/commit/133a4c6aafa7a457666a952d97b0a79e2db21ca7))\n\n### [6.3.6-1](https://github.com/Soontao/cds-mysql/compare/v6.3.6-0...v6.3.6-1) (2022-12-10)\n\n\n### Bug Fixes\n\n* datetime 12 hour issue ([3c2e7cf](https://github.com/Soontao/cds-mysql/commit/3c2e7cf07ff750cb7bc1fa4c870c36f30ed5f14b))\n\n### [6.3.6-0](https://github.com/Soontao/cds-mysql/compare/v6.3.5...v6.3.6-0) (2022-12-10)\n\n\n### Bug Fixes\n\n* conversion type ([7854994](https://github.com/Soontao/cds-mysql/commit/785499498d1efa8e734132f9afcf47e359d0bd7f))\n* date time fractions ([9722686](https://github.com/Soontao/cds-mysql/commit/97226869c42c92a47e38ed0bc102368bd5f8977d))\n* datetime type ([29622ba](https://github.com/Soontao/cds-mysql/commit/29622bacddc4c84a156887887cbb507e2f3efb9a))\n* readme ([4b0de5c](https://github.com/Soontao/cds-mysql/commit/4b0de5c037788f8be2127e0aec7ba46079db4a9c))\n* readme doc ([f142370](https://github.com/Soontao/cds-mysql/commit/f1423708bfa25e2ea43f9418296e2392061cd089))\n* refactor csv ([24ce039](https://github.com/Soontao/cds-mysql/commit/24ce039c548ab5b3a3db8e7992e37dce03076398))\n* refactor migrate ([0719ae6](https://github.com/Soontao/cds-mysql/commit/0719ae6ffa7e62112982e77909a7a48950b7a030))\n* sql test ([68503c8](https://github.com/Soontao/cds-mysql/commit/68503c8bd9f7a707c4512fbe11b671327db346e1))\n* time zone date time ([788c2ac](https://github.com/Soontao/cds-mysql/commit/788c2ac75f515f77faa664dab443d1f3a4d305a6))\n* ut for insert/update ([f2540a9](https://github.com/Soontao/cds-mysql/commit/f2540a97969061565bb4506cd511acdc1052cc95))\n\n### [6.3.5](https://github.com/Soontao/cds-mysql/compare/v6.3.4...v6.3.5) (2022-12-10)\n\n\n### Bug Fixes\n\n* alias for sub query ([9229473](https://github.com/Soontao/cds-mysql/commit/9229473e28b806d2441f8e495c2d0aab14e6ca92))\n* datetime formation ([89ce233](https://github.com/Soontao/cds-mysql/commit/89ce233c2aa4da2c1289147e876f05954be1bda4))\n* doc ([66b7417](https://github.com/Soontao/cds-mysql/commit/66b74174fd091671920b4cbd191aa897e3d116fb))\n* sub query ([d171009](https://github.com/Soontao/cds-mysql/commit/d171009ffbd700ec2cb3cec3fa1df7967a7e69a4))\n* sub query for fiori element ([c3f10ce](https://github.com/Soontao/cds-mysql/commit/c3f10ce9ba30344615c3801df62d492a9d475383))\n\n### [6.3.4](https://github.com/Soontao/cds-mysql/compare/v6.3.4-3...v6.3.4) (2022-12-10)\n\n\n### Bug Fixes\n\n* add threshold of coverage ([ce359b5](https://github.com/Soontao/cds-mysql/commit/ce359b554fd2cd7250afb2f89639f53393d306d8))\n* better typeorm test ([a6bdaca](https://github.com/Soontao/cds-mysql/commit/a6bdacab57989ac2772fe270ef709456347e7ed1))\n* bigjs test ([63a48fd](https://github.com/Soontao/cds-mysql/commit/63a48fd42f948bff3b56793b95ab2a5bb053663d))\n* **deps:** update dependency cds-internal-tool to v1.6.14 ([d221835](https://github.com/Soontao/cds-mysql/commit/d2218355405b6ad0439ac32e952872c9b656db51))\n* **deps:** update dependency cds-internal-tool to v1.6.15 ([f054090](https://github.com/Soontao/cds-mysql/commit/f054090f46a8f72f80052c36263265b43ebb8de6))\n* **deps:** update dependency cds-internal-tool to v1.6.18 ([#172](https://github.com/Soontao/cds-mysql/issues/172)) ([845a26d](https://github.com/Soontao/cds-mysql/commit/845a26da0c8bad2e8a0c019fbf936cca647e8bee))\n* doc ([05e1a77](https://github.com/Soontao/cds-mysql/commit/05e1a77a724424b885c2949c956bf3933ec98cee))\n* doc ([c686695](https://github.com/Soontao/cds-mysql/commit/c6866952f9a6534e9f573c2cb7f8eaa05f790ed0))\n* index ut ([5067027](https://github.com/Soontao/cds-mysql/commit/5067027c4f571e078999fecd394d80674370c136))\n* new sql ut ([e83d9a5](https://github.com/Soontao/cds-mysql/commit/e83d9a541b19352aee8907a7ce1785121a0a62e7))\n* ut ([134f80a](https://github.com/Soontao/cds-mysql/commit/134f80a0ee48ab993ec09df00c609263cb365517))\n* ut and update builder ([c85aae4](https://github.com/Soontao/cds-mysql/commit/c85aae42aeb7914e819fceff58af9d56e2562a3b))\n* ut for execute.js ([f0577a3](https://github.com/Soontao/cds-mysql/commit/f0577a37d3f1374c80af96b42cbb1265f2e410d6))\n* ut for sql ([36f68b0](https://github.com/Soontao/cds-mysql/commit/36f68b09ef10ce6fb9ab32c2adce5923e4527d46))\n* ut for utils ([bc2df14](https://github.com/Soontao/cds-mysql/commit/bc2df14d2080e564bab7ba0fed2e3c6c4c863b96))\n* ut test for tenant ([89bdd9f](https://github.com/Soontao/cds-mysql/commit/89bdd9f2d1ff0214627f962439eb8364e8ad9794))\n\n### [6.3.4-3](https://github.com/Soontao/cds-mysql/compare/v6.3.4-2...v6.3.4-3) (2022-12-06)\n\n\n### Bug Fixes\n\n* builders ([ab2d837](https://github.com/Soontao/cds-mysql/commit/ab2d837df889481acd13c0d3d255c08c5497d63a))\n\n### [6.3.4-2](https://github.com/Soontao/cds-mysql/compare/v6.3.4-1...v6.3.4-2) (2022-12-06)\n\n\n### Bug Fixes\n\n* better support for mtxs ([1ea5c67](https://github.com/Soontao/cds-mysql/commit/1ea5c672260b19a6cdfa3f24950afd7c602e01da))\n* csv migration ([8ccfdd6](https://github.com/Soontao/cds-mysql/commit/8ccfdd6b78a300bb6cd625208ff484b4ae7a6383))\n* **deps:** update dependency cds-internal-tool to v1.6.1 ([c598bca](https://github.com/Soontao/cds-mysql/commit/c598bcafb2d368d0cbeb000663cff9db926d251c))\n* **deps:** update dependency cds-internal-tool to v1.6.12 ([789acdb](https://github.com/Soontao/cds-mysql/commit/789acdbada2b4db8985c8b68c9acfec0a9e54344))\n* **deps:** update dependency typeorm to v0.3.11 ([b41d16f](https://github.com/Soontao/cds-mysql/commit/b41d16f937cfbdb3c555f049ac11a2bae39d3681))\n* type for logger ([cc27358](https://github.com/Soontao/cds-mysql/commit/cc27358c8f3b4ff63db4903477a820fe00c50bc7))\n* type update ([fc55c2c](https://github.com/Soontao/cds-mysql/commit/fc55c2cdb95ccaf0716d3e11a21eaddbeb79edd1))\n\n### [6.3.4-1](https://github.com/Soontao/cds-mysql/compare/v6.3.4-0...v6.3.4-1) (2022-11-29)\n\n\n### Bug Fixes\n\n* **deps:** update dependency luxon to v3.1.1 ([#157](https://github.com/Soontao/cds-mysql/issues/157)) ([fc2f96b](https://github.com/Soontao/cds-mysql/commit/fc2f96bf80a8e6cb0e6d717ca85189e77e2adf2a))\n* improve CSV migration ([571bfaa](https://github.com/Soontao/cds-mysql/commit/571bfaa463c4e468a3d0faff4ee52901d6eb81e6))\n* improvement ([e68b59a](https://github.com/Soontao/cds-mysql/commit/e68b59ae5a74720d4ffbaf88fff3d43f30a23b60))\n\n### [6.3.4-0](https://github.com/Soontao/cds-mysql/compare/v6.3.3...v6.3.4-0) (2022-11-26)\n\n\n### Bug Fixes\n\n* datetime query for default value ([1fba41f](https://github.com/Soontao/cds-mysql/commit/1fba41f2f06db661c463f952ec36a7dfae31e7e9))\n\n### [6.3.3](https://github.com/Soontao/cds-mysql/compare/v6.3.2...v6.3.3) (2022-11-26)\n\n\n### Bug Fixes\n\n* improve the CSV migration ([267c3be](https://github.com/Soontao/cds-mysql/commit/267c3be1787dffce4b1e1a971c74b977e3e69456))\n\n### [6.3.2](https://github.com/Soontao/cds-mysql/compare/v6.3.1...v6.3.2) (2022-11-26)\n\n\n### Bug Fixes\n\n* **deps:** update dependency cds-internal-tool to v1.5.6 ([87af9df](https://github.com/Soontao/cds-mysql/commit/87af9df1dac8ccac02ca73cf518b6bbd900184ba))\n\n### [6.3.1](https://github.com/Soontao/cds-mysql/compare/v6.3.0...v6.3.1) (2022-11-19)\n\n\n### Bug Fixes\n\n* upsert ([85bb678](https://github.com/Soontao/cds-mysql/commit/85bb67895c72858900037344e668d883e887b630))\n\n## [6.3.0](https://github.com/Soontao/cds-mysql/compare/v6.3.0-beta.2...v6.3.0) (2022-11-19)\n\n\n### Features\n\n* refactor csv migration ([464324d](https://github.com/Soontao/cds-mysql/commit/464324db6686ef4a8ce6291adad21ef2f388198c))\n* refactor entity parser ([e22908c](https://github.com/Soontao/cds-mysql/commit/e22908c02c720a2806c5abc3ce4808c3838777fc))\n\n\n### Bug Fixes\n\n* test for tidb cluster index ([dfec8f0](https://github.com/Soontao/cds-mysql/commit/dfec8f041569d673f6d2ac48f2501a657b276019))\n* ut ([fbe5cbe](https://github.com/Soontao/cds-mysql/commit/fbe5cbe800cb6b6be55e5a954d404d8f6d53adfa))\n* ut ([49fb72b](https://github.com/Soontao/cds-mysql/commit/49fb72b1f532b58ca913b0ddc5dd1724f4f683d9))\n* ut ([433d1a9](https://github.com/Soontao/cds-mysql/commit/433d1a9738a2e4e63ab3769d47064080fcc47c5c))\n\n## [6.3.0-beta.2](https://github.com/Soontao/cds-mysql/compare/v6.3.0-beta.1...v6.3.0-beta.2) (2022-11-16)\n\n\n### Features\n\n* improve fiori feature ([3238631](https://github.com/Soontao/cds-mysql/commit/3238631b6dc4c9499bd26ae300d9c0d5017167ec))\n\n## [6.3.0-beta.1](https://github.com/Soontao/cds-mysql/compare/v6.3.0-beta.0...v6.3.0-beta.1) (2022-11-14)\n\n\n### Features\n\n* basic support for mtxs ([606510f](https://github.com/Soontao/cds-mysql/commit/606510f8566ac621e3b627649156a45373ba804c))\n* improve UPSERT ([d6faa89](https://github.com/Soontao/cds-mysql/commit/d6faa8997b1e56f12227542d95ad059becb749ea))\n* support UPSERT ([3396b95](https://github.com/Soontao/cds-mysql/commit/3396b958c6f740dd6d2e1d0642863afd63b99930))\n\n\n### Bug Fixes\n\n* issues of mtxs ([afb23b2](https://github.com/Soontao/cds-mysql/commit/afb23b2d96c86225e530efebd8ffd28732e7fe9c))\n* mtxs t0 migration ([96a1888](https://github.com/Soontao/cds-mysql/commit/96a1888d37b8dac4c14f9e010126b6ceeee49daa))\n* t0 deployment ([baf7543](https://github.com/Soontao/cds-mysql/commit/baf75434ff6a5e9aac3b75de78cb905f43cdddcb))\n* test ([457120a](https://github.com/Soontao/cds-mysql/commit/457120aeb9b26cf0bfd198f8ce0dd4814aa44a5f))\n\n## [6.3.0-beta.0](https://github.com/Soontao/cds-mysql/compare/v6.3.0-alpha.1...v6.3.0-beta.0) (2022-11-07)\n\n\n### Features\n\n* more column info from CSN ([7685b20](https://github.com/Soontao/cds-mysql/commit/7685b2032c01179d3bb0cec6d31f0b8e19920194))\n* support distinct count for analytic ([2c7fd87](https://github.com/Soontao/cds-mysql/commit/2c7fd875e699ae152d6b61bc345beb124ded7335))\n\n\n### Bug Fixes\n\n* iso time ([31503f9](https://github.com/Soontao/cds-mysql/commit/31503f93681cbb8d7ca1b696542cc8689f066210))\n\n## [6.3.0-alpha.1](https://github.com/Soontao/cds-mysql/compare/v6.3.0-alpha.0...v6.3.0-alpha.1) (2022-11-06)\n\n\n### Bug Fixes\n\n* clean db util ([14ee78b](https://github.com/Soontao/cds-mysql/commit/14ee78bcf7f8098264de96a23caacbffb115d249))\n* datetime import and time zone issue ([1652698](https://github.com/Soontao/cds-mysql/commit/16526986bca3f0b82d7fd9676f60f8b3a660540f))\n* ut ([1f65e5f](https://github.com/Soontao/cds-mysql/commit/1f65e5f3815f061270b44a935a684484b8344ef2))\n\n## [6.3.0-alpha.0](https://github.com/Soontao/cds-mysql/compare/v6.2.2...v6.3.0-alpha.0) (2022-11-06)\n\n\n### Features\n\n* cds 6.3.0 ([e367d7e](https://github.com/Soontao/cds-mysql/commit/e367d7eb2b7b4b3855ab2ba07c87223c9293b430))\n* locking reads ([4e93133](https://github.com/Soontao/cds-mysql/commit/4e93133ca7a8f74d2a2bfeee6a3e356048f058e2))\n* temporal aspect ([5b2f176](https://github.com/Soontao/cds-mysql/commit/5b2f176adbbdaca68d07e0aefab638bb8223472e))\n\n### [6.2.2](https://github.com/Soontao/cds-mysql/compare/v6.2.1...v6.2.2) (2022-10-30)\n\n\n### Bug Fixes\n\n* additional type for csv import ([7cae302](https://github.com/Soontao/cds-mysql/commit/7cae30204f9dcf7943e129ed4e9fc403c4037320))\n* cuid aspect issue ([c6e627f](https://github.com/Soontao/cds-mysql/commit/c6e627f807dfad850741c0a7cac26641867845bb))\n* fiori draft table metadata issue ([3dfbc6b](https://github.com/Soontao/cds-mysql/commit/3dfbc6b66917735672c60cc36e356135cf6682e3))\n* large binary ([f713195](https://github.com/Soontao/cds-mysql/commit/f713195218b496117411421269da5c44e6a00d70))\n* String length ([51839b9](https://github.com/Soontao/cds-mysql/commit/51839b9cf95fe8c20220c1aa1c57e2d2ce553a66))\n\n### [6.2.1](https://github.com/Soontao/cds-mysql/compare/v6.2.0...v6.2.1) (2022-10-29)\n\n\n### Bug Fixes\n\n* ut ([a8bc3f2](https://github.com/Soontao/cds-mysql/commit/a8bc3f2cbeea783d5e28584e424fa1d26671bf79))\n* var binary ([6e533f2](https://github.com/Soontao/cds-mysql/commit/6e533f23e40aab1ad427a039669fb30a7008f7f6))\n\n## [6.2.0](https://github.com/Soontao/cds-mysql/compare/v6.2.0-alpha.2...v6.2.0) (2022-10-28)\n\n\n### Bug Fixes\n\n* clob types ([7c33ecc](https://github.com/Soontao/cds-mysql/commit/7c33eccb36f96181c7f09cc0de9616b55c0be250))\n* keywords not supported ([4d99477](https://github.com/Soontao/cds-mysql/commit/4d99477031dc2b5f676186b9ccee6f7c539df397))\n* ut ([4e9b2f6](https://github.com/Soontao/cds-mysql/commit/4e9b2f6db5f4a67e7d83169550235b6bcf8e770a))\n* ut ([febe7a7](https://github.com/Soontao/cds-mysql/commit/febe7a7146f01a955318ef3fc520438952984795))\n\n## [6.2.0-alpha.2](https://github.com/Soontao/cds-mysql/compare/v6.2.0-alpha.1...v6.2.0-alpha.2) (2022-10-28)\n\n## [6.2.0-alpha.1](https://github.com/Soontao/cds-mysql/compare/v6.2.0-alpha.0...v6.2.0-alpha.1) (2022-10-28)\n\n\n### Bug Fixes\n\n* large string issue ([480d47c](https://github.com/Soontao/cds-mysql/commit/480d47cc1a7d69403e98773caa46d25e11af1253))\n\n## [6.2.0-alpha.0](https://github.com/Soontao/cds-mysql/compare/v6.1.0...v6.2.0-alpha.0) (2022-10-25)\n\n## [6.1.0](https://github.com/Soontao/cds-mysql/compare/v6.0.0...v6.1.0) (2022-08-12)\n\n\n### Features\n\n* arm 64 support ([1ddb6e8](https://github.com/Soontao/cds-mysql/commit/1ddb6e8312cd85c5f39c7d7d12d2d15ec0a79390))\n* support cds@6.1 ([f21661e](https://github.com/Soontao/cds-mysql/commit/f21661efc037284d508423b7d09a186e2d68532c))\n* update quote style ([66690f3](https://github.com/Soontao/cds-mysql/commit/66690f38c502e3429a526db519c7c88ef2e28962))\n\n\n### Bug Fixes\n\n* ci ([ba036d8](https://github.com/Soontao/cds-mysql/commit/ba036d8e6d1e2db328c1aab08552448b1f63bde3))\n* **deps:** update dependency luxon to v3 ([49455c1](https://github.com/Soontao/cds-mysql/commit/49455c1c15462481407360f87348f5997b411012))\n* lint ([534f8ed](https://github.com/Soontao/cds-mysql/commit/534f8ed69251fef4371f2041d47c6c5097b496fb))\n* lint ([901fe05](https://github.com/Soontao/cds-mysql/commit/901fe05841c3d8d29793674bffa79c56419f84f8))\n\n## [6.0.0](https://github.com/Soontao/cds-mysql/compare/v5.9.15...v6.0.0) (2022-07-09)\n\n\n### Features\n\n* support cds@6 ([af6a807](https://github.com/Soontao/cds-mysql/commit/af6a8073246603218124426f2c0f802ff248fbd6))\n\n\n### Bug Fixes\n\n* broken tests for cds@6 ([df05a94](https://github.com/Soontao/cds-mysql/commit/df05a9442886efb7487d7fb8db3f91adf78d4932))\n* **deps:** update dependency glob to v8 ([03fd1ec](https://github.com/Soontao/cds-mysql/commit/03fd1ecf913bb3faac2c5251641eba266bc29445))\n* fiori migration failed ([affabd1](https://github.com/Soontao/cds-mysql/commit/affabd147a2883561ce3db9957402dc87ce55f5c))\n\n### [5.9.15](https://github.com/Soontao/cds-mysql/compare/v5.9.14...v5.9.15) (2022-06-30)\n\n\n### Features\n\n* add lock for migration ([50f1294](https://github.com/Soontao/cds-mysql/commit/50f129407becc4f2af8d628c2499eaa791303c76))\n* renavate auto merge ([e72c610](https://github.com/Soontao/cds-mysql/commit/e72c610c0ae6ee0cfe209047fc18ebf593c44daf))\n\n\n### Bug Fixes\n\n* delete for alias ([87fad92](https://github.com/Soontao/cds-mysql/commit/87fad9297222b30be67ed18385d6a03ca5e243a6))\n\n### [5.9.14](https://github.com/Soontao/cds-mysql/compare/v5.9.13...v5.9.14) (2022-06-27)\n\n\n### Features\n\n* better CSV migrate ([d80662a](https://github.com/Soontao/cds-mysql/commit/d80662a53a221ee1578400db88edeb202cf05d74))\n* better CSV migration ([08da2ee](https://github.com/Soontao/cds-mysql/commit/08da2ee5b1f6d88393fd64e3a2231d6cad9e2e96))\n* partial CSV migration optimization ([c55bcbe](https://github.com/Soontao/cds-mysql/commit/c55bcbea19f74510023841c73fa860292992efdc))\n\n\n### Bug Fixes\n\n* lint ([0e0a361](https://github.com/Soontao/cds-mysql/commit/0e0a36127e07b3c2be08c1450d95a62ed6f9219f))\n* runtime support key ([42cd3bb](https://github.com/Soontao/cds-mysql/commit/42cd3bb5f183dc812ed8a264fab1b254bd4519c7))\n* runtime support table assert ([5011c13](https://github.com/Soontao/cds-mysql/commit/5011c131d1d0f7007a0396d5c29f69e9627656ba))\n* skip failed test ([3d313d4](https://github.com/Soontao/cds-mysql/commit/3d313d4bfda439ab6219d4116b1125bb4f8df149))\n\n### [5.9.13](https://github.com/Soontao/cds-mysql/compare/v5.9.12...v5.9.13) (2022-06-21)\n\n\n### Features\n\n* csv aspect pre-delivery ([418c363](https://github.com/Soontao/cds-mysql/commit/418c363cbec3be8a1aa416966938a444a5a93c5d))\n* eager pool for eager deploy ([a8a5d66](https://github.com/Soontao/cds-mysql/commit/a8a5d66e1f907bfe2ecbbb954308a004092a0906))\n\n### [5.9.12](https://github.com/Soontao/cds-mysql/compare/v5.9.11...v5.9.12) (2022-06-20)\n\n\n### Features\n\n* [#28](https://github.com/Soontao/cds-mysql/issues/28) eager deploy ([0f9bc1f](https://github.com/Soontao/cds-mysql/commit/0f9bc1fc339e75c2bac703a08d04fde26893fe67))\n\n\n### Bug Fixes\n\n* typo ([ef88b5c](https://github.com/Soontao/cds-mysql/commit/ef88b5c199fabd8eaa8526c3d5b1f3798f57412a))\n\n### [5.9.11](https://github.com/Soontao/cds-mysql/compare/v5.9.10...v5.9.11) (2022-06-15)\n\n\n### Features\n\n* deep insert test for composition ([f8fe60c](https://github.com/Soontao/cds-mysql/commit/f8fe60c6f718b7c7f12a1b5fc6997ec38b96f60a))\n* deep update test case ([edba2bc](https://github.com/Soontao/cds-mysql/commit/edba2bc89fd32a1f36741daedbb56f865e8bca0d))\n* provide snapshot for test ([5b97844](https://github.com/Soontao/cds-mysql/commit/5b978445ab69af6760fffc490cae09ff4dddea41))\n* validate for index ([f80ad77](https://github.com/Soontao/cds-mysql/commit/f80ad77abce4c682f626aa79089f8d3c1cadce99))\n\n### [5.9.10](https://github.com/Soontao/cds-mysql/compare/v5.9.10-0...v5.9.10) (2022-06-10)\n\n\n### Features\n\n* blob data csv provision ([18b9320](https://github.com/Soontao/cds-mysql/commit/18b932009b6539028f52a64982f00d7d1e292685))\n* multi tenancy ([25d0e3d](https://github.com/Soontao/cds-mysql/commit/25d0e3db8c0c0c19ad910033e0ef457bec366692))\n* remove cds_deploy ([b182ba3](https://github.com/Soontao/cds-mysql/commit/b182ba32769bb1ce702c4c1fff19e0435a6a6a1e))\n* rewrite CSV ([eb5be83](https://github.com/Soontao/cds-mysql/commit/eb5be835f24ab96f47729a7c4e1f5f5066f3f9c7))\n* test entity for csv upload ([8c4c5ce](https://github.com/Soontao/cds-mysql/commit/8c4c5ceedb0230300e694c9c5759fa9dbfa5e32e))\n* update share mysql tenant provider ([df9bc48](https://github.com/Soontao/cds-mysql/commit/df9bc48333af2da4efd7a23caeed0d8e54cfd337))\n\n\n### Bug Fixes\n\n* ci mysql port ([005f77e](https://github.com/Soontao/cds-mysql/commit/005f77e0a2724932a5e642c186e4f3099f467785))\n* lint ci ([29e0e13](https://github.com/Soontao/cds-mysql/commit/29e0e137aee8207c9f94f31eb6795f34f9b3aa9f))\n* old mysql database creation ([98c6d05](https://github.com/Soontao/cds-mysql/commit/98c6d05aa0a0d4ed7d7975b75ce9634cbbcaa6fa))\n\n### [5.9.10-0](https://github.com/Soontao/cds-mysql/compare/v5.9.9...v5.9.10-0) (2022-06-07)\n\n\n### Features\n\n* deploy to launch tenant ([7f9ffd4](https://github.com/Soontao/cds-mysql/commit/7f9ffd4057c39954cd100eaa6d9d50f421e7b40e))\n* tidb ci ([0a2491e](https://github.com/Soontao/cds-mysql/commit/0a2491e828a3ce459ebb8d3224fdfec940f09d84))\n* tidb image for test ([25bb300](https://github.com/Soontao/cds-mysql/commit/25bb3001f61200e1ee719e9a1ced5fc27af06904))\n* update ([9fd67b3](https://github.com/Soontao/cds-mysql/commit/9fd67b35c9d82a45753317763c786820960aea37))\n\n\n### Bug Fixes\n\n* ci ([43457f1](https://github.com/Soontao/cds-mysql/commit/43457f1229500611f933424e44bcc0ecd7d044e8))\n* env ([b35cc6e](https://github.com/Soontao/cds-mysql/commit/b35cc6e8bdc9c6cb5996daf911fd550911b1f6da))\n* script ([ebc75b9](https://github.com/Soontao/cds-mysql/commit/ebc75b92ad3cef230e74f93cf3b68665f3b27a70))\n* tidb ci ([a6c4f62](https://github.com/Soontao/cds-mysql/commit/a6c4f62d8210a5373f84fdf8dc0513b5dc8e3bae))\n* tidb ci ([6672e89](https://github.com/Soontao/cds-mysql/commit/6672e89d002d2d087d7a02cc3803ca151bb4b2e4))\n* tidb ci ([6643feb](https://github.com/Soontao/cds-mysql/commit/6643feb9cba708ab551dbf9e4c7881cf01fab744))\n* tidb ci ([a759a54](https://github.com/Soontao/cds-mysql/commit/a759a54a9e2b187fa4c7460bdcec448e72838f33))\n* tidb test ([9fe42cf](https://github.com/Soontao/cds-mysql/commit/9fe42cfe8c312cdd0b644e1c49206b6f4179f286))\n\n### [5.9.9](https://github.com/Soontao/cds-mysql/compare/v5.9.9-alpha.0...v5.9.9) (2022-05-16)\n\n\n### Bug Fixes\n\n* cache ([d235e94](https://github.com/Soontao/cds-mysql/commit/d235e943de4a914c4e4dd28683ed6bcb94dcdfb8))\n* ci ([c13be2d](https://github.com/Soontao/cds-mysql/commit/c13be2d12433059dde7b69018b2430f7a8ecd946))\n\n### [5.9.9-alpha.0](https://github.com/Soontao/cds-mysql/compare/v5.9.8...v5.9.9-alpha.0) (2022-04-15)\n\n\n### Features\n\n* better typeorm integration ([6a4b21b](https://github.com/Soontao/cds-mysql/commit/6a4b21ba542c2d02419e47471864a183706559e4))\n* cds for increment ID ([fec3a06](https://github.com/Soontao/cds-mysql/commit/fec3a06f2ba8a6a38e91620157102d7a76ec97c8))\n* cds incremental key ([2f849e1](https://github.com/Soontao/cds-mysql/commit/2f849e1bcc30292e30ff06f4104b485a7a47432a))\n\n\n### Bug Fixes\n\n* charset for utf8 ([7f9fd63](https://github.com/Soontao/cds-mysql/commit/7f9fd63baf8d9748633db865a8a0307d69ede28d))\n* update deprecated APIs ([cea3c23](https://github.com/Soontao/cds-mysql/commit/cea3c23580143b590012f851146c21809ffd47cf))\n\n### [5.9.8](https://github.com/Soontao/cds-mysql/compare/v5.9.7...v5.9.8) (2022-04-13)\n\n\n### Features\n\n* update for 5.9.x ([046bb9e](https://github.com/Soontao/cds-mysql/commit/046bb9e6c91eeb31a6b1272bbb276d4f5722e573))\n\n### [5.9.7](https://github.com/Soontao/cds-mysql/compare/v5.9.7-alpha.0...v5.9.7) (2022-03-08)\n\n\n### Bug Fixes\n\n* test ([9268fe3](https://github.com/Soontao/cds-mysql/commit/9268fe38ea563cc746d80901b8fbd3a4372b9425))\n\n### [5.9.7-alpha.0](https://github.com/Soontao/cds-mysql/compare/v5.9.6...v5.9.7-alpha.0) (2022-03-01)\n\n\n### Features\n\n* remove cds from dependency ([1fa5837](https://github.com/Soontao/cds-mysql/commit/1fa5837133ae9e876f1cdecb14e37d0c3f18226e))\n\n### [5.9.6](https://github.com/Soontao/cds-mysql/compare/v5.9.6-alpha.1...v5.9.6) (2022-02-24)\n\n### [5.9.6-alpha.1](https://github.com/Soontao/cds-mysql/compare/v5.9.6-alpha.0...v5.9.6-alpha.1) (2022-02-18)\n\n### [5.9.6-alpha.0](https://github.com/Soontao/cds-mysql/compare/v5.9.5...v5.9.6-alpha.0) (2022-01-25)\n\n\n### Bug Fixes\n\n* azure mysql information schema is not case sensitive ([d529df8](https://github.com/Soontao/cds-mysql/commit/d529df82ee2309b05f9eefae5d0303ed18cfedbc))\n\n### [5.9.5](https://github.com/Soontao/cds-mysql/compare/v5.9.4...v5.9.5) (2022-01-19)\n\n### [5.9.4](https://github.com/Soontao/cds-mysql/compare/v5.9.3...v5.9.4) (2022-01-18)\n\n### [5.9.3](https://github.com/Soontao/cds-mysql/compare/v5.9.2...v5.9.3) (2022-01-18)\n\n\n### Bug Fixes\n\n* deploy with double quote ([4e39682](https://github.com/Soontao/cds-mysql/commit/4e3968225607d0ba77968ee28850203caddb5e6f))\n\n### [5.9.2](https://github.com/Soontao/cds-mysql/compare/v5.9.1...v5.9.2) (2022-01-15)\n\n\n### Bug Fixes\n\n* env parser ([93587c0](https://github.com/Soontao/cds-mysql/commit/93587c095c0bef51f2dd06f9c631968a9d8556d8))\n\n### [5.9.1](https://github.com/Soontao/cds-mysql/compare/v5.9.0...v5.9.1) (2022-01-15)\n\n\n### Bug Fixes\n\n* ssl deploy ([86dc7cb](https://github.com/Soontao/cds-mysql/commit/86dc7cb068362da53eb8b08d0c62ff4e8b7eed8c))\n\n## [5.9.0](https://github.com/Soontao/cds-mysql/compare/v5.8.0...v5.9.0) (2022-01-15)\n\n\n### Features\n\n* enhance env reader ([600dc80](https://github.com/Soontao/cds-mysql/commit/600dc804e13b4f4953d82a830490cc6ef9d5f3d2))\n* env reader ([f894083](https://github.com/Soontao/cds-mysql/commit/f89408399710c1bcfb0f5042bb1e5402fba86b3c))\n* support ssl encryped ([c87cf92](https://github.com/Soontao/cds-mysql/commit/c87cf9213de438f6edf912d6ab884e63ca185ba3))\n\n## [5.8.0](https://github.com/Soontao/cds-mysql/compare/v5.4.5...v5.8.0) (2021-12-11)\n\n\n### Features\n\n* upgrade @sap/cds ([3c4d619](https://github.com/Soontao/cds-mysql/commit/3c4d619f5aee974b479d5a056a6ccf9d926d6f7a))\n\n\n### Bug Fixes\n\n* lint ([fbd7ef2](https://github.com/Soontao/cds-mysql/commit/fbd7ef2e2aea8a6ec6169650142648b4d6df80b1))\n* upgrade mysql2 from 2.3.2 to 2.3.3 ([a14fcb8](https://github.com/Soontao/cds-mysql/commit/a14fcb85ca4f00a1569c8e02f3a7ae8a83c18f60))\n* upgrade typeorm from 0.2.38 to 0.2.40 ([8c23ff1](https://github.com/Soontao/cds-mysql/commit/8c23ff1beba6cf2dc9995210b662ba0d25b5691c))\n\n### [5.4.5](https://github.com/Soontao/cds-mysql/compare/v5.4.4...v5.4.5) (2021-11-28)\n\n\n### Bug Fixes\n\n* CSV migration ([e7e952d](https://github.com/Soontao/cds-mysql/commit/e7e952dade1caacb8107dcb8f3dd3aaa4f360404))\n\n### [5.4.4](https://github.com/Soontao/cds-mysql/compare/v5.4.3...v5.4.4) (2021-10-27)\n\n\n### Bug Fixes\n\n* upgrade typeorm from 0.2.34 to 0.2.38 ([cc935a1](https://github.com/Soontao/cds-mysql/commit/cc935a157998c3924f06ec816d0c66e969edbd09))\n\n### [5.4.3](https://github.com/Soontao/cds-mysql/compare/v5.4.2...v5.4.3) (2021-10-19)\n\n### [5.4.2](https://github.com/Soontao/cds-mysql/compare/v5.4.1...v5.4.2) (2021-10-15)\n\n\n### Features\n\n* migrate csv test ([c7c3549](https://github.com/Soontao/cds-mysql/commit/c7c354975015757e0d233cea5f7fb891c1b3a75b))\n* update data migration logic ([3fc53fe](https://github.com/Soontao/cds-mysql/commit/3fc53fe9b35699c90d283471144a4b8780c68c40))\n* virtual element & doc ([44f2bba](https://github.com/Soontao/cds-mysql/commit/44f2bba475093a983be5d83ff6d3de2c46b1330f))\n* **logger:** add logger for migration ([09c5027](https://github.com/Soontao/cds-mysql/commit/09c50278dcad619549db9e8c112ea8d197ca5717))\n\n### [5.4.1](https://github.com/Soontao/cds-mysql/compare/v5.4.0...v5.4.1) (2021-10-12)\n\n\n### Bug Fixes\n\n* sql builder issue ([9d48f62](https://github.com/Soontao/cds-mysql/commit/9d48f62aa97ac142ddb8fbcb0bc7659579549f69))\n\n## [5.4.0](https://github.com/Soontao/cds-mysql/compare/v5.3.0...v5.4.0) (2021-10-12)\n\n\n### Features\n\n* support env credential for deployment ([3202536](https://github.com/Soontao/cds-mysql/commit/320253600f362277116d44900c5d85f49f6d8f65))\n\n## [5.3.0](https://github.com/Soontao/cds-mysql/compare/v5.2.3...v5.3.0) (2021-10-11)\n\n\n### Features\n\n* support env configuration ([2617fa6](https://github.com/Soontao/cds-mysql/commit/2617fa6d024ba8848512cd2cb3986ef3578a3bb3))\n\n\n### Bug Fixes\n\n* deploy issue ([8692ad2](https://github.com/Soontao/cds-mysql/commit/8692ad2fcc1f7b418b610eea87e67b837e9b72bb))\n* error ([8b0f5f8](https://github.com/Soontao/cds-mysql/commit/8b0f5f82ea516379c7859be56d9d77e30e4be8ca))\n* issue for TIMESTAMP_TEXT type ([8ddaf19](https://github.com/Soontao/cds-mysql/commit/8ddaf19390e09a04566130148828140783762355))\n* replace the quotingStyle function ([18da22c](https://github.com/Soontao/cds-mysql/commit/18da22ce90ccaf405a05da82a4bfb89617b5d417))\n* type issue ([3a3dd84](https://github.com/Soontao/cds-mysql/commit/3a3dd84f8271e6800bb0df4a7be96eae84cb3226))\n\n### [5.2.3](https://github.com/Soontao/cds-mysql/compare/v5.2.2...v5.2.3) (2021-09-30)\n\n\n### Bug Fixes\n\n* issue after upgrade to cds 5.5 ([fbf2fb2](https://github.com/Soontao/cds-mysql/commit/fbf2fb2ece7a62b01ec159811f648691a9b36bd0))\n* type ([81483f3](https://github.com/Soontao/cds-mysql/commit/81483f3c83fce092e274cc3f3d288b564e610352))\n\n### [5.2.2](https://github.com/Soontao/cds-mysql/compare/v5.2.1...v5.2.2) (2021-09-12)\n\n\n### Bug Fixes\n\n* upgrade luxon from 1.27.0 to 1.28.0 ([393845b](https://github.com/Soontao/cds-mysql/commit/393845b626ca1f6e4e8a57a7c95b1556b1c360fc))\n* upgrade mysql2 from 2.2.5 to 2.3.0 ([41c36f8](https://github.com/Soontao/cds-mysql/commit/41c36f8eb4f62f27d7b3100133929ff8bc8eae74))\n\n### [5.2.1](https://github.com/Soontao/cds-mysql/compare/v5.1.0...v5.2.1) (2021-07-27)\n\n\n### Bug Fixes\n\n* function error ([8280c81](https://github.com/Soontao/cds-mysql/commit/8280c81e343f8b61bd5a32f680a7580fcc13c5c8))\n\n## [5.1.0](https://github.com/Soontao/cds-mysql/compare/v0.1.8...v5.1.0) (2021-05-18)\n\n\n### Features\n\n* boolean type enhance ([8d8a71c](https://github.com/Soontao/cds-mysql/commit/8d8a71c87fe6678ded814e0e30ab4b71d305d50d))\n* i18n support are disabled from 5.x ([71a692a](https://github.com/Soontao/cds-mysql/commit/71a692ab83e5c06965f188fff6f279a118b7c048))\n* localized data test ([67fb9f5](https://github.com/Soontao/cds-mysql/commit/67fb9f540d1f4ac72016cbf837b765eed08fd39a))\n* migrate to cds 5.0 ([1ed93a7](https://github.com/Soontao/cds-mysql/commit/1ed93a7a9f04cf9b2abddd605498072ccff636b3))\n\n\n### Bug Fixes\n\n* type ([c6d086d](https://github.com/Soontao/cds-mysql/commit/c6d086d1e6b470f67b32fdeecbbcdf8b4b97e8eb))\n\n### [0.1.8](https://github.com/Soontao/cds-mysql/compare/v0.1.7...v0.1.8) (2021-03-10)\n\n\n### Features\n\n* enhance csv provision ([d3ed134](https://github.com/Soontao/cds-mysql/commit/d3ed1340558bf26dc1b14d6af23bd12901d838af))\n* enhance migration ([d61687f](https://github.com/Soontao/cds-mysql/commit/d61687fb54ebf17cd577afc2e630d5a05045ed98))\n\n\n### Bug Fixes\n\n* database difference between old/new mysql ([bca0b99](https://github.com/Soontao/cds-mysql/commit/bca0b990a2eeec8e4750406b5cd19e15edc59872))\n\n### [0.1.7](https://github.com/Soontao/cds-mysql/compare/v0.1.6...v0.1.7) (2021-03-03)\n\n\n### Features\n\n* atttachment support ([5dbc153](https://github.com/Soontao/cds-mysql/commit/5dbc1535a0457b0ef067cd6865a54cffb865ed38))\n* csv migration ([68838e1](https://github.com/Soontao/cds-mysql/commit/68838e1fb85a74ebcb086c389b739341864246d8))\n* csv provision data import ([2ed2dfb](https://github.com/Soontao/cds-mysql/commit/2ed2dfb792a3532fe55839b01c3fd204cbf22a17))\n* enhance db migration ([08f5af6](https://github.com/Soontao/cds-mysql/commit/08f5af6a23e9b9440796e76432686ba8e49dee89))\n* enhance initialize data provision ([317141e](https://github.com/Soontao/cds-mysql/commit/317141e0713756c9b0c2ad0af542f353947e49f4))\n* warning for 'date' column default value ([d9bd16d](https://github.com/Soontao/cds-mysql/commit/d9bd16d0008ddccfa0ffb4084181a61a336f2abf))\n\n\n### Bug Fixes\n\n* ci ([b73894f](https://github.com/Soontao/cds-mysql/commit/b73894f2de8a58f842e287480fce833155bf6cbc))\n* ci db name ([a312701](https://github.com/Soontao/cds-mysql/commit/a3127015639a7f96048390e94acdc40d3deb4965))\n* current date issue for mysql 8 ([835fa40](https://github.com/Soontao/cds-mysql/commit/835fa40650c1360e3e3b5d1d70e836a24443886c))\n* date for mysql 8 again ([f9c7fdc](https://github.com/Soontao/cds-mysql/commit/f9c7fdc36132a924c1a46e37e0aec82d3b206da7))\n* mysql 8 current_timestamp issue ([b50c013](https://github.com/Soontao/cds-mysql/commit/b50c01326757d3b588daa47472e8b41e7a348d63))\n* ut again ([455f5de](https://github.com/Soontao/cds-mysql/commit/455f5de8af43345c2835b44feec3442c495775b0))\n* ut firstly ([57b4f42](https://github.com/Soontao/cds-mysql/commit/57b4f42854235aa9c54f465204c2a33420ca8828))\n* ut for key limitation ([db02773](https://github.com/Soontao/cds-mysql/commit/db02773c13ed191e76900acb831e6c4e371fb916))\n* **ci:** issue ([b0e78a3](https://github.com/Soontao/cds-mysql/commit/b0e78a36651b412ad103117e2d00077b4370beb8))\n\n### [0.1.6](https://github.com/Soontao/cds-mysql/compare/v0.1.5...v0.1.6) (2021-02-23)\n\n\n### Bug Fixes\n\n* large size table with default size ([1a83ca5](https://github.com/Soontao/cds-mysql/commit/1a83ca505a7cb95eda91d0564d5c9ad638f01ec2))\n\n### [0.1.5](https://github.com/Soontao/cds-mysql/compare/v0.1.4...v0.1.5) (2021-02-23)\n\n\n### Features\n\n* deploy ([bfbfa86](https://github.com/Soontao/cds-mysql/commit/bfbfa8625e57c9fec7c275f98ec19990e5442bc0))\n\n### [0.1.4](https://github.com/Soontao/cds-mysql/compare/v0.1.3...v0.1.4) (2021-02-23)\n\n\n### Features\n\n* cds deploy ([c237a76](https://github.com/Soontao/cds-mysql/commit/c237a764d8f7ab4697371809b47336fbfbc63782))\n\n### [0.1.3](https://github.com/Soontao/cds-mysql/compare/v0.1.2...v0.1.3) (2021-02-22)\n\n\n### Features\n\n* migrate with typeorm ([37b7e00](https://github.com/Soontao/cds-mysql/commit/37b7e005876c8ba318dbc25f1cd58b3588c4ba7c))\n* migration with view ([fda5c1a](https://github.com/Soontao/cds-mysql/commit/fda5c1ad03d059557160d5c3288e35d9973016d8))\n* reverse SQL to entity schema ([e21c737](https://github.com/Soontao/cds-mysql/commit/e21c7372ea4480b0bfddb73201821687c42d3b19))\n\n\n### Bug Fixes\n\n* charset for tables ([4675cd0](https://github.com/Soontao/cds-mysql/commit/4675cd067d2f050ac4a8f492adb28daa568eee60))\n* contains function not work ([30418b1](https://github.com/Soontao/cds-mysql/commit/30418b18abc056497a0f29711fda96fa862e2d2c))\n\n### [0.1.2](https://github.com/Soontao/cds-mysql/compare/v0.0.2...v0.1.2) (2021-02-10)\n\n\n### Bug Fixes\n\n* npm release script ([c963f5b](https://github.com/Soontao/cds-mysql/commit/c963f5bc5a36e4a02a6f6055ee0142f8598e08c1))\n\n### 0.0.2 (2021-02-10)\n\n\n### Features\n\n* basic support ([5540f8c](https://github.com/Soontao/cds-mysql/commit/5540f8cb6e904c52ad73e2dc226afb64de86cf97))\n* bulk insert ([e0de5d0](https://github.com/Soontao/cds-mysql/commit/e0de5d020296d147e995f890c75ec1e5ed72c320))\n* CRUD with mysql ([7b00627](https://github.com/Soontao/cds-mysql/commit/7b006277b6e2ef8bb1a7d442186c639f72c61fcb))\n* enhance datetime processing ([32dea11](https://github.com/Soontao/cds-mysql/commit/32dea110ce1de688b9e9afcaabe464fb2ba9da59))\n* improve query with function ([4b455de](https://github.com/Soontao/cds-mysql/commit/4b455de61cc5d26881995c65b5bc77613622180b))\n* integration test & insert timestamp ([ea6d534](https://github.com/Soontao/cds-mysql/commit/ea6d534b7ab1090d7641a5b121b8e6ebe389ada3))\n* refactor some code ([110925f](https://github.com/Soontao/cds-mysql/commit/110925f436bcac0777e09ef8d8e552091d17cc0d))\n\n\n### Bug Fixes\n\n* ci ([14af6b4](https://github.com/Soontao/cds-mysql/commit/14af6b4fa4e1aa2a89d764d0ad02e649a47e3d4e))\n* ci ([1aba0eb](https://github.com/Soontao/cds-mysql/commit/1aba0eb0b809faeb80608bd1b79d06f99928ea9c))\n* ci issue ([2747a8e](https://github.com/Soontao/cds-mysql/commit/2747a8e2674b2e250f0c74a194dbd8b8ba2d1b7c))\n* datetime ([0beea55](https://github.com/Soontao/cds-mysql/commit/0beea559b444d0ad8930b92f0cb1db7d10538d0a))\n* issue ([541aa01](https://github.com/Soontao/cds-mysql/commit/541aa01c59a19267464eff95c1c5fc141f14ed59))\n* rename ([f327e71](https://github.com/Soontao/cds-mysql/commit/f327e71b01a89e83f13fe42071afa31c2a47d355))\n"},{"name":"cds-launchpad-plugin","version":"2.2.0","description":"Launchpad Plugin for demo / development / testing SAP CAP-based projects","main":"dist/index.js","types":"dist/index","scripts":{"dev":"cds-ts run ./test/sample --with-mocks --in-memory?","dev:cdspluginui5deps":"pnpm --filter cap-server-cds-plugin-ui5-deps start","dev:cdspluginui5":"pnpm --filter cap-server-cds-plugin-ui5 start","dev:sapux":"pnpm --filter cap-server-sapux start","devold":"ts-node ./test/server.ts","prepublish":"tsc","watch":"tsc -w","test":"pnpm --filter http-test test","prepare":"husky install && chmod ug+x .husky/*"},"repository":{"type":"git","url":"git+https://github.com/geert-janklaps/cds-launchpad-plugin.git"},"files":["dist","templates","cds-plugin.js","decs.d.ts","LICENSE","README.md"],"keywords":["cds","cap","launchpad","fiori","sapui5","openui5"],"author":"Geert-Jan Klaps","license":"MIT","bugs":{"url":"https://github.com/geert-janklaps/cds-launchpad-plugin/issues"},"homepage":"https://github.com/geert-janklaps/cds-launchpad-plugin#readme","dependencies":{"@sap/cds-dk":">=4.3","dot-properties":"^1.0.1"},"peerDependencies":{"@sap/cds":">=5","@sap/cds-dk":">=4.3","express":">=4"},"devDependencies":{"@commitlint/cli":"^18.6.0","@commitlint/config-conventional":"^18.6.0","@sap/cds":">=5.7.5","@types/body-parser":"^1.19.2","@types/express":"^4.17.13","express":"^4.17.2","husky":"^9.0.0","sqlite3":"^5.0.2","ts-node":"^10.4.0","typescript":"^4.5.4"},"cds":{"launchpad":{"basePath":"/$launchpad","theme":"sap_horizon"}},"type":"plugin","tags":["launchpad"],"gitHubOwner":"geert-janklaps","gitHubRepo":"cds-launchpad-plugin","licenseSource":"mit","forks":13,"stars":11,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2022-03-13T16:33:21.044Z","updatedAt":"2024-05-27T15:27:07.748Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/geert-janklaps/cds-launchpad-plugin/tree/main/","readme":"# cds-launchpad-plugin\nLaunchpad Plugin for demo / development / testing SAP Cloud Application Programming Model-based projects\n\n## Installation\n\nIn your project, run following command:\n```sh\nnpm install --save-dev cds-launchpad-plugin\n```\n\n## Usage\n\n### SAP Cloud Application Programming (CAP) Model 6.7.0 or higher\n\nThe cds-launchpad-plugin is using the SAP Cloud Application Programming Model plugin technique. \nInstalling the plugin as a dev dependency (see installation) is sufficient to enable the plugin automatically.\n\n#### Configuration\n\nOptionally you can configure the cds-launchpad-plugin by adding following configuration to your package.json file.\n\n```jsonc\n\"cds\": {\n  \"launchpad\": {\n    \"theme\":\"sap_horizon\", // SAPUI5 Theme\n    \"version\": \"1.120.1\", // SAPUI5 Version\n    \"basePath\": \"\", // Path under which you want the sandbox to be served\n    \"appConfigPath\": \"\", // External sandbox appconfig json file to be merged with generated appconfig\n    \"locale\": \"\", // Language to be used for the sandbox environment\n    \"template\": \"\" ,// 'legacy' (non-async launchpad, default) or 'async' (async launchpad),\n    \"modulePaths\": \"\" // object with module paths to be used in the launchpad.html file for \"sap-ushell-config\"\n  }\n}\n```\n\nThe sandbox launchpad will be served on `/$launchpad`, like http://localhost:4004/$launchpad\n\n### SAP Cloud Application Programming (CAP) Model 6.7.0 or lower\n\nHave this in your [`server.js`](https://cap.cloud.sap/docs/node.js/cds-server#custom-server-js):\n\n```js\nconst cds = require ('@sap/cds');\n\n/* For releases before cds 7:\nreplace:\ncds.env.production === false\nwith:\nprocess.env.NODE_ENV !== 'production'\n*/\nif (cds.env.production === false){\n    const {cds_launchpad_plugin} = require('cds-launchpad-plugin');\n\n    // Enable launchpad plugin\n    cds.once('bootstrap',(app)=>{\n        const handler = new cds_launchpad_plugin();\n        app.use(handler.setup({theme:'sap_horizon', version: '1.120.1'}));\n    });\n}\n```\n\nThe sandbox launchpad will be served on `/$launchpad`, like http://localhost:4004/$launchpad\n\n#### Configuration\n\nCall `setup({...})` method with the following object (configuration object can be omitted):\n```jsonc\n{\n  theme:'sap_horizon', // SAPUI5 Theme\n  version: '1.99.0', // SAPUI5 Version\n  basePath: '', // Path under which you want the sandbox to be served\n  appConfigPath: '', // External sandbox appconfig json file to be merged with generated appconfig\n  locale: '', // Language to be used for the sandbox environment\n  template: '', // 'legacy' (non-async launchpad) or 'async' (async launchpad)\n  modulePaths: '' // object with module paths to be used in the launchpad.html file for \"sap-ushell-config\"\n}\n```\n\n## External references\n\nSolution overview: https://blogs.sap.com/2022/03/14/a-fiori-launchpad-sandbox-for-all-your-cap-based-projects-overview/\n\nSample project setup: https://blogs.sap.com/2022/03/14/a-fiori-launchpad-sandbox-for-all-your-cap-based-projects-sample-project-setup/\n\n## Development\n\n### Prerequisites\n- node 18\n- pnpm\n\n### Setup\n```sh\ngit clone https://github.com/geert-janklaps/cds-launchpad-plugin\ncd cds-launchpad-plugin\npnpm install\npnpm watch\n# run cds server\npnpm dev:sapux\n# go to http://localhost:4004/$launchpad\n```\n","downloadsCurrentMonth":1973,"downloadsCurrentFortnight":1115,"downloads365":37860,"downloadsFortnightGrowth":29.95,"downloadsHistory":[{"yearMonth":"2023-07","downloads":3952},{"yearMonth":"2023-08","downloads":3686},{"yearMonth":"2023-09","downloads":5222},{"yearMonth":"2023-10","downloads":5533},{"yearMonth":"2023-11","downloads":5613},{"yearMonth":"2023-12","downloads":3246},{"yearMonth":"2024-01","downloads":1332},{"yearMonth":"2024-02","downloads":1274},{"yearMonth":"2024-03","downloads":1106},{"yearMonth":"2024-04","downloads":1445},{"yearMonth":"2024-05","downloads":1980}],"npmlink":"https://www.npmjs.com/package/cds-launchpad-plugin","versions":[{"version":"created","date":"2022-03-13T16:33:21.044Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/created","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2022-03-13T16:33:21.224Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-05-27T15:27:07.748Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/modified","changelog":"","sourceType":"plugin"},{"version":"1.0.1","date":"2022-03-13T16:41:01.876Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.1","changelog":"","sourceType":"plugin"},{"version":"1.0.2","date":"2022-03-14T21:25:15.388Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.2","changelog":"","sourceType":"plugin"},{"version":"1.0.3","date":"2022-03-15T19:21:39.857Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.3","changelog":"","sourceType":"plugin"},{"version":"1.0.4","date":"2022-03-20T14:28:57.356Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.4","changelog":"","sourceType":"plugin"},{"version":"1.0.5","date":"2022-05-15T15:36:05.440Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.5","changelog":"","sourceType":"plugin"},{"version":"1.0.6","date":"2022-06-26T11:49:23.042Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.6","changelog":"","sourceType":"plugin"},{"version":"1.0.7","date":"2022-07-13T17:45:59.616Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.7","changelog":"","sourceType":"plugin"},{"version":"1.0.8","date":"2022-11-09T18:20:45.645Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.8","changelog":"","sourceType":"plugin"},{"version":"1.0.9","date":"2023-07-06T15:05:15.528Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/1.0.9","changelog":"","sourceType":"plugin"},{"version":"2.0.0","date":"2023-11-04T14:31:36.236Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.0.0","changelog":"","sourceType":"plugin"},{"version":"2.0.1","date":"2023-11-29T21:33:29.420Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.0.1","changelog":"","sourceType":"plugin"},{"version":"2.0.2","date":"2023-12-08T22:16:12.394Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.0.2","changelog":"","sourceType":"plugin"},{"version":"2.1.2","date":"2023-12-09T20:22:57.396Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.2","changelog":"","sourceType":"plugin"},{"version":"2.1.3","date":"2023-12-14T07:33:36.464Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.3","changelog":"","sourceType":"plugin"},{"version":"2.1.4","date":"2023-12-18T18:36:37.512Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.4","changelog":"","sourceType":"plugin"},{"version":"2.1.5","date":"2023-12-18T19:00:12.104Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.5","changelog":"","sourceType":"plugin"},{"version":"2.1.6","date":"2024-01-28T14:29:55.529Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.6","changelog":"","sourceType":"plugin"},{"version":"2.1.7","date":"2024-01-29T18:46:14.492Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.7","changelog":"","sourceType":"plugin"},{"version":"2.1.8","date":"2024-02-12T17:14:39.943Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.1.8","changelog":"","sourceType":"plugin"},{"version":"2.2.0","date":"2024-05-27T15:27:07.373Z","link":"https://www.npmjs.com/package/cds-launchpad-plugin/v/2.2.0","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\n## [2.2.0](https://github.com/geert-janklaps/cds-launchpad-plugin/compare/v2.1.8...v2.2.0) (2024-05-27)\n\n\n### Features\n\n* define `modulePaths` in launchpad.html file ([#44](https://github.com/geert-janklaps/cds-launchpad-plugin/issues/44)) ([3a5429d](https://github.com/geert-janklaps/cds-launchpad-plugin/commit/3a5429d80a9c590415ac74c38a2bcee2c59a5792))\n\n## [2.1.8](https://github.com/geert-janklaps/cds-launchpad-plugin/compare/v2.1.7...v2.1.8) (2024-02-12)\n\n\n### Bug Fixes\n\n* basepath as default page issue with search parameters ([a72f5c2](https://github.com/geert-janklaps/cds-launchpad-plugin/commit/a72f5c22b9267e586bb1812fd33f030a8e220077))\n\n## [2.1.7](https://github.com/geert-janklaps/cds-launchpad-plugin/compare/v2.1.6...v2.1.7) (2024-01-29)\n\n\n### Bug Fixes\n\n* only use apps from deps if `cds-plugin-ui5` is present ([#35](https://github.com/geert-janklaps/cds-launchpad-plugin/issues/35)) ([41be0e2](https://github.com/geert-janklaps/cds-launchpad-plugin/commit/41be0e28ef2e64c56f4fe82ab7bcfccc26443d0d))\n"},{"name":"cds-routing-handlers","version":"3.0.7","description":"Package to route and implement CDS handlers via a class based approach in Typescript.","main":"lib/index.js","repository":"https://github.com/mrbandler/cds-routing-handlers","author":"mrbandler <mrbandler@fivefingergames.com>","license":"MIT","readme":"# CDS Routing-Handlers\r\n\r\n[![npm version](https://badge.fury.io/js/cds-routing-handlers.svg)](https://badge.fury.io/js/cds-routing-handlers) [![Actions Status](https://github.com/mrbandler/cds-routing-handlers/workflows/build/badge.svg)](https://github.com/mrbandler/cds-routing-handlers/actions) [![GitHub License](https://img.shields.io/github/license/mrbandler/cds-routing-handlers)](https://github.com/mrbandler/cds-routing-handlers/blob/master/LICENSE)\r\n\r\n**Package to route and implement CDS handlers via a class based system in Typescript.**\r\n\r\n## Table of Content\r\n\r\n1. [Installation](#1-installation) 💻\r\n2. [Usage](#2-usage) ⌨️\r\n3. [Decorator Reference](#3-decorator-reference) 📋\r\n4. [Example](#4-example) 🧷\r\n5. [Bugs and Features](#5-bugs-and-features) 🐞💡\r\n6. [License](#6-license) 📃\r\n\r\n## 1. Installation\r\n\r\n```bash\r\n$ npm install cds-routing-handlers\r\n\r\nOR\r\n\r\n$ yarn add cds-routing-handlers\r\n```\r\n\r\nBefore you can use it you also need to install `reflect-metadata`.\r\n\r\n```bash\r\n$ npm install reflect-metadata\r\n\r\nOR\r\n\r\n$ yarn add reflect-metadata\r\n```\r\n\r\nOnce installed, make sure you import it before using CDS Routing-Handlers.\r\nMy recommendation would be to place the import at the top of your main entry file.\r\n\r\n```typescript\r\nimport \"reflect-metadata\";\r\n```\r\n\r\nFinally, one last step is required to use it. We need to tell the Typescript compiler to use decorators.\r\n\r\nPlace the following settings in your `tsconfig.json`:\r\n\r\n```json\r\n{\r\n    \"emitDecoratorMetadata\": true,\r\n    \"experimentalDecorators\": true\r\n}\r\n```\r\n\r\n## 2. Usage\r\n\r\n**Before:**\r\n\r\n```javascript\r\nconst express = require(\"express\");\r\n\r\nfunction registerHandlers(srv) {\r\n    srv.on(\"READ\", \"Entity\", async () => {\r\n        // Handle the read here...\r\n    });\r\n}\r\n\r\nconst server = express();\r\ncds.serve(\"./gen/\")\r\n    .at(\"odata\")\r\n    .in(server)\r\n    .with(registerHandlers);\r\n```\r\n\r\n**With CDS Routing-Handlers:**\r\n\r\n```typescript\r\n// ./handlers/entity.handler.ts\r\n\r\nimport { Handler, OnRead } from \"cds-routing-handlers\";\r\n\r\n@Handler(\"Entity\")\r\nexport class EntityHandler {\r\n    @OnRead()\r\n    public async read(@Srv() srv: any, @Req() req: any): Promise<void> {\r\n        // Handle the read here...\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\n// ./server.ts\r\n\r\nimport express from \"express\";\r\nimport { createCombinedHandler } from \"cds-routing-handlers\";\r\n\r\nconst server = express();\r\n\r\n// Either:\r\nconst handler = createCombinedHandler({\r\n    handler: [__dirname + \"/handlers/**/*.js\"],\r\n});\r\n\r\ncds.serve(\"./gen/\")\r\n    .at(\"odata\")\r\n    .in(server)\r\n    .with(handler);\r\n\r\n// OR\r\n\r\nimport { EntityHandler } from \"./handlers/entity.handler.ts\";\r\n\r\nconst handler = createCombinedHandler({\r\n    handler: [EntityHandler],\r\n});\r\n\r\ncds.serve(\"./gen/\")\r\n    .at(\"odata\")\r\n    .in(server)\r\n    .with(handler);\r\n```\r\n\r\n### Depencency Injection Support\r\n\r\nCDS Routing-Handlers can be used in conjunction with [typedi](https://github.com/typestack/typedi).\r\n\r\n```typescript\r\nimport { useContainer } from \"cds-routing-handlers\";\r\nimport { Container } from \"typedi\";\r\n\r\nuseContainer(Container);\r\n```\r\n\r\nThat's it now you can inject service into your handler classes.\r\n\r\n```typescript\r\nimport { Handler, Func, Param } from \"cds-routing-handlers\";\r\nimport { Service, Inject } from \"typedi\";\r\n\r\n@Service()\r\nexport class GreeterService {\r\n    public greet(name: string): string {\r\n        return \"Hello, \" + name;\r\n    }\r\n}\r\n\r\n@Handler()\r\nexport class GreeterHandler {\r\n    @Inject()\r\n    private greeterService: GreeterService;\r\n\r\n    @Func(\"hello\")\r\n    public async hello(@Param(\"name\") name: string): Promise<string> {\r\n        return this.greeterService.greet(name);\r\n    }\r\n}\r\n```\r\n\r\n### Middleware\r\n\r\nIn addition to the before handler you can implement custom middlewares for either the complete service (global) or a specific entity.\r\n\r\n#### Global Middleware\r\n\r\n```typescript\r\n// ./global.middleware.ts\r\n\r\nimport { ICdsMiddleware, Middleware, Req, Jwt } from \"cds-routing-handlers\";\r\n\r\n@Middleware({ global: true, priority: 1 })\r\nexport class GobalMiddleware implements ICdsMiddleware {\r\n    // You can inject the request parameters as you would in any other handler.\r\n    public async use(@Req() req: any, @Jwt() jwt: string): Promise<void> {\r\n        console.log(\"I am global middleware prio 1\");\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\n// ./server.ts\r\n\r\nimport express from \"express\";\r\nimport { createCombinedHandler } from \"cds-routing-handlers\";\r\nimport { GlobalMiddleware } from \"./global.middleware\";\r\n\r\nconst server = express();\r\n\r\nconst handler = createCombinedHandler({\r\n    handler: [__dirname + \"/handlers/**/*.js\"],\r\n    middlewares: [GlobalMiddleware],\r\n});\r\n\r\ncds.serve(\"./gen/\")\r\n    .at(\"odata\")\r\n    .in(server)\r\n    .with(handler);\r\n```\r\n\r\n#### Handler Middleware\r\n\r\n```typescript\r\n// ./handler.middleware.ts\r\n\r\nimport { ICdsMiddleware, Middleware, Req, Jwt } from \"cds-routing-handlers\";\r\n\r\n@Middleware() // Omit options for handler middlewares\r\nexport class HandlerMiddleware implements ICdsMiddleware {\r\n    // You can inject the request parameters as you would in any other handler.\r\n    public async use(@Req() req: any, @Jwt() jwt: string): Promise<void> {\r\n        console.log(\"I am handler middleware!\");\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\n// ./handlers/entity.handler.ts\r\n\r\nimport { Handler, Use, OnRead } from \"cds-routing-handlers\";\r\nimport { HandlerMiddleware } from \"../handler.middleware\";\r\n\r\n@Handler(\"Entity\")\r\n@Use(HandlerMiddleware)\r\nexport class EntityHandler {\r\n    @OnRead()\r\n    public async read(@Srv() srv: any, @Req() req: any): Promise<void> {\r\n        // Handle the read here...\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\n// ./server.ts\r\n\r\nimport express from \"express\";\r\nimport { createCombinedHandler } from \"cds-routing-handlers\";\r\nimport { HandlerMiddleware } from \"./handler.middleware\";\r\n\r\nconst server = express();\r\n\r\nconst handler = createCombinedHandler({\r\n    handler: [__dirname + \"/handlers/**/*.js\"],\r\n    middlewares: [HandlerMiddleware],\r\n});\r\n\r\ncds.serve(\"./gen/\")\r\n    .at(\"odata\")\r\n    .in(server)\r\n    .with(handler);\r\n```\r\n\r\n### User Checker\r\n\r\nTo avoid duplicate code for user retrieval in all handlers over the JWT token you can implement a user checker which lets you inject your custom user object with the `@User()` decorator.\r\n\r\n```typescript\r\n// ./custom.userchecker.ts\r\n\r\nimport { IUserChecker, UserChecker, Jwt } from \"cds-routing-handlers\";\r\n\r\nexport interface IUser {\r\n    username: string;\r\n}\r\n\r\n@UserChecker() // Omit options for handler middlewares\r\nexport class CustomUserChecker implements IUserChecker {\r\n    // You can inject the request parameters as you would in any other handler.\r\n    // NOTE: With one exception the @User() decorator will not work.\r\n    public async check(@Jwt() jwt: string): Promise<IUser> {\r\n        // Custom code here to create user from JWT...\r\n        // Let's fake it here\r\n        return {\r\n            username: \"mrbandler\",\r\n        };\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\n// ./handlers/entity.handler.ts\r\n\r\nimport { Handler, OnRead } from \"cds-routing-handlers\";\r\nimport { IUser } from \"../custom.userchecker\";\r\n\r\n@Handler(\"Entity\")\r\nexport class EntityHandler {\r\n    @OnRead()\r\n    public async read(@User() user: IUser): Promise<void> {\r\n        // Use your custom user object in the read logic...\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\n// ./server.ts\r\n\r\nimport express from \"express\";\r\nimport { createCombinedHandler } from \"cds-routing-handlers\";\r\nimport { CustomUserChecker } from \"./custom.userchecker\";\r\n\r\nconst server = express();\r\n\r\nconst handler = createCombinedHandler({\r\n    handler: [__dirname + \"/handlers/**/*.js\"],\r\n    userChecker: CustomUserChecker,\r\n});\r\n\r\ncds.serve(\"./gen/\")\r\n    .at(\"odata\")\r\n    .in(server)\r\n    .with(handler);\r\n```\r\n\r\n### Complete Handler API\r\n\r\n```typescript\r\nimport { Handler } from \"cds-routing-handlers\";\r\nimport { BeforeCreate, OnCreate, AfterCreate } from \"cds-routing-handlers\";\r\nimport { BeforeRead, OnRead, AfterRead } from \"cds-routing-handlers\";\r\nimport { BeforeUpdate, OnUpdate, AfterUpdate } from \"cds-routing-handlers\";\r\nimport { BeforeDelete, OnDelete, AfterDelete } from \"cds-routing-handlers\";\r\nimport { Func, Action } from \"cds-routing-handlers\";\r\nimport { Req, Srv, Param, ParamObj, Jwt } from \"cds-routing-handlers\";\r\n\r\ninterface IFoobar {\r\n    Id: string;\r\n    Foo: string;\r\n    Bar: number;\r\n}\r\n\r\n/**\r\n *  Basic OData operations.\r\n */\r\n@Handler(\"Foobar\")\r\nexport class FooBarHandler {\r\n    /**\r\n     *  CREATE handlers.\r\n     */\r\n    @BeforeCreate()\r\n    public async beforeCreate(): Promise<IFoobar> {\r\n        // Handle the before create here...\r\n    }\r\n\r\n    @OnCreate()\r\n    public async onCreate(): Promise<IFoobar> {\r\n        // Handle the create here...\r\n    }\r\n\r\n    @AfterCreate()\r\n    public async afterCreate(): Promise<IFoobar> {\r\n        // Handle the after create here...\r\n    }\r\n\r\n    /**\r\n     *  READ handlers.\r\n     */\r\n    @BeforeRead()\r\n    public async beforeRead(): Promise<IFoobar> {\r\n        // Handle the before read here...\r\n    }\r\n\r\n    @OnRead()\r\n    public async onRead(): Promise<IFoobar> {\r\n        // Handle the read here...\r\n    }\r\n\r\n    @AfterRead()\r\n    public async afterRead(): Promise<IFoobar> {\r\n        // Handle the after read here...\r\n    }\r\n\r\n    /**\r\n     *  UPDATE handlers.\r\n     */\r\n    @BeforeUpdate()\r\n    public async beforeUpdate(): Promise<IFoobar> {\r\n        // Handle the before update here...\r\n    }\r\n\r\n    @OnUpdate()\r\n    public async onUpdate(): Promise<IFoobar> {\r\n        // Handle the update here...\r\n    }\r\n\r\n    @AfterUpdate()\r\n    public async afterUpdate(): Promise<IFoobar> {\r\n        // Handle the after update here...\r\n    }\r\n\r\n    /**\r\n     *  DELETE handlers.\r\n     */\r\n    @BeforeDelete()\r\n    public async beforeDelete(): Promise<void> {\r\n        // Handle the before delete here...\r\n    }\r\n\r\n    @OnDelete()\r\n    public async onDelete(): Promise<void> {\r\n        // Handle the delete here...\r\n    }\r\n\r\n    @AfterDelete()\r\n    public async afterDelete(): Promise<void> {\r\n        // Handle the after delete here...\r\n    }\r\n}\r\n\r\n/**\r\n *  Root service handler.\r\n */\r\n@Handler(\"Foobar\")\r\nexport class FooBarRejectHandler {\r\n    @OnRead()\r\n    @OnReject(500, \"Foobar not found\")\r\n    public async onRead(): Promise<IFoobar> {\r\n        // When something fails in here, a error object like defined above will be returned.\r\n        /**\r\n         * {\r\n         *    \"error\": {\r\n         *      \"code\": 500,\r\n         *      \"message\": \"Foobar not found\"\r\n         *    }\r\n         * }\r\n         *\r\n         */\r\n    }\r\n\r\n    @OnRead()\r\n    @OnReject(500, \"Foobar not found\", true)\r\n    public async onRead(): Promise<IFoobar> {\r\n        // When something fails in here, a error object like defined above will be returned.\r\n        // This time the JS error message is appended to the message.\r\n        /**\r\n         * {\r\n         *    \"error\": {\r\n         *      \"code\": 500,\r\n         *      \"message\": \"Foobar not found: JS Error Message\"\r\n         *    }\r\n         * }\r\n         *\r\n         */\r\n    }\r\n}\r\n\r\n/**\r\n *  Error handling and rejection operations.\r\n */\r\n@Handler()\r\nexport class FooBarRejectHandler {\r\n    /**\r\n     *  Function Import.\r\n     *\r\n     *  CDS:\r\n     *      function foo(bar: String) returns String;\r\n     *\r\n     */\r\n    @Func(\"foo\")\r\n    public async foo(@Param(\"bar\") bar: string): Promise<string> {\r\n        return \"Foo, \" + bar;\r\n    }\r\n\r\n    /**\r\n     *  Action Import.\r\n     *\r\n     *  CDS:\r\n     *      action bar(foo: String, noop: String);\r\n     *\r\n     */\r\n    @Action(\"bar\")\r\n    public async bar(@Param(\"foo\") foo: string, @Param(\"noop\") noop: string): Promise<void> {\r\n        console.log(\"Foo Param\", foo);\r\n        console.log(\"Noop Param\", noop);\r\n    }\r\n}\r\n\r\ninterface IDoItParams {\r\n    id: string;\r\n    do: string;\r\n    times: number;\r\n}\r\n\r\n/**\r\n *  Error handling and rejection operations.\r\n */\r\n@Handler()\r\nexport class ParamExampleHandler {\r\n    /**\r\n     *  Function Import.\r\n     *\r\n     *  CDS:\r\n     *      function hello(title: String, name: String) returns String;\r\n     *\r\n     */\r\n    @Func(\"hello\")\r\n    public async foo(@Param(\"title\") title: string, @Param(\"name\") name: string): Promise<string> {\r\n        return `Hello, ${title} ${name}`;\r\n    }\r\n\r\n    /**\r\n     *  Function Import.\r\n     *\r\n     *  CDS:\r\n     *      action doIt(id: String, do: String, tunes: number);\r\n     *\r\n     */\r\n    @Action(\"doIt\")\r\n    public async doIt(@ParamObj() params: IDoItParams): Promise<string> {\r\n        console.log(params); // => { id: \"12345\", do: \"over\", \"times\": 9000 }\r\n    }\r\n\r\n    /**\r\n     * Additionaly you can inject the service aswell as the request object.\r\n     */\r\n    @OnRead()\r\n    public async read(@Srv() srv: any, @Req() req: any): Promise<string> {\r\n        // Do something with srv and req.\r\n    }\r\n\r\n    /**\r\n     * If the incoming request contains a JWT token you can inject that aswell.\r\n     */\r\n    @OnRead()\r\n    public async read(@Jwt() jwt: string): Promise<string> {\r\n        // Do something with srv and req.\r\n    }\r\n\r\n    /**\r\n     * After handlers a bit if a special case, they always give you a array of entities that was worked on prior to the after handler.\r\n     *\r\n     * This list can be injected via the @Entities decorator.\r\n     */\r\n    @AfterRead()\r\n    public async afterRead(@Entities() entities: IDoItParams[]): Promise<IDoItParams[]> {\r\n        return entities.map(e => {\r\n            e.id = \"After handler was here\";\r\n            return e;\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n## 3. Decorator Reference\r\n\r\n### Middleware Decorators\r\n\r\n| Signature                                                        | Example                                                                                                                                                                      | Description                                                                                                                                                                                                                                                                                   |\r\n| ---------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| `@Middleware(options?: { global?: boolean, priority?: number })` | `@Middleware({ global: true, priority: 1 }) class CustomMiddleware implements ICdsMiddleware` <br />or<br />`@Middleware() class CustomMiddleware implements ICdsMiddleware` | Class that is marked with this decorator is registered as a middleware and needs to implement the `ICdsMiddleware` interface.<br />The middleware can then be used to intercept all incoming request via a global definition or intercept all incoming requests on a specific entity handler. |\r\n\r\n### User Checker Decorators\r\n\r\n| Signature        | Example                                                          | Description                                                                                                                                                                                                                       |\r\n| ---------------- | ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| `@UserChecker()` | `@UserChecker() class CustomUserChecker implements IUserChecker` | Class that is marked with this decorator is registered as a user checker and needs to implement the `IUserChecker` interface.<br />The user checker can then be used to provide a custom user object via the `@User()` decorator. |\r\n\r\n### Handler Decorators\r\n\r\n| Signature                          | Example                                    | Description                                                                                                                                                                                                                                                                                                   |\r\n| ---------------------------------- | ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| `@Handler(entity?: string)`        | `@Handler(\"Books\") class BooksHandler`     | Class that is marked with this decorator is registered as a handler and its annotated methods are registered as actions. The entity parameter is used to differentiate and register the correct actions for the corresponding entity.                                                                         |\r\n| `@Use(...middlewares: Function[])` | `@Use(MiddlewareClass) class BooksHandler` | A class that is marked with this decorator also needs to be marked with the `@Handler()` decorator to be used. If a handler is implemented the `use` method from the middleware is called every time a new requests comes in, regardless of the action (`CREATE`, `READ`, `UPDATE`, `DELETE`) to be executed. |\r\n\r\n### Handler Action Decorators\r\n\r\nIn this table we assume that all action handlers a within a `@Handler` decorated class with the entity `Books`.\r\n\r\n| Signature                                                                       | Example                                                    | Description                                                                                                                                                       | @sap/cds analogue                                                                           |\r\n| ------------------------------------------------------------------------------- | ---------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------ |\r\n| `@BeforeCreate()`                                                               | `@BeforeCreate() async beforeCreate()`                     | Methods marked with this decorator will register a request made with POST HTTP Method to the specified entity, before it will be handled by the actual handler.   | `srv.before(\"CREATE\", \"Books\", async (req) => ...)`                                         |\r\n| `@OnCreate()`                                                                   | `@OnCreate() async onCreate()`                             | Methods marked with this decorator will register a request made with POST HTTP Method to the specified entity.                                                    | `srv.on(\"CREATE\", \"Books\", async (req) => ...)`                                             |\r\n| `@AfterCreate()`                                                                | `@AfterCreate() async afterCreate()`                       | Methods marked with this decorator will register a request made with POST HTTP Method to the specified entity, after it was handled by the actual handler.        | `srv.after(\"CREATE\", \"Books\", async (books, req) => ...)`                                   |\r\n| `@BeforeRead()`                                                                 | `@BeforeRead() async beforeRead()`                         | Methods marked with this decorator will register a request made with GET HTTP Method to the specified entity, before it will be handled by the actual handler.    | `srv.before(\"READ\", \"Books\", async (req) => ...)`                                           |\r\n| `@OnRead()`                                                                     | `@OnRead() async onRead()`                                 | Methods marked with this decorator will register a request made with GET HTTP Method to the specified entity.                                                     | `srv.on(\"READ\", \"Books\", async (req) => ...)`                                               |\r\n| `@AfterRead()`                                                                  | `@AfterRead() async afterRead()`                           | Methods marked with this decorator will register a request made with GET HTTP Method to the specified entity, after it was handled by the actual handler.         | `srv.after(\"READ\", \"Books\", async (books, req) => ...)`                                     |\r\n| `@BeforeUpdate()`                                                               | `@BeforeUpdate() async beforeUpdate()`                     | Methods marked with this decorator will register a request made with PUT HTTP Method to the specified entity, before it will be handled by the actual handler.    | `srv.before(\"UPDATE\", \"Books\", async (req) => ...)`                                         |\r\n| `@OnUpdate()`                                                                   | `@OnUpdate() async onUpdate()`                             | Methods marked with this decorator will register a request made with PUT HTTP Method to the specified entity.                                                     | `srv.on(\"UPDATE\", \"Books\", async (req) => ...)`                                             |\r\n| `@AfterUpdate()`                                                                | `@AfterUpdate() async afterUpdate()`                       | Methods marked with this decorator will register a request made with DELETE HTTP Method to the specified entity, after it was handled by the actual handler.      | `srv.after(\"UPDATE\", \"Books\", async (books, req) => ...)`                                   |\r\n| `@BeforeDelete()`                                                               | `@BeforeDelete() async beforeDelete()`                     | Methods marked with this decorator will register a request made with DELETE HTTP Method to the specified entity, before it will be handled by the actual handler. | `srv.before(\"DELETE\", \"Books\", async (req) => ...)`                                         |\r\n| `@OnDelete()`                                                                   | `@OnDelete() async onDelete()`                             | Methods marked with this decorator will register a request made with DELETE HTTP Method to the specified entity.                                                  | `srv.on(\"DELETE\", \"Books\", async (req) => ...)`                                             |\r\n| `@AfterDelete()`                                                                | `@AfterDelete() async afterDelete()`                       | Methods marked with this decorator will register a request made with DELETE HTTP Method to the specified entity, after it was handled by the actual handler.      | `srv.after(\"DELETE\", \"Books\", async (books, req) => ...)`                                   |\r\n| `@Func(name: string)`                                                           | `@Func(\"doIt\") async doIt()`                               | Methods marked with this decorator will register a request made with either GET or POST HTTP. The payload can either be given by path parameters or body.         | `srv.on(\"doIt\", \"Books\", async (req) => ...)` OR `srv.on(\"doIt\", async (req) => ...)`       |\r\n| `@Action(name: string)`                                                         | `@Action(\"doItNow\") async doItNow()`                       | Methods marked with this decorator will register a request made with either GET or POST HTTP. The payload can either be given by path parameters or body.         | `srv.on(\"doItNow\", \"Books\", async (req) => ...)` OR `srv.on(\"doItNow\", async (req) => ...)` |\r\n| `@OnReject(code: number, message: string, appendErrorMessage: boolean = false)` | `@OnReject(500, \"Nope, that didn't work\") async handler()` | Methods marked with this decorator will return a error object when a handler fails.                                                                               | `srv.on(\"READ\", \"Books\", async (req) => {req.reject(500, \"Nope, that didn't work\")})`       |\r\n\r\n### Method Parameter Decorators\r\n\r\n| Signature              | Example                                     | Description                                                                                                                                                                               | @sap/cds analogue                                                                       |\r\n| ---------------------- | ------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |\r\n| `@Req()`               | `onRead(@Req() req: any)`                   | Injects the request object.                                                                                                                                                               | `srv.on(\"READ\", \"Books\", async (req) => ...)`                                           |\r\n| `@Srv()`               | `onRead(@Srv() srv: any)`                   | Injects the service object.                                                                                                                                                               | `srv.on(\"READ\", \"Books\", async (req) => { // Acess srv here })`                         |\r\n| `@Param(name: string)` | `doIt(@Param(\"times\") times: number)`       | Injects a Function/Action Import parameter.                                                                                                                                               | `srv.on(\"READ\", \"Books\", async (req) => { let times = req.data[\"times\"] as number; })`  |\r\n| `@ParamObj()`          | `doIt(@ParamObj() doItParams: IDoItParams)` | Injects a Function/Action Import parameter object.                                                                                                                                        | `srv.on(\"READ\", \"Books\", async (req) => { let doItParams = req.data as IDoItParams; })` |\r\n| `@Entities()`          | `afterRead(@Entities() entities: IBook[])`  | Injects entities from a previous handler on `@After*` handlers.                                                                                                                           | `srv.after(\"READ\", \"Books\", async (books, req) => ...)`                                 |\r\n| `@Jwt()`               | `onRead(@Jwt() jwt: string)`                | Injects the JWT token, when found on incoming request.                                                                                                                                    | `N/A`                                                                                   |\r\n| `@Data()`              | `onRead(@Data() book: IBook)`               | Injects the data object from a incoming request. It's actually the same as `@ParamObj()` with a different identifier to differentiate between Function/Action imports and other handlers. | `srv.on(\"READ\", \"Books\", async(req) => { const book = req.data as I Book})`             |\r\n| `@Next()`              | `onRead(@Next() next: Function)`            | Injects the next handler function for flow control with multiple handlers.                                                                                                                | `srv.on(\"READ\", \"Books\", async(req, next) => ... )`                                     |\r\n| `@Locale()`            | `onRead(@Locale() locale: string)`          | Injects the locale of the current requesting user.                                                                                                                                        | `srv.on(\"READ\", \"Books\", async(req) => const locale = req.user.locale)`                 |\r\n| `@User()`              | `onRead(@User() user: IUser)`               | Injects the custom user object that is created via the `UserChecker` implementation.                                                                                                      | `N/A`                                                                                   |\r\n\r\n## 4. Example\r\n\r\nFor a complete example checkout the `./test` directory which contains the project I am testing with.\r\n\r\nAdditionally you can use my cds-routing-handler [Postman](https://www.getpostman.com/) collection which contains definitions for every endpoint from the project.\r\n\r\n## 5. Bugs and Features\r\n\r\nPlease open a issue when you encounter any bugs 🐞 or if you have an idea for a additional feature 💡.\r\n\r\n---\r\n\r\n## 6. License\r\n\r\nMIT License\r\n\r\nCopyright (c) 2019 mrbandler\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n","bugs":{"url":"https://github.com/mrbandler/cds-routing-handlers/issues"},"keywords":["typescript","controller","handler","cds","sap","cap","cloud","application","programming"],"files":["lib"],"engines":{"node":">=12.0.0"},"scripts":{"build":"tsc","build:all":"rimraf ./lib && yarn build && yarn build:test","build:test":"tsc --project ./tests/tsconfig.json && copyfiles -f ./tests/services.cds ./tests/schema.cds ./srv && cds build/all --clean","start:test":"yarn build:test && node --inspect ./srv/server.js","prepare":"husky install"},"devDependencies":{"@commitlint/cli":"^16.0.1","@commitlint/config-conventional":"^16.0.0","@sap/cds":"^5.7.4","@sap/cds-odata-v2-adapter-proxy":"^1.8.4","@types/express":"^4.17.2","@types/node":"^12.12.11","@typescript-eslint/eslint-plugin":"^5.8.1","@typescript-eslint/parser":"^5.8.1","copyfiles":"^2.1.1","eslint":"^8.5.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","express":"^4.17.1","husky":"^7.0.0","lint-staged":"^9.4.3","prettier":"^2.5.1","rimraf":"^3.0.0","typedi":"0.8.0","typescript":"^4.5.4"},"dependencies":{"glob":"^7.2.0","reflect-metadata":"^0.1.13"},"lint-staged":{"*.{js,ts,css,json,md,yml}":["prettier --write"],"*.{js,ts}":["eslint --fix"]},"cds":{"requires":{"db":{"kind":"hana","model":["srv"]}},"odata":{"version":"v4"}},"type":"plugin","tags":["rounting,typescript"],"gitHubOwner":"mrbandler","gitHubRepo":"cds-routing-handlers","licenseSource":"mit","forks":3,"stars":15,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2019-11-22T11:31:52.667Z","updatedAt":"2022-07-10T15:16:15.621Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/mrbandler/cds-routing-handlers/tree/master/","downloadsCurrentMonth":11728,"downloadsCurrentFortnight":6214,"downloads365":96669,"downloadsFortnightGrowth":12.69,"downloadsHistory":[{"yearMonth":"2023-07","downloads":6332},{"yearMonth":"2023-08","downloads":9109},{"yearMonth":"2023-09","downloads":6296},{"yearMonth":"2023-10","downloads":9248},{"yearMonth":"2023-11","downloads":9817},{"yearMonth":"2023-12","downloads":6632},{"yearMonth":"2024-01","downloads":7147},{"yearMonth":"2024-02","downloads":6114},{"yearMonth":"2024-03","downloads":10217},{"yearMonth":"2024-04","downloads":9902},{"yearMonth":"2024-05","downloads":11764}],"npmlink":"https://www.npmjs.com/package/cds-routing-handlers","versions":[{"version":"created","date":"2019-11-22T11:31:52.667Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/created","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2019-11-22T11:31:53.009Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.0.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2022-07-10T15:16:15.621Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/modified","changelog":"","sourceType":"plugin"},{"version":"1.0.1","date":"2019-11-22T11:43:37.247Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.0.1","changelog":"","sourceType":"plugin"},{"version":"1.0.2","date":"2019-11-22T12:01:01.198Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.0.2","changelog":"","sourceType":"plugin"},{"version":"1.0.3","date":"2019-11-22T12:19:23.908Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.0.3","changelog":"","sourceType":"plugin"},{"version":"1.0.4","date":"2019-11-22T13:42:33.748Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.0.4","changelog":"","sourceType":"plugin"},{"version":"1.0.5","date":"2019-11-22T14:48:22.734Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.0.5","changelog":"","sourceType":"plugin"},{"version":"1.1.0","date":"2019-12-10T16:31:01.346Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.1.0","changelog":"","sourceType":"plugin"},{"version":"1.1.1","date":"2019-12-10T16:58:49.623Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.1.1","changelog":"","sourceType":"plugin"},{"version":"1.1.2","date":"2019-12-11T12:07:20.430Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.1.2","changelog":"","sourceType":"plugin"},{"version":"1.1.3","date":"2019-12-11T15:32:33.395Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.1.3","changelog":"","sourceType":"plugin"},{"version":"1.2.0","date":"2019-12-12T09:16:14.215Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.0","changelog":"","sourceType":"plugin"},{"version":"1.2.1","date":"2019-12-12T17:30:18.180Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.1","changelog":"","sourceType":"plugin"},{"version":"1.2.2","date":"2019-12-12T18:32:46.160Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.2","changelog":"","sourceType":"plugin"},{"version":"1.2.3","date":"2019-12-26T22:05:37.988Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.3","changelog":"","sourceType":"plugin"},{"version":"1.2.4","date":"2019-12-27T14:39:10.904Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.4","changelog":"","sourceType":"plugin"},{"version":"1.2.5","date":"2020-01-17T13:27:54.986Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.5","changelog":"","sourceType":"plugin"},{"version":"1.2.6","date":"2020-01-21T08:23:18.793Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.6","changelog":"","sourceType":"plugin"},{"version":"1.2.7","date":"2020-02-11T13:16:06.685Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.7","changelog":"","sourceType":"plugin"},{"version":"1.2.8","date":"2020-03-04T16:59:59.452Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/1.2.8","changelog":"","sourceType":"plugin"},{"version":"2.0.0","date":"2020-03-24T16:47:02.979Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.0.0","changelog":"","sourceType":"plugin"},{"version":"2.1.0","date":"2020-03-25T10:27:32.386Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.1.0","changelog":"","sourceType":"plugin"},{"version":"2.1.1","date":"2020-03-25T13:16:41.915Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.1.1","changelog":"","sourceType":"plugin"},{"version":"2.1.2","date":"2020-05-18T10:17:17.401Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.1.2","changelog":"","sourceType":"plugin"},{"version":"2.1.3","date":"2020-05-18T10:34:16.994Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.1.3","changelog":"","sourceType":"plugin"},{"version":"2.1.8","date":"2020-06-03T20:21:38.975Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.1.8","changelog":"","sourceType":"plugin"},{"version":"2.1.9","date":"2020-06-08T15:19:21.919Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/2.1.9","changelog":"","sourceType":"plugin"},{"version":"3.0.0","date":"2020-09-11T08:12:00.342Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.0","changelog":"","sourceType":"plugin"},{"version":"3.0.1","date":"2020-09-12T17:43:25.096Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.1","changelog":"","sourceType":"plugin"},{"version":"3.0.3","date":"2020-09-27T14:27:01.395Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.3","changelog":"","sourceType":"plugin"},{"version":"3.0.4","date":"2021-01-14T10:54:28.111Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.4","changelog":"","sourceType":"plugin"},{"version":"3.0.5","date":"2021-06-23T08:12:50.457Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.5","changelog":"","sourceType":"plugin"},{"version":"3.0.6","date":"2021-12-30T14:32:48.337Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.6","changelog":"","sourceType":"plugin"},{"version":"3.0.7","date":"2022-07-10T15:16:15.549Z","link":"https://www.npmjs.com/package/cds-routing-handlers/v/3.0.7","changelog":"","sourceType":"plugin"}]},{"name":"cds-azure-ad","version":"0.0.21","description":"Azure AD and Azure AD B2C Custom-Defined Authentication for SAP CDS (CAP)","main":"index.js","scripts":{"test":"run-s jest","jest":"jest --runInBand --silent","lint":"prettier -c . && eslint '*.{js,ts,tsx}'","release":"standard-version"},"repository":{"type":"git","url":"git+https://github.com/sapmentors/cds-azure-ad.git"},"keywords":["sap","cap","cds","azure","azure ad","azure ad b2c"],"author":"SAP Mentors & Friends","license":"MIT","bugs":{"url":"https://github.com/sapmentors/cds-azure-ad/issues"},"homepage":"https://github.com/sapmentors/cds-azure-ad#readme","dependencies":{"@sap/cds":"~5.7.4","@sap/xsenv":"^3.1.1","@sap/xssec":"^3.2.11","passport":"^0.5.2","passport-azure-ad":"latest"},"devDependencies":{"@commitlint/cli":"^16.0.2","@commitlint/config-conventional":"^16.0.0","@types/jest":"^27.4.0","copyfiles":"^2.4.1","dotenv":"^10.0.0","eslint":"^8.6.0","eslint-plugin-jest":"^25.3.4","express":"^4.17.2","husky":"^7.0.4","jest":"^27.4.7","lint-staged":"^12.1.7","npm-run-all":"^4.1.5","prettier":"2.5.1","standard-version":"^9.3.2","supertest":"^6.1.6","uuidv4":"^6.2.12"},"husky":{"hooks":{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS","pre-commit":"lint-staged"}},"lint-staged":{"*.(js|json)":["prettier --write"],"*.js":"eslint --cache --fix"},"jest":{"testEnvironment":"node","testPathIgnorePatterns":["/node_modules/"],"testRegex":"/__tests__/.*(\\.|/)(test|spec)\\.[jt]sx?$","testTimeout":10000},"prettier":{"semi":false,"printWidth":120,"arrowParens":"always","trailingComma":"es5","singleQuote":true},"type":"authentication","tags":["azure"],"gitHubOwner":"sapmentors","gitHubRepo":"cds-azure-ad","licenseSource":"mit","forks":3,"stars":7,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2021-02-07T10:14:24.666Z","updatedAt":"2022-04-12T05:41:25.424Z","vscodeInstalls":-1,"sourceType":"authentication","githublink":"https://github.com/sapmentors/cds-azure-ad/tree/main/","readme":"![npm version](https://img.shields.io/npm/v/cds-azure-ad)\n![Package Build](https://github.com/sapmentors/cds-azure-ad/workflows/Node.js%20Package/badge.svg)\n\n# cds-azure-ad - Azure AD and Azure AD B2C Custom-Defined Authentication for SAP CDS (CAP)\n\nThis package implements Azure AD and Azure AD B2C support of [Custom-Defined Authentication](https://cap.cloud.sap/docs/node.js/authentication#custom) for the [SAP Cloud Application Programming Model (CAP)](https://cap.cloud.sap/docs/). To achieve this, the packages uses [passport-azure-ad - Microsoft Azure Active Directory Passport.js Plug-In](https://github.com/AzureAD/passport-azure-ad).\n\n## usage in your CAP project\n\nAdd this package to your [SAP Cloud Application Programming Model](https://cap.cloud.sap/docs/) project by running:\n\n```bash\nnpm install cds-azure-ad\n```\n\nThen add this configuration to the cds section of your *package.json*:\n\n```JSON\n  \"cds\": {\n    \"requires\": {\n      \"auth\": {\n        \"impl\": \"cds-azure-ad\"\n      }\n    }\n  }\n```\n\nThe configuration for the [passport-azure-ad BearerStrategy](https://github.com/AzureAD/passport-azure-ad#42-bearerstrategy) is provided via the following content in the file *default-env.json* the root folder of this project. The B2C tenant used here is the sample is a tenant provided by Microsoft which is used also for their examples. As this file might inlcude sensitive data it's not included in the git repository.\n\n```json\n{\n  \"VCAP_SERVICES\": {\n    \"xsuaa\": [\n      {\n        \"name\": \"cap-azure-ad-b2c-uaa\",\n        \"label\": \"azure-ad\",\n        \"tags\": [\n          \"azure-ad\"\n        ],\n        \"plan\": \"space\",\n        \"credentials\": {\n          \"identityMetadata\": \"https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/B2C_1_SUSI/v2.0/.well-known/openid-configuration/\",\n          \"clientID\": \"e760cab2-b9a1-4c0d-86fb-ff7084abd902\",\n          \"policyName\": \"B2C_1_SUSI\",\n          \"isB2C\": true,\n          \"validateIssuer\": true,\n          \"loggingLevel\": \"warn\",\n          \"loggingNoPII\": true,\n          \"passReqToCallback\": false\n        }\n      }\n    ]\n  },\n  \"destinations\": []\n}\n```\n\n## Projects using cds-azure-ad\n\n- [cap-azure-ad-b2c](https://github.com/gregorwolf/cap-azure-ad-b2c) – An example project with multiple deployment scenarios (SAP BTP Cloud Foundery, SAP BTP Kyma)\n\n","downloadsCurrentMonth":6,"downloadsCurrentFortnight":4,"downloads365":684,"downloadsFortnightGrowth":100,"downloadsHistory":[{"yearMonth":"2023-07","downloads":62},{"yearMonth":"2023-08","downloads":36},{"yearMonth":"2023-09","downloads":27},{"yearMonth":"2023-10","downloads":285},{"yearMonth":"2023-11","downloads":40},{"yearMonth":"2023-12","downloads":29},{"yearMonth":"2024-01","downloads":59},{"yearMonth":"2024-02","downloads":42},{"yearMonth":"2024-03","downloads":35},{"yearMonth":"2024-04","downloads":29},{"yearMonth":"2024-05","downloads":8}],"npmlink":"https://www.npmjs.com/package/cds-azure-ad","versions":[{"version":"created","date":"2021-02-07T10:14:24.666Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/created","changelog":"","sourceType":"authentication"},{"version":"0.0.1","date":"2021-02-07T10:14:24.823Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.1","changelog":"","sourceType":"authentication"},{"version":"modified","date":"2022-04-12T05:41:25.424Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/modified","changelog":"","sourceType":"authentication"},{"version":"0.0.2","date":"2021-02-07T10:28:47.753Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.2","changelog":"","sourceType":"authentication"},{"version":"0.0.3","date":"2021-02-07T10:39:24.539Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.3","changelog":"","sourceType":"authentication"},{"version":"0.0.4","date":"2021-02-09T07:36:22.014Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.4","changelog":"","sourceType":"authentication"},{"version":"0.0.5","date":"2021-02-18T07:20:36.306Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.5","changelog":"","sourceType":"authentication"},{"version":"0.0.6","date":"2021-02-26T07:24:35.715Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.6","changelog":"","sourceType":"authentication"},{"version":"0.0.7","date":"2021-03-03T08:05:04.323Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.7","changelog":"","sourceType":"authentication"},{"version":"0.0.8","date":"2021-03-19T08:39:21.163Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.8","changelog":"","sourceType":"authentication"},{"version":"0.0.9","date":"2021-03-29T13:05:42.635Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.9","changelog":"","sourceType":"authentication"},{"version":"0.0.10","date":"2021-04-03T21:26:47.520Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.10","changelog":"","sourceType":"authentication"},{"version":"0.0.11","date":"2021-04-05T18:56:16.734Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.11","changelog":"","sourceType":"authentication"},{"version":"0.0.12","date":"2021-04-11T17:59:56.592Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.12","changelog":"","sourceType":"authentication"},{"version":"0.0.13","date":"2021-04-23T21:18:29.176Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.13","changelog":"","sourceType":"authentication"},{"version":"0.0.14","date":"2021-05-17T11:36:31.822Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.14","changelog":"","sourceType":"authentication"},{"version":"0.0.15","date":"2021-05-17T11:44:06.470Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.15","changelog":"","sourceType":"authentication"},{"version":"0.0.16","date":"2021-09-27T07:49:05.982Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.16","changelog":"","sourceType":"authentication"},{"version":"0.0.17","date":"2021-12-14T19:54:13.077Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.17","changelog":"","sourceType":"authentication"},{"version":"0.0.18","date":"2022-01-04T13:38:26.344Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.18","changelog":"","sourceType":"authentication"},{"version":"0.0.19","date":"2022-01-05T16:09:04.066Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.19","changelog":"","sourceType":"authentication"},{"version":"0.0.20","date":"2022-01-07T15:22:18.035Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.20","changelog":"","sourceType":"authentication"},{"version":"0.0.21","date":"2022-01-10T15:41:20.393Z","link":"https://www.npmjs.com/package/cds-azure-ad/v/0.0.21","changelog":"","sourceType":"authentication"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.\n\n### 0.0.21 (2022-01-10)\n\n### 0.0.20 (2022-01-07)\n\n### 0.0.19 (2022-01-05)\n\n### 0.0.18 (2022-01-04)\n\n### 0.0.17 (2021-12-14)\n\n### 0.0.16 (2021-09-27)\n\n### 0.0.15 (2021-05-17)\n\n### 0.0.14 (2021-05-17)\n\n### 0.0.13 (2021-04-23)\n\n### 0.0.12 (2021-04-11)\n\n### 0.0.11 (2021-04-05)\n\n### 0.0.10 (2021-04-03)\n\n### 0.0.9 (2021-03-29)\n\n### 0.0.8 (2021-03-19)\n\n### 0.0.7 (2021-03-03)\n\n### 0.0.6 (2021-02-26)\n\n### 0.0.5 (2021-02-18)\n\n### 0.0.4 (2021-02-09)\n\n### 0.0.3 (2021-02-07)\n"},{"name":"capval","version":"1.0.2","description":"SAP CAP Validation Plugin","repository":"https://github.com/MertSAP/CAPVAL","main":"index.js","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"author":"MertSAP","license":"ISC","dependencies":{"@sap/textbundle":"^4.3.0","mustache":"^4.2.0"},"type":"plugin","tags":["validation"],"gitHubOwner":"MertSAP","gitHubRepo":"CAPVAL","licenseSource":"apache-2.0","forks":1,"stars":8,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2024-01-06T03:20:06.333Z","updatedAt":"2024-01-07T06:40:38.967Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/MertSAP/CAPVAL/tree/main/","readme":"# Extend SAP Cloud Application Programming Model(CAP) Validations with the CAPVAL Plugin\nSAP CAPVAL is a SAP Cloud Application Programming Model(CAP) plugin that aims to improve and extend the standard validations provided. \n\nThis plugin aims to address the following:\n* Poor User Experience with default messages such as 'Value is required'. With a multilevel application with many mandatory fields this can leave the user feeling lost\n* Large handlers for custom validations/messages to address the above\n* Repetitive development implementing custom validations such as generating targets\n\n## Setup\nTo use CAPVAL, simply add the dependency to your project\n\n```sh\nnpm add capval\n```\n# Annotations\n## Custom Messages with contextual information\nTo override messages all we need to do is place the @validation.message annotation alongside existing input validation annotations \n### Examples\n#### Custom Message\n  \n  ```cds\n  db/validations.cds\n\n   using { sap.fe.cap.travel as schema } from '../db/schema';\n\n  annotate schema.Travel {\n      @validation.message: 'Enter a valid begin date'\n      @mandatory\n      BeginDate;\n  }\n```\n### Localisation \n Localisation is supported and dynamic contextual information can be provided.\n```cds\ndb/validations.cds\n\nusing { sap.fe.cap.travel as schema } from '../db/schema';\n\nannotate schema.Travel {\n    @validation.message: 'i18n>begindate-error'\n    @mandatory\n    BeginDate;\n}\n\n_i18n/i18n.properties\n\nbegindate-error = Enter a valid begin date\n\n  ```\n\n### Localisation with contextual information\n\n```cds\ndb/validations.cds\nusing { sap.fe.cap.travel as schema } from '../db/schema';\n\nannotate schema.Travel {\n    @validation.message: 'i18n>begindate-error'\n    @mandatory\n    BeginDate;\n}\n\n_i18n/i18n.properties\nbegindate-error = Begin Date required and must be before End Date {{Travel-EndDate}}\n   ```\n## Custom Validations \nThe introduced annotation @validation.handler allows a class to be specified that implements a custom validation. This allows for modulisation and reuse of validations. Implementations must extend the BaseValidation class and implement the IsValid Method, returning true or false. CAPVAL will automatically determine the targets (in/to_Booking(BookingUUID etc etc), collate, and return the errors. \n\n### Example \n#### Custom Validation\nThis handler checks that the begin date is before the end date\n```js\nsrv/handlers/BeginDateChecks.js\n\nconst BaseValidation = require(\"capval\");\nmodule.exports = class BeginDateChecks extends BaseValidation {\n  isValid(InputValue) {\n    var travel = this.getNode()\n\n    if (travel.BeginDate > travel.EndDate) {\n      return false\n    }\n\n    return true\n  }\n};\n```\n```cds\ndb/validations.cds\nusing { sap.fe.cap.travel as schema } from '../db/schema';\n\nannotate schema.Travel {\n    @validation: {\n        message: 'Please enter a begin date that is before the end date',\n        handler: 'srv/handlers/BeginDateChecks.js'\n    }\n   BeginDate;\n}\n\n```\n\n#### Advanced Scenario\nA generic conditional validation with dynamic error messages\n\n```js\nsrv/handlers/ConditionalMandatoryCheck.js\n\nconst BaseValidation = require('capval')\nmodule.exports = class ConditionalMandatoryCheck extends BaseValidation {\n    isValid(InputValue) {\n       var data = this.getDataToRoot()\n       if(data['Travel-TravelStatus_code'] === 'X') return true\n        if(!InputValue) {\n            this.seti18nMessage(this.getField()+ '-errorMessage')\n            return false\n        }\n        return true\n    }\n}\n```\n```cds\ndb/validations.cds\nusing { sap.fe.cap.travel as schema } from '../db/schema';\nannotate schema.Travel {\n    @validation: {\n        message: 'Default message',\n        handler: 'srv/handlers/ConditionalMandatoryCheck.js'\n    }\n   BeginDate;\n   @validation: {\n        message: 'Default message',\n        handler: 'srv/handlers/ConditionalMandatoryCheck.js'\n    }\n   EndDate;\n}\n\n_i18n/i18n.properties\nBeginDate-errorMessage = Please enter a valid begin date\nEndDate-errorMessage = Please enter a valid end date\n```\n#### Custom Data Scenario\nCustom Variables, that are not part of the Business Object can be added to provide information in messages.\n```js\nsrv/handlers/BeginDateChecks.js\n\nconst BaseValidation = require('capval')\nmodule.exports = class BeginDateChecks extends BaseValidation {\n    isValid(InputValue) {\n       var travel = this.getNode();\n       var today =(new Date).toISOString().slice(0,10)\n      \n       if(travel.BeginDate < today) {\n        this.seti18nMessage(\"begindatetoday-errorMessage\")\n        this.setCustomMessageVariables({ today: today})\n        return false\n       }\n      \n\n        return true\n    }\n}\n```\n```cds\ndb/validations.cds\nusing { sap.fe.cap.travel as schema } from '../db/schema';\nannotate schema.Travel {\n    @validation: {\n        message: 'Please enter a begin date that is before the end date',\n        handler: 'srv/handlers/BeginDateChecks.js'\n    }\n   BeginDate;\n}\n  \n_i18n/i18n.properties\nbegindatetoday-errorMessage = Travel Begin Date {{Travel-BeginDate}} can not be before today {{custom-today}}\n```\n\n### Methods\nThe following getter methods can be used to access information to assist with the validation:\n1. getField() : Returns the technical name of the Field getting validated. For Example: BeginDate\n2. getNode() :  Returns the Entity Data for which the Field is member of. For example: The Travel Instance\n3. getMessage() : Returns the annotated error message\n4. getTarget() : Returns the calculated target\n5. getDataToRoot(): Returns a flat JSON Object(keys prefixed with the Entity Name-) of the Node under validation as well as its parents to root\n6. getData(): Returns the full data(root with all ancestors) of the instance\n\nThe following setter methods are available:\n1. setMessage(Message): Overwrites the Error Message. Variables in double curly brackets can be provided\n2. seti18nMessage(Message): Overwrites the Error Message by providing a key for an entry in the i18n.properties file\n3. setTarget(Target): Overwrites the generated field target\n4. setCustomMessageVariables(data): Allows a JSON Object with custom key value pairs to be used in error messages\n\n## Demo\n\nSFLIGHT Scenario with CAPVAL\nhttps://github.com/MertSAP/cap-sflight\n\n\n\n\n","downloadsCurrentMonth":35,"downloadsCurrentFortnight":13,"downloads365":518,"downloadsFortnightGrowth":-40.91,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":0},{"yearMonth":"2024-01","downloads":271},{"yearMonth":"2024-02","downloads":90},{"yearMonth":"2024-03","downloads":63},{"yearMonth":"2024-04","downloads":58},{"yearMonth":"2024-05","downloads":36}],"npmlink":"https://www.npmjs.com/package/capval","versions":[{"version":"created","date":"2024-01-06T03:20:06.333Z","link":"https://www.npmjs.com/package/capval/v/created","changelog":"","sourceType":"plugin"},{"version":"1.0.0","date":"2024-01-06T03:20:06.636Z","link":"https://www.npmjs.com/package/capval/v/1.0.0","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-01-07T06:40:38.967Z","link":"https://www.npmjs.com/package/capval/v/modified","changelog":"","sourceType":"plugin"},{"version":"1.0.1","date":"2024-01-06T04:24:43.698Z","link":"https://www.npmjs.com/package/capval/v/1.0.1","changelog":"","sourceType":"plugin"},{"version":"1.0.2","date":"2024-01-07T06:40:38.766Z","link":"https://www.npmjs.com/package/capval/v/1.0.2","changelog":"","sourceType":"plugin"}]},{"name":"@gavdi/cap-batch","description":"Batching functionality for CAP","private":false,"license":"Apache-2.0","version":"0.2.6","repository":{"type":"git","url":"https://github.com/gavdilabs/cap-batch.git"},"main":"dist/index.js","module":"dist/index.js","types":"dist/index.d.ts","files":["dist/**/*","package.json","README.md"],"scripts":{"prebuild":"rm -rf dist","build":"npm run prebuild && tsc --skipLibCheck","release":"npm run build && npm publish","test":"jest --config jestconfig.json"},"peerDependencies":{"@sap/cds":"^7.5.0","axios":"^1.6.7"},"devDependencies":{"@types/jest":"^27.5.2","jest":"^28.1.3","@types/node":"^20.10.6","ts-jest":"^28.0.7","ts-node":"^10.5.0","typescript":"^5.1.3"},"type":"middleware","tags":["typescript","batch"],"gitHubOwner":"gavdilabs","gitHubRepo":"cap-batch","licenseSource":"apache-2.0","forks":1,"stars":0,"createdAt":"2024-03-11T11:52:18.716Z","updatedAt":"2024-03-24T06:25:12.901Z","vscodeInstalls":-1,"sourceType":"middleware","githublink":"https://github.com/gavdilabs/cap-batch/tree/main/","readme":"# @gavdi/cap-batch - Batch Query Utils for CAP NodeJS\n\nA simple, yet effective way of batching requests from CAP to an OData API near you!\n\n## What's In The Box?\n\n`@gavdi/cap-batch` comes with a full query builder for when you want to send a large quantity of requests towards OData V2/4 APIs.\n\nThe package requires CAP version 7 or higher, and uses the built-in service structure from CAP to perform the HTTP queries towards your desired target.\n\n### Main Features\n\n- Easy batch request instantiation by supplying a CDS remote service instance to the constructor and then adding requests using Builder methodology.\n- Set the size of batch size. ie. SuccessFactors allows for max 180 calls in a batch at a time. Setting the page size to fx 50 in the constructor will make the tool recursively separate 100 request fx into 2 pages/$batch call and 110 into 3 etc.\n- Support for any valid target path. ie. also /upsert\n\n## Installation\n\nTo install the package, you run the following command in your service layer root:\n\n```shell\nnpm i --save @gavdi/cap-batch\n```\n\nOnce installed, in your project you can then make use of it in your project.\n\nShould you want to use it with our recommended template for CAP, you can then make use of it through Dependency Injection, using the following setup:\n\n```typescript\n// service.ts - boostrapping\n...\n\nimport { BatchQueryBuilderFactory, DataServiceVersion } from \"@gavdi/cap-batch\";\n\n...\n\nexport default async (srv: Service) => {\n    ... // Default bootstrapping logic\n\n    await InitDIContainer([\n        {\n            id: \"sf.batchfactory\",\n            value: new BatchQueryBuilderFactory(\n                SuccessFactorsService,\n                DataServiceVersion.ODataV2\n            )\n        }\n    ]);\n\n    useContainer(Container);\n\n    ... // Default bootstrapping logic\n}\n\n// CustomLogic.ts - Your implementation\n...\nimport { BatchQueryBuilderFactory } from \"@gavdi/cap-batch\";\n\nclass CustomLogic {\n\n    @Inject(\"sf.batchfactory\")\n    public batchFactory: BatchQueryBuilderFactory\n\n    @OnRead()\n    public async YourOnReadMethod(@Req() req: Request): Promise<unknown> {\n        const batcher = batchFactory.createInstance(req);\n\n        // Your logic here\n    }\n}\n```\n\nThe advantage of using this setup is that you do not have to re-establish the service connection or store unnecessary variables locally for you to setup a batch builder.\n\n## Usage\n\nThe batch query builder is simple to use, and always returns what ever you input in the same order upon returning the result.\n\nIncluded in this package is also the types necessary for making sure that your data is returned exactly the way that you expect.\n\n> **NOTE: Currently it is NOT supported to have GET then POST then GET requests, please for now, add GET Requests first then the others - otherwise you cannot depend on the order responses come back out**\n\nSimple usage example:\n\n```typescript\n// Create/get your builder\nconst builder = new BatchQueryBuilder(req, service, 50, DataServiceVersion.ODataV2);\n\n// Construct some requests\nbuilder\n    // GET request\n    .addRequest({\n        path: \"/User\",\n        method: BatchMethod.GET,\n        contentType: BatchContentType.HTTP,\n    })\n    // PATCH request\n    .addRequest({\n        path: \"/Position(id='1234')\",\n        method: BatchMethod.PATCH,\n        contentType: BatchContentType.JSON,\n        data: {...}\n    })\n    // DELETE request\n    .addRequest({\n        path: \"/Information(id='1234')\",\n        method: BatchMethod.DELETE,\n        contentType: BatchContentType.HTTP,\n    })\n    // POST request\n    .addRequest({\n        path: \"/Random\",\n        method: BatchMethod.POST,\n        contentType: BatchContentType.HTTP,\n    });\n\n// Fire off the requests\nconst responses = await builder.fire<unknown>();\nif (!responses) {\n    throw new Error(\"Something went wrong!\");\n}\n\n// Parse/process your responses\nconst users = responses[0] as BatchResponse<User>;\nconst positions = responses[1] as BatchResponse<Position>;\nconst information = responses[2] as BatchResponse<Information>;\nconst random = responses[3] as BatchResponse<Random>;\n```\n\nFor even simpler cases where you just want to edit or get multiple at the same time of the same type,\nyou can simply use the `builder.fire<Type>()` type casting.\n\n## Resources\n\nWant to learn more about batch processing? Look here:\n\n- [OData V2 Batch Processing](https://www.odata.org/documentation/odata-version-2-0/batch-processing/)\n- [OData V4 Batch Processing](http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398359)\n\n## TODO\n\n- [ ] Allow for asynchronous batch requests. See [docs](http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398359)\n- [ ] Allow for adding url parameters to the $batch url. SF Allows for certain control params to be supplied ie.\n- [ ] Allow mixing the order of GETS and Changeset requests by fixing the order of responses to match it.\n\n---\n\n(c) Copyright by Gavdi Labs 2024 - All Rights Reserved\n","downloadsCurrentMonth":15,"downloadsCurrentFortnight":3,"downloads365":249,"downloadsFortnightGrowth":-75,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":0},{"yearMonth":"2024-01","downloads":0},{"yearMonth":"2024-02","downloads":0},{"yearMonth":"2024-03","downloads":203},{"yearMonth":"2024-04","downloads":31},{"yearMonth":"2024-05","downloads":15}],"npmlink":"https://www.npmjs.com/package/@gavdi/cap-batch","versions":[{"version":"created","date":"2024-03-11T11:52:18.716Z","link":"https://www.npmjs.com/package/@gavdi/cap-batch/v/created","changelog":"","sourceType":"middleware"},{"version":"0.2.0","date":"2024-03-11T11:52:18.989Z","link":"https://www.npmjs.com/package/@gavdi/cap-batch/v/0.2.0","changelog":"","sourceType":"middleware"},{"version":"modified","date":"2024-03-24T06:25:12.901Z","link":"https://www.npmjs.com/package/@gavdi/cap-batch/v/modified","changelog":"","sourceType":"middleware"},{"version":"0.2.5","date":"2024-03-12T06:25:57.125Z","link":"https://www.npmjs.com/package/@gavdi/cap-batch/v/0.2.5","changelog":"","sourceType":"middleware"},{"version":"0.2.6","date":"2024-03-15T07:24:43.478Z","link":"https://www.npmjs.com/package/@gavdi/cap-batch/v/0.2.6","changelog":"","sourceType":"middleware"}]},{"name":"@gavdi/caplog","version":"2.4.8","description":"Easy NodeJS Logging Utils","author":"Simon Vestergaard Laursen","repository":"github:gavdilabs/caplog","license":"Apache-2.0","private":false,"keywords":["logging","cap","sap"],"files":["lib/**/*"],"main":"lib/index.js","types":"lib/index.d.ts","scripts":{"test":"jest --config jestconfig.json","build":"tsc --project tsconfig.build.json","docs":"typedoc --out docs src/index.ts","format":"prettier --write \"src/**/*.ts\"","lint":"tslint -p tsconfig.json"},"peerDependencies":{"@sap/cds":"^7.5.0"},"devDependencies":{"@sap/cds":"^7.5.0","@types/jest":"^27.5.2","jest":"^28.1.3","prettier":"^2.7.1","ts-jest":"^28.0.7","tslint":"^6.1.3","tslint-config-prettier":"^1.18.0","typedoc":"^0.22.18","typescript":"^4.7.4"},"type":"middleware","tags":["typescript","logging"],"gitHubOwner":"gavdilabs","gitHubRepo":"caplog","licenseSource":"apache-2.0","forks":1,"stars":0,"createdAt":"2024-03-11T11:53:17.749Z","updatedAt":"2024-03-24T06:25:13.377Z","vscodeInstalls":-1,"sourceType":"middleware","githublink":"https://github.com/gavdilabs/caplog/tree/main/","readme":"# @gavdi/caplog - Easy CAP Logging Utility\n\n> Current Version: 2.0.0\n>\n> **NOTE:** This version contains breaking changes from the previous 1.0.1 version!\n>\n> @gavdi/caplog no longer makes use of any external logging component to integrate with the CAP environment.\n> This change has been made to ensure full compatability with telemetry offerings in the cloud environment.\n\n> Maintainer: Simon Laursen - svl@gavdilabs.com\n\n## How It Works\n\n```@gavdi/caplog``` is a small and tiny logging package that provides a simple and clean logging output to allow for better readability on BTP.\n\nIn the new 2.0 version of the logging package, the package abstracts away the logging facade native within CAP and provides type declarations.\n\nThe logger is intended for providing concise and clear information to the developer concerning their service, and with the new version now also through open telemetry.\n\n### Installation\n\nTo install the package, run the following command:\n\n```bash\nnpm install --save @gavdi/caplog\n```\n\nOnce NPM (or your package manager of choice) is done installing the dependency, you can then add a logger like so:\n\n```typescript\nimport { LoggerFactory } from \"@gavdi/caplog\";\n\n// Default logger\nLoggerFactory.createLogger();\n\n// Custom named logger\nLoggerFactory.createLogger(\"custom\");\n\n// Service bound logger\nLoggerFactory.createLogger(Service);\n```\n\nThe format you'll receive on your logged messages will look as follows:\n\n```txt\n[2024-01-03T11:42:38.045Z |::TRACE::| <tenant-id> | <ctx-id> | <log-id> ] Your message will be here\n[2024-01-03T11:42:38.045Z |::DEBUG::| <tenant-id> | <ctx-id> | <log-id> ] Your message will be here\n[2024-01-03T11:42:38.045Z |::INFO ::| <tenant-id> | <ctx-id> | <log-id> ] Your message will be here\n[2024-01-03T11:42:38.045Z |::WARN ::| <tenant-id> | <ctx-id> | <log-id> ] Your message will be here\n[2024-01-03T11:42:38.045Z |::ERROR::| <tenant-id> | <ctx-id> | <log-id> ] Your message will be here\n```\n\n## Configuration\n\nThe logging component can be configured using the following:\n\n1. In the service' environment, add the environment variable ```LOG_LEVEL``` and set the desired level at which the logger should operate. Options are:\n    - ```TRACE``` - Outputs all possible loggings to the application log\n    - ```DEBUG``` - Outputs debug level logs and above to the application log\n    - ```INFO``` - Only outputs info logs and above to the application console\n    - ```WARN``` - Only outputs warning logs and above to the application console\n    - ```ERROR``` - Only outputs error logs to the application console\n    - ```SILENT``` - No output to the application console, i.e. no visible trace of any internal logs\n2. When creating the logger instance, a custom format can be setup.\n   This format is specifically tied to the logger that you create at that point in time.\n    - Example:\n        ```typescript\n        // Creating and formatting the new logger\n        import { LoggerFactory } from \"@gavdi/caplog\";\n\n        const logger = LoggerFactory.createInstance(\"custom-format\", (id: string, level: number, ...args) => [\n            `[${(new Date).toISOString()}]`,\n            `[${level}]`,\n            `[${id}]`,\n            \" -> \",\n            ..args\n        ]);\n\n        logger.trace(\"Your message\", \"will be here\");\n        ```\n        ```shell\n        -- output\n        [2024-01-03T11:42:38.045Z][5][<log-id>] -> Your message will be here\n        ```\n        Internally the log levels are translated from numbers  into text using a dictionary.\n        This dictionary can be utilized through the utility function ```translateLogLevel(logLevel)```.\n\n## API\n\nTo provide the safest and easiest logging utility out there, this neat little package only comes with the following API:\n\n### LoggerFactory Methods\n\n| Method              | Parameters             | Description                                                       |\n|---------------------|----------------------- |-------------------------------------------------------------------|\n| Logger.createLogger | relation = cds.Service or string | Creates new logger instance. Relation input is optional | \n\n\n### Logger Methods\n\n| Method              | Parameters             | Description                                                       |\n|---------------------|----------------------- |-------------------------------------------------------------------|\n| Logger.trace | args = unlimited input of any type | Log trace level message |\n| Logger.debug | args = unlimited input of any type | Log debug level message |\n| Logger.info  | args = unlimited input of any type | Log info level message  | \n| Logger.warn  | args = unlimited input of any type | Log warn level message  | \n| Logger.error | args = unlimited input of any type | Log error level message  | \n\n----------------------------------------------------------------\n(c) Copyright by Gavdi Labs 2024 - All Rights Reserved\n\n","downloadsCurrentMonth":53,"downloadsCurrentFortnight":19,"downloads365":461,"downloadsFortnightGrowth":-44.12,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":0},{"yearMonth":"2024-01","downloads":0},{"yearMonth":"2024-02","downloads":0},{"yearMonth":"2024-03","downloads":342},{"yearMonth":"2024-04","downloads":66},{"yearMonth":"2024-05","downloads":53}],"npmlink":"https://www.npmjs.com/package/@gavdi/caplog","versions":[{"version":"created","date":"2024-03-11T11:53:17.749Z","link":"https://www.npmjs.com/package/@gavdi/caplog/v/created","changelog":"","sourceType":"middleware"},{"version":"2.4.5","date":"2024-03-11T11:53:17.974Z","link":"https://www.npmjs.com/package/@gavdi/caplog/v/2.4.5","changelog":"","sourceType":"middleware"},{"version":"modified","date":"2024-03-24T06:25:13.377Z","link":"https://www.npmjs.com/package/@gavdi/caplog/v/modified","changelog":"","sourceType":"middleware"},{"version":"2.4.6","date":"2024-03-11T12:26:17.646Z","link":"https://www.npmjs.com/package/@gavdi/caplog/v/2.4.6","changelog":"","sourceType":"middleware"},{"version":"2.4.7","date":"2024-03-12T06:28:35.364Z","link":"https://www.npmjs.com/package/@gavdi/caplog/v/2.4.7","changelog":"","sourceType":"middleware"},{"version":"2.4.8","date":"2024-03-15T08:48:15.209Z","link":"https://www.npmjs.com/package/@gavdi/caplog/v/2.4.8","changelog":"","sourceType":"middleware"}]},{"name":"@gavdi/cap-service-core","version":"1.1.7","description":"Core library for CAP NodeJS","main":"dist/index.js","module":"dist/index.js","types":"dist/types/types.d.ts","author":"Allan Christensen","repository":"github:gavdilabs/cap-service-core","license":"Apache-2.0","scripts":{"prebuild":"rm -rf dist","build":"npm run prebuild && tsc --skipLibCheck","release":"npm run build && npm publish","test":"echo 'Missing test setup'"},"peerDependencies":{"@sap/cds":"^7.5.2"},"dependencies":{"@gavdi/caplog":"^2.4.6","cds-routing-handlers":"^3.0.7","express":"^4.17.3","typedi":"^0.10.0"},"devDependencies":{"@sap/cds":"^7.5.2","@types/chai":"^4.3.4","@types/chai-http":"^4.2.0","@types/express":"^4.17.13","@types/node":"^20.5.1","chai":"^4.3.7","chai-http":"^4.3.0","typescript":"^5.1.3"},"type":"middleware","tags":["typescript","utils"],"gitHubOwner":"gavdilabs","gitHubRepo":"cap-service-core","licenseSource":"apache-2.0","forks":1,"stars":0,"createdAt":"2024-03-11T11:53:40.514Z","updatedAt":"2024-03-24T06:25:12.952Z","vscodeInstalls":-1,"sourceType":"middleware","githublink":"https://github.com/gavdilabs/cap-service-core/tree/main/","readme":"# @gavdi/cap-service-core - CAP Core Library\n\nCore library for CAP NodeJS applications\n\n## What's in the box?\n\nWith `@gavdi/cap-service-core` you'll get everything you need to develop a solid service layer for your solutions.\n\nThe core layer comes with the abstractions for service connections and database queries,\ngiving you the option to focus on what is important for your project instead.\n\nOn top of this, you'll also get what you need to ensure dependency injection in your code,\nwithout having to write too much boilerplate code everytime you start a new project.\n\n### Features\n\n- Dependency Injection\n- External service abstractions\n- Default logging middleware for service requests\n\n## How To Install\n\nThe core layer is super simple to include in your projects, just run the install command:\n\n```shell\nnpm i --save @gavdi/cap-service-core\n```\n\nAnd you're now free to make use of all the library at your leisure.\nHowever, to get the most out of the library, it is recommended to bootstrap your service with the core.\nTo see how to do that, see the [configuration section](##configuration).\n\n## Configuration\n\nWhen bootstrapping your service in your `service.ts` file, you can include the core layer by bootstrapping using the recommended approach seen below:\n\n```typescript\nimport {\n  ExternalServiceFactory,\n  InitDIContainer,\n  LoggingMiddleware,\n} from \"@gavdi/cap-service-core\";\nimport { Service } from \"@sap/cds/apis/services\";\nimport { createCombinedHandler, useContainer } from \"cds-routing-handlers\";\nimport \"reflect-metadata\";\nimport Container from \"typedi\";\n\nconst hdl = createCombinedHandler({\n  handler: [\n    // Entity Handlers\n    `${__dirname}/api/handlers/**/*.js`,\n    `${__dirname}/api/handlers/**/*.ts`,\n\n    // Function/Action Import Handlers\n    `${__dirname}/api/functions/**/*.js`,\n    `${__dirname}/api/functions/**/*.ts`,\n    `${__dirname}/api/actions/**/*.js`,\n    `${__dirname}/api/actions/**/*.ts`,\n  ],\n  middlewares: [LoggingMiddleware],\n});\n\nexport default async (srv: Service) => {\n  // Configure handlers\n  hdl(srv);\n\n  // Setup the DI Container\n  await InitDIContainer([\n    { id: \"sf\", value: await ExternalServiceFactory.createInstance(SF) },\n    {\n      id: \"sf-tech\",\n      value: await ExternalServiceFactory.createInstance(SFTech),\n    },\n  ]);\n\n  // Needed by our handler constructor for dependency injection\n  useContainer(Container);\n};\n```\n\n## TODOs\n\n- [ ] Port over batch query builder to own package and include as part of core\n- [ ] Provide standard utility functions for the core\n- [ ] Provide default standard types for use with standard apps\n- [ ] Abstract away the cds-routing-handlers setup\n- [ ] Include heavily used transaction functions as a part of library\n- [ ] Provide unit testing setup for library\n- [ ] Remove dependency for cds-routing-handlers and use dx-frontier's solution instead\n\n---\n\n(c) Copyright by Gavdi Labs 2024 - All Rights Reserved\n","downloadsCurrentMonth":33,"downloadsCurrentFortnight":17,"downloads365":256,"downloadsFortnightGrowth":6.25,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":0},{"yearMonth":"2024-01","downloads":0},{"yearMonth":"2024-02","downloads":0},{"yearMonth":"2024-03","downloads":188},{"yearMonth":"2024-04","downloads":35},{"yearMonth":"2024-05","downloads":33}],"npmlink":"https://www.npmjs.com/package/@gavdi/cap-service-core","versions":[{"version":"created","date":"2024-03-11T11:53:40.514Z","link":"https://www.npmjs.com/package/@gavdi/cap-service-core/v/created","changelog":"","sourceType":"middleware"},{"version":"1.1.4","date":"2024-03-11T11:53:40.861Z","link":"https://www.npmjs.com/package/@gavdi/cap-service-core/v/1.1.4","changelog":"","sourceType":"middleware"},{"version":"modified","date":"2024-03-24T06:25:12.952Z","link":"https://www.npmjs.com/package/@gavdi/cap-service-core/v/modified","changelog":"","sourceType":"middleware"},{"version":"1.1.7","date":"2024-03-15T09:17:32.153Z","link":"https://www.npmjs.com/package/@gavdi/cap-service-core/v/1.1.7","changelog":"","sourceType":"middleware"}]},{"name":"cap-js-mockdata","version":"0.0.3","description":"SAP CAP plugin to generate mock data.","author":"Mauricio Lauffer","license":"MIT","homepage":"https://github.com/mauriciolauffer/cap-js-mockdata#readme","main":"cds-plugin.js","files":["cds-plugin.js"],"keywords":["sap","cap","cds","sap-cap","cap-js","nodejs","plugin","mockdata","data"],"workspaces":[".","examples/*"],"scripts":{"lint":"eslint . --cache","lint:ci":"eslint . -f @microsoft/eslint-formatter-sarif -o eslint.sarif","test":"vitest --coverage","test:ci":"vitest run"},"dependencies":{"@faker-js/faker":"^8.4.1","json-2-csv":"^5.5.1"},"devDependencies":{"@sap/eslint-plugin-cds":"^2.7.0","@types/node":"^20.12.7","@vitest/coverage-v8":"^1.5.0","eslint":"^8.57.0","eslint-config-mlauffer-nodejs":"^1.4.6","supertest":"^6.3.4","vitest":"^1.2.2"},"peerDependencies":{"@sap/cds":">=7"},"repository":{"type":"git","url":"git+https://github.com/mauriciolauffer/cap-js-mockdata.git"},"bugs":{"url":"https://github.com/mauriciolauffer/cap-js-mockdata/issues"},"type":"plugin","tags":["mock"],"gitHubOwner":"mauriciolauffer","gitHubRepo":"cap-js-mockdata","licenseSource":"mit","forks":0,"stars":1,"createdAt":"2024-04-19T19:46:27.100Z","updatedAt":"2024-04-21T18:27:05.134Z","vscodeInstalls":-1,"sourceType":"plugin","githublink":"https://github.com/mauriciolauffer/cap-js-mockdata/tree/main/","readme":"# SAP CAP Mockdata Plugin\n\n[![npm](https://img.shields.io/npm/v/cap-js-mockdata)](https://www.npmjs.com/package/cap-js-mockdata) [![test](https://github.com/mauriciolauffer/cap-js-mockdata/actions/workflows/test.yml/badge.svg)](https://github.com/mauriciolauffer/cap-js-mockdata/actions/workflows/test.yml)\n\nA [SAP CAP plugin](https://cap.cloud.sap/docs/node.js/cds-plugins) to generate CSV files populated with mock data for testing.\n\nThis plugin uses [Faker](https://fakerjs.dev/) to generate meaningful mock data both automatically and through annotations.\n\n## Setup\n\nAll you need to do is to install the plugin and add the `@Mockdata` annotations to your entities.\n\n### Installation\n\nInstall the plugin as an npm module:\n\n```shell\nnpm i -D cap-js-mockdata\n```\n\n### Annotation\n\nThe annotation tag is `@Mockdata`. You can add and combine all valid [Faker module APIs](https://fakerjs.dev/api/).\n\n```js\n// db/schema.cds\n\nentity Customers : cuid, managed {\n  name       String  @Mockdata: {person: 'fullName'};\n  sex        String  @Mockdata: {person: 'sex'};\n  creditCard String  @Mockdata: {finance: 'creditCardNumber'};\n  phone      String  @Mockdata: {phone: 'number'};\n  ipAddress  String  @Mockdata: {internet: 'ipv4'};\n  email      String  @Mockdata: {internet: 'email'};\n  street     String  @Mockdata: {location: 'streetAddress'};\n  country    String  @Mockdata: {location: 'countryCode'};\n};\n```\n\n### Using\n\nOnce you have installed the plugin and added the annotations, or not, you can execute the following command in a terminal:\n\n```shell\ncds add mockdata\n```\n\nThe `cds add mockdata` command will create CSV files for every supported CDS Entity. The CSV files will be created into the `db/data` folder, the filenames will be something like `namespace-entityName.csv` and their content will look like:\n\n|ID                                  |createdAt                                                 |createdBy      |modifiedAt                                                |modifiedBy             |name              |sex   |creditCard              |phone              |ipAddress      |email                        |street             |country                |\n|------------------------------------|----------------------------------------------------------|---------------|----------------------------------------------------------|-----------------------|------------------|------|------------------------|-------------------|---------------|-----------------------------|-------------------|-----------------------|\n|bef3c7b8-1232-4860-bded-efd51443e508|Sun Oct 06 2024 15:55:24 GMT-0300 (Brasilia Standard Time)|Julius_Hintz48 |Sun Nov 03 2024 14:38:56 GMT-0300 (Brasilia Standard Time)|Brain_Mosciski         |Edgar Langosh     |female|3564-4519-0923-7387     |801.226.6645 x01258|214.155.102.159|Marcellus.Fritsch@hotmail.com|640 Bramley Close  |Austria                |\n|96ac7211-691a-4c2a-8fc0-0ae509693193|Thu Mar 28 2024 20:32:35 GMT-0300 (Brasilia Standard Time)|Clotilde_DAmore|Thu Nov 23 2023 10:49:44 GMT-0300 (Brasilia Standard Time)|Brendan.Corwin-Schinner|Erica McDermott   |male  |6567-6280-8822-5389-0611|(240) 938-1223     |37.230.118.100 |Shayne78@gmail.com           |1803 Feeney Park   |Cocos (Keeling) Islands|\n|4fc525bc-e22b-4c55-a447-0e4c9fef1ffd|Fri Feb 09 2024 15:21:45 GMT-0300 (Brasilia Standard Time)|Lance78        |Fri Feb 14 2025 05:25:29 GMT-0300 (Brasilia Standard Time)|Donny_Blanda           |Joseph Lehner     |male  |4686210527760           |312-939-7109       |14.207.231.127 |Daija_Oberbrunner94@gmail.com|79422 Collin Divide|Portugal               |\n|872b47a8-0bb1-47af-bc02-ef7290cff633|Sat Feb 22 2025 01:34:16 GMT-0300 (Brasilia Standard Time)|Mateo22        |Sun Sep 15 2024 18:42:41 GMT-0300 (Brasilia Standard Time)|Myrtle52               |Leigh Wintheiser I|male  |6759-2563-9161-5976     |553.277.9724 x231  |10.88.166.234  |Elyssa.Adams79@gmail.com     |139 Park Drive     |Macao                  |\n","downloadsCurrentMonth":16,"downloadsCurrentFortnight":4,"downloads365":143,"downloadsFortnightGrowth":-66.67,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":0},{"yearMonth":"2024-01","downloads":0},{"yearMonth":"2024-02","downloads":0},{"yearMonth":"2024-03","downloads":0},{"yearMonth":"2024-04","downloads":125},{"yearMonth":"2024-05","downloads":18}],"npmlink":"https://www.npmjs.com/package/cap-js-mockdata","versions":[{"version":"created","date":"2024-04-19T19:46:27.100Z","link":"https://www.npmjs.com/package/cap-js-mockdata/v/created","changelog":"","sourceType":"plugin"},{"version":"0.0.2","date":"2024-04-19T19:46:27.240Z","link":"https://www.npmjs.com/package/cap-js-mockdata/v/0.0.2","changelog":"","sourceType":"plugin"},{"version":"modified","date":"2024-04-21T18:27:05.134Z","link":"https://www.npmjs.com/package/cap-js-mockdata/v/modified","changelog":"","sourceType":"plugin"},{"version":"0.0.3","date":"2024-04-21T18:27:04.716Z","link":"https://www.npmjs.com/package/cap-js-mockdata/v/0.0.3","changelog":"","sourceType":"plugin"}],"changelog":"# Changelog\n\n## [0.0.3](https://github.com/mauriciolauffer/cap-js-mockdata/compare/v0.0.2...v0.0.3) (2024-04-21)\n\n\n### Bug Fixes\n\n* peerDependencies ([#3](https://github.com/mauriciolauffer/cap-js-mockdata/issues/3)) ([e862609](https://github.com/mauriciolauffer/cap-js-mockdata/commit/e8626095587f55f2556ee714f63b5024eb53e0dd))\n\n## 0.0.2 (2024-04-19)\n\n\n### Bug Fixes\n\n* MVP ([#1](https://github.com/mauriciolauffer/cap-js-mockdata/issues/1)) ([616f19f](https://github.com/mauriciolauffer/cap-js-mockdata/commit/616f19f183619868216805918bba2985fb6bf8f3))\n"},{"name":"cds-entra-id","version":"1.0.5","description":"Microsoft Entra ID Authorization extension for SAP Cloud Application Programming Model","keywords":["sap","cap","cds","entra id","authorization"],"repository":{"type":"git","url":"git+https://github.com/vobu/cds-entra-id.git"},"bugs":{"url":"https://github.com/vobu/cds-entra-id/issues"},"homepage":"https://github.com/vobu/cds-entra-id?tab=readme-ov-file#cds-entra-id","license":"Apache-2.0","author":"Volker Buzek <volker.buzek@js-soft.com>","main":"index.js","files":["index.js","lib","package.json","CHANGELOG.md","LICENSE","README.md"],"scripts":{"prepare":"husky","release":"commit-and-tag-version","test":"vitest"},"devDependencies":{"@commitlint/cli":"^18.6.0","@commitlint/config-conventional":"^18.6.0","commit-and-tag-version":"^12.2.0","husky":"^9.0.7","vitest":"^1.2.2"},"peerDependencies":{"@sap/cds":"^7"},"type":"authentication","tags":["azure"],"gitHubOwner":"vobu","gitHubRepo":"cds-entra-id","licenseSource":"apache-2.0","forks":1,"stars":5,"createdAt":"2024-01-31T16:29:53.465Z","updatedAt":"2024-02-01T19:23:04.773Z","vscodeInstalls":-1,"sourceType":"authentication","githublink":"https://github.com/vobu/cds-entra-id/tree/main/","readme":"# cds-entra-id\n\nA SAP Cloud Application Programming Model (CAP) plugin to map Entra ID *authorization* to the `cds.User` scope.\n\nIt is intended as a drop-in **authorization** mapper for a CAP app running on Azure AppServices - not (!) locally. The plugin *does not support any authentication flow*, but the mapping of Entra ID artefacts to CAP roles for declarative authorization.\n\n## Requirements\n\n:exclamation: Your CAP app must be protected by [OAuth 2.0 authorization with Microsoft Entra ID](https://learn.microsoft.com/en-us/entra/architecture/auth-oauth2), configured via the `App Service` → `Settings` → `Authentication`\n\nBoth `Entra ID Groups` (https://learn.microsoft.com/en-us/entra/identity-platform/optional-claims#configure-groups-optional-claims) and `App roles` https://learn.microsoft.com/en-us/security/zero-trust/develop/configure-tokens-group-claims-app-roles  are supported to be subsequentially used for annotation in CDS files.\n\n## Installation + Configuration\n\n```shell\nnpm i --save cds-entra-id\n```\n\nThen tell your CAP app to use this plugin (see https://cap.cloud.sap/docs/node.js/cds-env#sources-for-cds-env for possible config file locations and configuration options).\n\nE.g. in `./.cdsrc.json`:\n\n```json\n{\n  \"requires\": {\n    \"auth\": {\n      \"[development]\": { // <-- let's keep local dev as is\n        \"kind\": \"mocked\"\n      },\n      \"[production]\": { // <-- grow as you go when deployed to Azure\n        \"impl\": \"cds-entra-id\"\n      }\n    }\n  }\n}\n```\n\nFor Debugging purposes, you can set the enviornment variable `DEBUG=cds-entra-id` as with [all CAP `DEBUG` options](https://cap.cloud.sap/docs/node.js/cds-log#debug-env-variable).\n\n## Usage\n\nAnnotate your `.cds` services as usual:\n\n```cds\nservice its {\n    @(requires: 'authenticated-user')\n    function ok() returns String;\n    @(requires: ['7b428506-466b-45b0-9cbf-4e1b20734874', 'test-app-role'])\n    function nok() returns String;\n}\n```\n\nThe function import `ok()` requires any authenticated user, no matter the role or group.\n\nHowever, `nok()` requires the logged in user \n\n- to be a member of the `Entra ID` group '7b428506-466b-45b0-9cbf-4e1b20734874' or\n- a member of the `App role` 'test-app-role'.\n\nWhy a GUID for an Entra ID group and not a regular name? Entra ID passes out group memberships only as GUIDs in order to prevent wrongful impersonation. As the note on https://learn.microsoft.com/en-us/entra/identity/hybrid/connect/how-to-connect-fed-group-claims explains: \n\n> \"a group name is not unique, and display names can only be emitted for groups explicitly assigned to the application to reduce the security risks. Otherwise, any user could create a group with duplicate name and gain access in the application side.\"\n\nThe same website also states:\n\n> When you're using group membership for in-application authorization, it's preferable to use the group `ObjectID` attribute. The group `ObjectID` attribute is immutable and unique in Microsoft Entra ID. It's available for all groups.\n\nAnd that's why `cds-entra-id` supports GUIDs for Entra ID group authorizations.\n\nThe `App roles` are app-specific (and not valid Entra ID-wide). They are relayed as regular names and can be used as such for CDS annotations.\n\n## Under the hood :blue_car:\n\nThe plugin parses the OAuth 2.0 claims into proper CAP User objects.\n\nAdditionally, it has no Node.js module dependencies - yay.\n\n## Contributing\n\n:computer: hack away and PR!\n\n- please use [conventional commits](https://www.conventionalcommits.org/en/v1.0.0/) so the changelog can be auto-generated. Their usage here is guarded by :dog: [husky](https://typicode.github.io/husky/).\n- please format the code w/ [Prettier](https://prettier.io). A `.prettierrc` is in the repo.\n\n## License\n\nThis work is dual-licensed under Apache 2.0 and the Derived Beer-ware 🍺 License. The official license will be Apache 2.0 but finally you can choose between one of them if you use this work.\n\nThus, when you like this stuff, buy [any (or all 😆) of the contributors](https://github.com/ui5-community/wdi5/graphs/contributors) a beer when you see them.\n","downloadsCurrentMonth":16,"downloadsCurrentFortnight":3,"downloads365":422,"downloadsFortnightGrowth":-76.92,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":0},{"yearMonth":"2023-10","downloads":0},{"yearMonth":"2023-11","downloads":0},{"yearMonth":"2023-12","downloads":0},{"yearMonth":"2024-01","downloads":15},{"yearMonth":"2024-02","downloads":333},{"yearMonth":"2024-03","downloads":37},{"yearMonth":"2024-04","downloads":21},{"yearMonth":"2024-05","downloads":16}],"npmlink":"https://www.npmjs.com/package/cds-entra-id","versions":[{"version":"created","date":"2024-01-31T16:29:53.465Z","link":"https://www.npmjs.com/package/cds-entra-id/v/created","changelog":"","sourceType":"authentication"},{"version":"1.0.0","date":"2024-01-31T16:29:53.641Z","link":"https://www.npmjs.com/package/cds-entra-id/v/1.0.0","changelog":"","sourceType":"authentication"},{"version":"modified","date":"2024-02-01T19:23:04.773Z","link":"https://www.npmjs.com/package/cds-entra-id/v/modified","changelog":"","sourceType":"authentication"},{"version":"1.0.2","date":"2024-02-01T14:37:29.512Z","link":"https://www.npmjs.com/package/cds-entra-id/v/1.0.2","changelog":"","sourceType":"authentication"},{"version":"1.0.3","date":"2024-02-01T16:41:49.108Z","link":"https://www.npmjs.com/package/cds-entra-id/v/1.0.3","changelog":"","sourceType":"authentication"},{"version":"1.0.4","date":"2024-02-01T19:17:35.542Z","link":"https://www.npmjs.com/package/cds-entra-id/v/1.0.4","changelog":"","sourceType":"authentication"},{"version":"1.0.5","date":"2024-02-01T19:23:04.609Z","link":"https://www.npmjs.com/package/cds-entra-id/v/1.0.5","changelog":"","sourceType":"authentication"}],"changelog":"# Changelog\n\nAll notable changes to this project will be documented in this file. See [commit-and-tag-version](https://github.com/absolute-version/commit-and-tag-version) for commit guidelines.\n\n## [1.0.5](https://github.com/vobu/cds-entra-id/compare/v1.0.4...v1.0.5) (2024-02-01)\n\n## [1.0.4](https://github.com/vobu/cds-entra-id/compare/v1.0.3...v1.0.4) (2024-02-01)\n\n\n### Bug Fixes\n\n* user.roles is an object... ([dffb12b](https://github.com/vobu/cds-entra-id/commit/dffb12b3cc0edc1e6d5ab59abdf962ed52f3a1df))\n\n## [1.0.3](https://github.com/vobu/cds-entra-id/compare/v1.0.2...v1.0.3) (2024-02-01)\n\n\n### Bug Fixes\n\n* role validation ([18cf2cb](https://github.com/vobu/cds-entra-id/commit/18cf2cbb022e552e53db7a0034fd49b15eeb24e6))\n\n## [1.0.2](https://github.com/vobu/cds-entra-id/compare/v1.0.0...v1.0.2) (2024-02-01)\n\n\n### Bug Fixes\n\n* prop access ([4bcb284](https://github.com/vobu/cds-entra-id/commit/4bcb2849e84fe9b25cf20efc55deeec576695f6f))\n\n## [1.0.1](https://github.com/vobu/cds-entra-id/compare/v1.0.0...v1.0.1) (2024-02-01)\n\n\n### Bug Fixes\n\n* prop access ([4bcb284](https://github.com/vobu/cds-entra-id/commit/4bcb2849e84fe9b25cf20efc55deeec576695f6f))\n\n## 1.0.0 (2024-01-31)\n"},{"name":"sap-cap-sdm-plugin","version":"0.0.1","description":"An SAP CAP plugin designed for effortless integration with SAP Document Management Service. ","author":"Vinícius Barrionuevo","license":"MIT","private":false,"repository":{"type":"git","url":"https://github.com/vneecious/sap-cap-sdm-plugin"},"publishConfig":{"registry":"https://registry.npmjs.org"},"main":"cds-plugin.js","files":["lib","srv"],"keywords":["sap","cap","dms","sdm","plugin"],"scripts":{"lint":"npx eslint .","test":"jest --silent --setupFiles dotenv/config --config jest.config.js","test:debug":"jest --setupFiles dotenv/config --config jest.config.js"},"peerDependencies":{"@sap/cds":"^7.6.3"},"dependencies":{"@sap-cloud-sdk/connectivity":"^3.12.0","@sap-cloud-sdk/openapi":"^3.12.0","form-data":"^4.0.0","mime":"^3.0.0","odata-v4-parser":"^0.1.29"},"devDependencies":{"@sap-cloud-sdk/openapi-generator":"^3.12.0","@sap/cds":"^7.6.3","axios":"^1.6.7","dotenv":"^16.3.1","eslint":"^8.50.0","jest":"^29.7.0","semantic-release":"^22.0.5","sqlite3":"^5.1.6"},"plugins":[["@semantic-release/commit-analyzer",{"preset":"conventionalcommits","releaseRules":[{"type":"build","scope":"deps","release":"patch"}]}],["@semantic-release/release-notes-generator",{"preset":"conventionalcommits","presetConfig":{"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Bug Fixes"},{"type":"build","section":"Dependencies and Other Build Updates","hidden":false}]}}],"@semantic-release/npm","@semantic-release/github",["@semantic-release/git",{"message":"chore(release): ${nextRelease.version} [skip ci]\n\n${nextRelease.notes}"}]],"type":"tool","tags":["sap"],"gitHubOwner":"vneecious","gitHubRepo":"sap-cap-sdm-plugin","licenseSource":"apache-2.0","forks":3,"stars":4,"createdAt":"2023-09-27T13:09:27.219Z","updatedAt":"2024-03-24T13:55:34.637Z","vscodeInstalls":-1,"sourceType":"tool","githublink":"https://github.com/vneecious/sap-cap-sdm-plugin/tree/master/","readme":"# SAP CAP SDM Plugin\n\nA plugin made for SAP Cloud Application Programming (CAP) projects, aimed at effortless integration with SAP Document Management Service (SDM). Achieve smooth connections in a 'CAP-ish' style, solely utilizing CDS Annotations. This makes your DMS integrations simpler and more intuitive.\n\n## Project Overview\n\n`sap-cap-sdm-plugin` is a CDS plugin that provides integration to the SAP Document Management service specifically for CAP projects.\n\n## Requirements\n\nTo use the all-in-one features provided by this plugin, you'll need a paid instance of the [SAP Document Management service](https://help.sap.com/docs/document-management-service?locale=en-US).\n\n## Installation & Setup\n\n### 1. Installation\n\nInstall the plugin using npm with the following command:\n\n```bash\nnpm install sap-cap-sdm-plugin\n```\n\n### 2. Configuration\n\nInclude the plugin in the `cds.requires` section of your `package.json`:\n\n```json\n\"cds\": {\n    \"requires\": {\n        \"sap-cap-sdm-plugin\": {\n            \"impl\": \"sap-cap-sdm-plugin\",\n            \"settings\": {\n                \"destination\": \"<YOUR_SDM_DESTINATION_NAME>\",\n                \"repositoryId\": \"<YOUR_REPOSITORY_ID>\"\n            }\n        }\n    }\n},\n```\n\n### 3. Entity Creation\n\nSet up your entity with the `@Sdm.Entity` annotation. Link your entity properties to CMIS properties using the `@Sdm.Field` annotations:\n\n```cds\nservice SampleService {\n    @cds.persistence.skip\n    @Sdm.Entity\n    entity Files {\n        key id           : String      @Sdm.Field      : { type : 'property', path : 'cmis:objectId' };\n            name         : String      @Sdm.Field      : { type : 'property', path : 'cmis:name' };\n            content      : LargeBinary @Core.MediaType : contentType  @Core.ContentDisposition.Filename : name;\n            contentType  : String      @Core.IsMediaType\n                                       @Sdm.Field      : { type : 'property', path : 'cmis:contentStreamMimeType' };\n            createdBy    : String      @Sdm.Field      : { type : 'property', path : 'cmis:createdBy' };\n            creationDate : Date        @Sdm.Field      : { type : 'property', path : 'cmis:creationDate' };\n    }\n}\n```\n\n### 4. Get Started\n\nAfter setting up, check your configuration to make sure everything is okay.\n\n## Additional Features\n\n1. File URL\n\nObtain a direct URL to the document by specifying `type: 'link'` within the `@Sdm.Field` annotation.\n\n```cds\n    url: String @Sdm.Field : { type : 'link' };\n```\n\n2. CMIS Client\n\nIf the entity annotations don't meet your needs, you can use the CMIS Client to implement your own logic.\n\nThis service follows the specs of [SAP Document Management Service, Integration Options - CMIS](https://api.sap.com//package/SAPDocumentManagementServiceIntegrationOptionCMISAPI/rest) from [SAP Business Accelerator Hub](https://api.sap.com/).\n\n### Usage:\n\n```javascript\nconst client = await cds.connect.to('cmis-client');\n// create a folder in root\nawait client\n  .createFolder('your_repository_id', 'folder_name')\n  .execute(destination);\n```\n\nCheck `test/cmis` for more examples.\n\n3. SDM Administrative Operations\n\nThere's also a service for admin tasks, like adding a new repository. This service comes from the [Document Management Service, Integration Options - AdminAPI](https://api.sap.com/api/AdminAPI/overview).\n\n### Usage:\n\n```javascript\nconst admin = await cds.connect.to('sdm-admin');\n\n// add a new repository\nawait admin.onboardARepository({\n  repository: {\n    displayName: 'sdm-plugin',\n    description: 'sdm-plugin',\n    repositoryType: 'internal',\n    isVersionEnabled: 'false',\n  },\n});\n```\n\nCheck `test/admin` for more examples.\n\n## Limitations\n\nThis is an early release, so some SAP DMS features are not yet supported, including:\n\n- Repositories with `isVersionEnabled` set to true;\n- Repositories with `isThumbnailEnabled` set to true;\n- Bulk upload;\n- Bulk download;\n","downloadsCurrentMonth":45,"downloadsCurrentFortnight":14,"downloads365":1559,"downloadsFortnightGrowth":-54.84,"downloadsHistory":[{"yearMonth":"2023-07","downloads":0},{"yearMonth":"2023-08","downloads":0},{"yearMonth":"2023-09","downloads":138},{"yearMonth":"2023-10","downloads":297},{"yearMonth":"2023-11","downloads":72},{"yearMonth":"2023-12","downloads":59},{"yearMonth":"2024-01","downloads":253},{"yearMonth":"2024-02","downloads":477},{"yearMonth":"2024-03","downloads":160},{"yearMonth":"2024-04","downloads":58},{"yearMonth":"2024-05","downloads":45}],"npmlink":"https://www.npmjs.com/package/sap-cap-sdm-plugin","versions":[{"version":"created","date":"2023-09-27T13:09:27.219Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/created","changelog":"","sourceType":"tool"},{"version":"1.0.0","date":"2023-09-27T13:09:27.504Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.0.0","changelog":"","sourceType":"tool"},{"version":"modified","date":"2024-03-24T13:55:34.637Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/modified","changelog":"","sourceType":"tool"},{"version":"1.0.1","date":"2023-09-27T17:46:53.134Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.0.1","changelog":"","sourceType":"tool"},{"version":"1.1.0","date":"2023-10-26T02:21:03.776Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.1.0","changelog":"","sourceType":"tool"},{"version":"1.2.0","date":"2023-10-27T13:43:36.521Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.0","changelog":"","sourceType":"tool"},{"version":"1.2.1","date":"2023-10-29T20:38:46.902Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.1","changelog":"","sourceType":"tool"},{"version":"1.2.2","date":"2024-01-02T14:01:51.298Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.2","changelog":"","sourceType":"tool"},{"version":"1.2.3","date":"2024-01-11T12:34:12.121Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.3","changelog":"","sourceType":"tool"},{"version":"1.2.4","date":"2024-02-01T14:47:06.682Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.4","changelog":"","sourceType":"tool"},{"version":"1.2.5","date":"2024-02-14T23:27:09.476Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.5","changelog":"","sourceType":"tool"},{"version":"1.2.6","date":"2024-02-15T03:21:26.761Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.6","changelog":"","sourceType":"tool"},{"version":"1.2.7","date":"2024-02-16T01:37:27.028Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.2.7","changelog":"","sourceType":"tool"},{"version":"1.3.0","date":"2024-02-26T12:45:03.686Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.3.0","changelog":"","sourceType":"tool"},{"version":"1.3.1","date":"2024-03-24T13:55:34.193Z","link":"https://www.npmjs.com/package/sap-cap-sdm-plugin/v/1.3.1","changelog":"","sourceType":"tool"}]},{"name":"@capire/samples","version":"2.0.0","description":"A monorepo with several samples for CAP.","repository":"https://github.com/sap-samples/cloud-cap-samples.git","author":"daniel.hutzel@sap.com","dependencies":{"@sap/cds":">=7"},"workspaces":["./bookshop","./bookstore","./common","./data-viewer","./fiori","./hello","./media","./orders","./loggers","./reviews"],"devDependencies":{"@cap-js/sqlite":"^1","@sap/eslint-plugin-cds":"^3","axios":"^1","chai":"^4.3.4","chai-as-promised":"^7.1.1","chai-subset":"^1.6.0","eslint":"^9","semver":"^7"},"scripts":{"cleanup":"rm -rf node_modules && rm -rf */node_modules && rm -rf */*/node_modules","bookshop":"cds watch bookshop","fiori":"cds watch fiori","hello":"cds watch hello","media":"cds watch media","mocha":"CDS_TEST_SILENT=y npx mocha","jest":"npx jest --silent","start":"cds watch fiori","test":"npm run jest -- --silent","test:hello":"cd hello && npm test","lint":"eslint ."},"jest":{"testTimeout":20000,"testMatch":["**/*.test.js"]},"mocha":{"recursive":true,"parallel":true,"timeout":6666},"license":"apache-2.0","private":true,"type":"sampleapp","tags":["sample"],"gitHubOwner":"SAP-samples","gitHubRepo":"cloud-cap-samples","licenseSource":"apache-2.0","forks":482,"stars":449,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2019-09-06T19:41:28Z","updatedAt":"2024-05-31T12:24:07Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/SAP-samples/cloud-cap-samples/tree/main/","readme":"# Welcome to cap/samples\n\nFind here a collection of samples for the [SAP Cloud Application Programming Model](https://cap.cloud.sap) organized in a simplistic [monorepo setup](samples.md#all-in-one-monorepo).\n\n[See **Overview** of contained samples](samples.md):\n\n![](etc/samples.drawio.svg)\n\n![](https://github.com/SAP-samples/cloud-cap-samples/workflows/CI/badge.svg)\n[![REUSE status](https://api.reuse.software/badge/github.com/SAP-samples/cloud-cap-samples)](https://api.reuse.software/info/github.com/SAP-samples/cloud-cap-samples)\n\n\n\n### Preliminaries\n\n1. Ensure you have the latest LTS version of Node.js installed (see [Getting Started](https://cap.cloud.sap/docs/get-started/))\n2. Install [**@sap/cds-dk**](https://cap.cloud.sap/docs/get-started/) globally:\n\n   ```sh\n   npm i -g @sap/cds-dk\n   ```\n\n3. _Optional:_ [Use Visual Studio Code](https://cap.cloud.sap/docs/get-started/tools#vscode)\n\n### Download\n\nIf you've [Git](https://git-scm.com/downloads) installed, clone this repo as shown below, otherwise [download as ZIP file](archive/main.zip).\n\n```sh\ngit clone https://github.com/sap-samples/cloud-cap-samples samples\ncd samples\n```\n\n### Setup\n\nIn the samples folder run:\n\n```sh\nnpm install\n```\n\n### Run\n\nWith that you're ready to run the samples, for example:\n\n```sh\ncds watch bookshop\n```\n\nAfter that open this link in your browser: [http://localhost:4004](http://localhost:4004)\n\nWhen asked to log in, type `alice` as user and leave the password field blank, which is the [default user](https://cap.cloud.sap/docs/node.js/authentication#mocked).\n\n### Testing\n\nRun the provided tests with [_jest_](http://jestjs.io) or [_mocha_](http://mochajs.org), for example:\n\n```sh\nnpx jest\n```\n> While mocha is a bit smaller and faster, jest runs tests in parallel and isolation, which allows to run all tests.\n\n## Code Tours\n\nTake one of the [guided tours](.tours) in VS Code through our CAP samples and learn which CAP features are showcased by the different parts of the repository. Just install the [CodeTour extension](https://marketplace.visualstudio.com/items?itemName=vsls-contrib.codetour) for VS Code. We'll add more code tours in the future. Stay tuned!\n\n## Get Support\n\nCheck out the documentation at [https://cap.cloud.sap](https://cap.cloud.sap). <br>\nIn case you've a question, find a bug, or otherwise need support, use our [community](https://answers.sap.com/tags/9f13aee1-834c-4105-8e43-ee442775e5ce) to get more visibility.\n\n\n## License\n\nCopyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved. This file is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSE) file.\n"},{"name":"@capire/sflight","version":"1.0.0","private":true,"description":"CAP flight demo scenario","license":"apache-2.0","repository":"https://github.com/SAP-samples/cap-sflight","engines":{"node":">=18"},"scripts":{"lint":"npx eslint .","start":"cds-serve","test":"jest","test:mocha":"npx mocha --timeout 20000","travel-processor":"cds watch --open travel_processor/webapp/index.html?sap-ui-xx-viewCache=false","travel-analytics":"cds watch --open travel_analytics/webapp/index.html?sap-ui-xx-viewCache=false"},"dependencies":{"@sap/cds":">=7.0.0","@sap/xssec":"^3.2.7","express":"^4","hdb":"^0.19.1"},"devDependencies":{"@cap-js/sqlite":"^1.0.1","@sap/ux-specification":"UI5-1.121","axios":"^1","chai":"^4.3.0","chai-as-promised":"^7.1.1","chai-subset":"^1.6.0","cross-spawn":"^7.0.3","http-proxy":"^1.18.1","jest":"^29.0.2","qunit":"^2.9.3","eslint":"^9"},"cds":{"requires":{"db":{"kind":"sql"},"[production]":{"db":{"kind":"hana-cloud"},"auth":{"kind":"xsuaa"}},"[development]":{"auth":{"kind":"mocked-auth","users":{"rose":{"roles":[]},"martha":{"roles":["reviewer"]},"amy":{"roles":["processor"]},"admin":{"password":"admin","roles":["admin"]}}}}},"log":{"service":true},"features":{"odata_new_parser":true},"build":{"[node!]":{"target":"gen","tasks":[{"for":"node-cf"},{"for":"hana"}]},"[java]":{"target":".","tasks":[{"for":"java-cf"}]},"[hana]":{"target":"gen","tasks":[{"for":"hana"}]}},"sql":{"transitive_localized_views":false,"native_hana_associations":false}},"jest":{"testEnvironment":"node","testTimeout":20000},"sapux":["app/travel_processor","app/travel_analytics"],"type":"sampleapp","tags":["sample"],"gitHubOwner":"SAP-samples","gitHubRepo":"cap-sflight","licenseSource":"apache-2.0","forks":115,"stars":164,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2021-04-20T22:14:27Z","updatedAt":"2024-05-31T08:35:31Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/SAP-samples/cap-sflight/tree/main/","readme":"# Welcome to the CAP SFLIGHT App\n\nThis is a sample app for the travel reference scenario, built with the [SAP Cloud Application Programming Model (CAP)](https://cap.cloud.sap) and [SAP Fiori Elements](https://experience.sap.com/fiori-design-web/smart-templates).\n\nThe purpose of this sample app is to:\n* Demonstrate SAP Fiori annotations\n* Demonstrate and compare SAP Fiori features on various stacks (CAP Node.js, CAP Java SDK, ABAP)\n* Run UI test suites on various stacks\n\n![Process Travels Page](img.png)\n\nThe app still contains some workarounds that are going to be addressed over time.\nIn some cases, the model and the handlers can be improved or simplified once further planned CAP features become available.\nIn other cases, the app itself could be improved. For example, calculation of the total price for a travel\ncurrently simply sums up the single prices ignoring the currencies.\n\n> For enabling all features of the Analytical List Page (ALP) in the Node.js runtime, we have switched on the new OData parser \n(`odata_new_parser: true` in `package.json`), which is still in an **experimental state**.\nEarly adopters may use this feature in own projects on their own risk.\nYou can also use the ALP with the standard OData parser, but then some features like grouping in the table are not available.\n\n![](https://github.com/SAP-samples/cap-sflight/workflows/CI/badge.svg)\n[![REUSE status](https://api.reuse.software/badge/github.com/SAP-samples/cap-sflight)](https://api.reuse.software/info/github.com/SAP-samples/cap-sflight)\n\n\n## Run locally\n\n### Build and Run - Node.js Backend\n\nIn the root folder of your project, run\n```\nnpm ci\ncds watch\n```\n\n### Build and Run - Java Backend\n\nIn the root folder of your project, run\n```\nnpm ci\nmvn spring-boot:run\n```\n\n### Accessing the SAP Fiori Apps\n\nOpen these links in your browser:\n* http://localhost:4004/travel_processor/webapp/index.html for processing the travel data\n* http://localhost:4004/travel_analytics/webapp/index.html for the [Analytical List Page](https://ui5.sap.com/#/topic/3d33684b08ca4490b26a844b6ce19b83) (ALP)\n\nLog in with user `amy` and empty password.\n\n### Integration Tests\n\nTo start OPA tests, open this link in your browser:\nhttp://localhost:4004/travel_processor/webapp/test/integration/Opa.qunit.html\n\nTest documentation is available at:\nhttps://ui5.sap.com/#/api/sap.fe.test\n\n## Deployment to SAP Business Technology Platform\n\nThe project contains a configuration for deploying the CAP services and the SAP Fiori app to the SAP Business Technology Platform (SAP BTP) using a managed application router. The app then becomes visible in the content manager of the SAP Launchpad service.\n\nThe configuration file `mta.yaml` is for the Node.js backend of the app. If you want to deploy the Java backend, copy `mta-java.yaml` to `mta.yaml`.\n\n### Prerequisites\n#### SAP Business Technology Platform\n\n- Create a [trial account on SAP BTP](https://www.sap.com/products/business-technology-platform/trial.html). See this [tutorial](https://developers.sap.com/tutorials/hcp-create-trial-account.html) for more information. Alternatively, you can use a sub-account in a productive environment.\n- Subscribe to the [SAP Launchpad Service](https://developers.sap.com/tutorials/cp-portal-cloud-foundry-getting-started.html).\n- Create an [SAP HANA Cloud Service instance](https://developers.sap.com/tutorials/btp-app-hana-cloud-setup.html#08480ec0-ac70-4d47-a759-dc5cb0eb1d58) or use an existing one.\n\n#### Local Machine\n\n- Install the Cloud Foundry command line interface (CLI). See this [tutorial](https://developers.sap.com/tutorials/cp-cf-download-cli.html) for more details.\n- Install the [MultiApps CF CLI Plugin](https://github.com/cloudfoundry-incubator/multiapps-cli-plugin):\n\n  ```shell\n  cf add-plugin-repo CF-Community https://plugins.cloudfoundry.org\n  cf install-plugin multiapps\n  ```\n\n- Install the [Cloud MTA Build Tool](https://github.com/SAP/cloud-mta-build-tool) globally:\n\n  ```shell\n  npm install -g mbt\n   ```\n\n### Build the Project\n\nBuild the project from the command line:\n\n```shell\nmbt build\n```\n\nThe build results will be stored in the directory `mta_archives`.\n\n### Deploy\n\n1. Log in to the target space.\n2. Deploy the MTA archive using the CF CLI: `cf deploy mta_archives/capire.sflight_1.0.0.mtar`\n\n### Assign Role Collection\n\nAny authorized user has read access to the app. For further authorization, assign a role collection to your user in the SAP BTP Cockpit:\n* `sflight-reviewer-{spacename}` for executing actions *Accept Travel*, *Reject Travel*, and *Deduct Discount*\n* `sflight-processor-{spacename}` for full write access\n\n### Integrate SFlight with SAP Build Workzone, Standard Edition\n\nCAP SFlight uses the managed AppRouter, which in case of a trial account, is provided by the Launchpad Service in SAP Build Workzone, Standard Edition. Please consult [this tutorial](https://developers.sap.com/tutorials/integrate-with-work-zone.html) to make sure that your Launchpad Service is configured correctly to serve the CAP SFlight Frontend.\n\n### Local Development with a HANA Cloud Instance\n\nYou need to have access to a HANA Cloud instance and SAP BTP.\n\n1. Deploy the HDI content to a HANA HDI container (which is newly created on first call): `cds deploy --to hana`.\n2. Start the application with the Spring Profile `cloud`.\n   1. From Maven: `mvn spring-boot:run -Dspring-boot.run.profiles=cloud`\n   2. From your IDE with the JVM argument `-Dspring.profiles.active=cloud` or env variable `spring.profiles.active=cloud`\n\nThe running application is now connected to its own HDI container/schema. Please keep in mind that the credentials for\nthat HDI container are stored locally on your filesystem (default-env.json).\n\n## Deployment to SAP Business Technology Platform - Kyma Runtime\n\nThe deployment to Kyma Runtime is explained in file [README-Kyma-Runtime.md](./README-Kyma-Runtime.md).\n\n## Creating an SAP Fiori App from Scratch\n\nIf you want to implement an SAP Fiori app, follow these tutorials:\n\n* [Create a List Report Object Page App with SAP Fiori Tools](https://developers.sap.com/group.fiori-tools-lrop.html)\n* [Developing SAP Fiori applications with SAP Fiori Tools](https://help.sap.com/viewer/17d50220bcd848aa854c9c182d65b699/Latest/en-US)\n\n## Get Support\n\nIn case you've a question, find a bug, or otherwise need support, use the [SAP Community](https://answers.sap.com/tags/9f13aee1-834c-4105-8e43-ee442775e5ce) to get more visibility.\n\n## License\n\nCopyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved. This project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSES/Apache-2.0.txt) file.\n"},{"name":"ui5-cap-event-app","version":"0.0.0","description":"UI5 CAP Event Application","private":true,"scripts":{"clean":"rimraf dist && npm run clean --workspaces --if-present","build":"npm run clean && mkdirp dist && npm run build --workspaces --if-present && npm run copy","copy":"npm run copy:server:gen && npm run copy:server:app && npm run copy:ui-form && npm run copy:ui-admin && npm run copy:server:pkgJson","copy:server:app":"cpy \"packages/server/app/sandbox.html\" dist/app --rename=index.html --flat","copy:server:gen":"cpy \"packages/server/gen/srv/**\" dist","copy:server:pkgJson":"rimraf dist/package*.json && cpy \"packages/server/package-dist.json\" dist --rename=package.json --flat","copy:ui-form":"cpy \"packages/ui-form/dist/**\" dist/app/form","copy:ui-admin":"cpy \"packages/ui-admin/dist/**\" dist/app/admin","start":"npm run start:server","start:server":"npm run start -w=ui5-cap-event-app-server","start:ui-form":"npm run start -w=ui5-cap-event-app-ui-form","start:ui-admin":"npm run start -w=ui5-cap-event-app-ui-admin"},"repository":{"type":"git","url":"git@github.wdf.sap.corp:uics-innersource/ui5-cap-event-app.git"},"dependencies":{"cpy-cli":"^5.0.0","mkdirp":"^3.0.1","rimraf":"^5.0.1"},"workspaces":["packages/*"],"type":"sampleapp","tags":["sample"],"gitHubOwner":"SAP-samples","gitHubRepo":"ui5-cap-event-app","license":"apache-2.0","licenseSource":"apache-2.0","forks":34,"stars":86,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2020-10-13T16:48:13Z","updatedAt":"2024-05-24T23:06:48Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/SAP-samples/ui5-cap-event-app/tree/main/","readme":"# ui5-cap-event-app\n\n[![REUSE status](https://api.reuse.software/badge/github.com/SAP-samples/ui5-cap-event-app)](https://api.reuse.software/info/github.com/SAP-samples/ui5-cap-event-app)\n\nShowcase of two UI5 user interfaces, one built with freestyle [SAPUI5](https://ui5.sap.com/) (or rather [OpenUI5](https://openui5.org/)), the other using [SAP Fiori elements](https://community.sap.com/topics/fiori-elements), with a [CAP](https://cap.cloud.sap/docs/) backend, using [OData V4](https://www.odata.org/) with [Draft mode](https://experience.sap.com/fiori-design-web/draft-handling/).\n\n## Description\n\nThis app uses simple attendee registration and administration for events as an example scenario for demonstrating the data handling and overall setup. The app consists of three parts: an end-user UI implemented in freestyle SAPUI5, a metadata-driven administrator UI generated with Fiori elements and a Node.js-based CAP backend.\nWhile the code implements a complete end-to-end full-stack app, it is kept as simple as possible and the main focus is on freestyle SAPUI5 code making use of OData V4 as well as of \"Draft\" functionality to persist non-final datasets.\n\nFurther details about how the functionality is implemented can be found [in the documentation](docs/documentation.md).\n\n## Requirements\n\n- [Node.js](https://nodejs.org) (latest LTS version which supports npm workspaces)\n- [SAP CAP CLI](https://www.npmjs.com/package/@sap/cds-dk) (do `npm install -g @sap/cds-dk`)\n- [sqlite3](https://www.sqlite.org) (only needed separately on Windows, [commandline tools](https://www.sqlite.org/download.html) zip need to be downloaded, extracted, and directory added to the PATH)\n\n## Download and Installation\n\n1. Clone the project.\n\n    ```sh\n    git clone https://github.com/SAP-samples/ui5-cap-event-app\n    cd ui5-cap-event-app\n    ```\n\n2. Use npm to install the dependencies.\n\n    ```sh\n    npm i\n    ```\n\n## Running the Project\n\nExecute the following command to run the project locally for development (start the CDS server running the admin UI and form UI embedded):\n\n```sh\nnpm start\n```\n\nAs also shown in the terminal after executing this command, the CDS server is running on http://localhost:4004/.\n\nFor the form UI, you can use user name `employee@test.com` with password `123`. For the admin UI, use `admin@test.com` and password `123`.\n\n## Building the Project\n\nExecute the following command to build the project and get one integrated app that can be deployed (build the form UI, admin UI, and CDS server):\n\n```sh\nnpm run build\n```\n\n**Prerequisite:** `npm run build` runs `cds build` in the CDS server package which requires `@sap/cds-dk`. Please ensure to install `@sap/cds-dk` globally via:\n```sh\nnpm i -g @sap/cds-dk\n```\n\nAfter building the individual packages, the build results will be copied to the central `dist` folder. The resulting package inside the `dist` folder consists of the CDS server hosting the form UI and the admin UI as well as a sandbox Fiori launchpad to start the individual UIs.\n\nTo start the generated package, just run `npm install` and `npm start` inside the `dist` folder. This installs the dependencies and starts the CDS server hosting the UIs. Now the sandbox Fiori launchpad can be opened on http://localhost:4004/.\n\n## Debugging the Project\n\nWe have prepared two ways of debugging the Node.js part of the app easily:\n\n### Debugging with VSCode\n\nThe launch configuration \"debug server in vscode\" is part of the project and can be used to run the CAP server in debug mode and debug directly in VSCode (e.g. set breakpoints).\n\nNote: the UI parts are not started by this launch configuration. To debug the interaction of server and UI, the form UI or admin UI has to be started separately with `npm run start:ui-form` or `npm run start:ui-admin`.\n\n## Limitations\n\nThe local database uses in-memory mode. Data will be re-initialized after each restart.\n\nThe sample does not cover deployment of the app, where additional considerations e.g. regarding database and authentication are needed.\n\n## How to obtain support\n\nThe sample code is provided **as-is**. No support is provided.\n\n## References\n\nOther projects demonstrating similar use-cases:\n\n* https://github.com/vobu/ui5-cap - a repository showcasing the use of UI5 Tooling, CAP + UIveri5-based testing in an app for media upload and preview (as presented at UI5conBE in Feb 2020) by Volker Buzek.\n* https://blogs.sap.com/2020/07/08/ui5-freestyle-app-in-cap - a UI5 freestyle app in CAP, with approuter, by Wouter Lemaire.\n* https://blogs.sap.com/2020/09/06/developing-a-fiori-elements-app-with-cap-and-fiori-tools/ - about developing a Fiori elements app with CAP and Fiori Tools\n* https://blogs.sap.com/2020/04/07/ui5-tooling-a-modern-development-experience-for-ui5/ - an overview on the UI5 Tooling and its extensions for a modern development experience.\n\n## License\n\nCopyright (c) 2020-2023 SAP SE or an SAP affiliate company. All rights reserved.\nThis project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSE) file.\n"},{"name":"lecture-schedule","version":"1.0.0","description":"A sample project to demonstrate how to implement a full-stack app with CAP + SAPUI5 and TypeScript.","repository":"<Add your repository here>","license":"apache-2.0","dependencies":{"@sap/cds":"^6.5.0","@sap/xsenv":"^3.4.0","@sap/xssec":"^3.2.17","express":"^4.18.2","hdb":"^0.19.5","passport":"^0.6.0"},"devDependencies":{"@sap/eslint-plugin-ui5-jsdocs":"^2.0.8","@sap/ux-specification":"^1.102.15","@sapui5/ts-types":"^1.108.5","@types/node":"^18.11.18","@typescript-eslint/eslint-plugin":"^5.50.0","@typescript-eslint/parser":"^5.50.0","eslint":"^8.33.0","npm-run-all":"^4.1.5","sqlite3":"^5.1.4","ts-node":"^10.9.1","typescript":"^4.9.5"},"engines":{"node":">=14"},"scripts":{"start":"cds run","start-service:ts":"cds-ts run --with-mocks --in-memory","start-ui:ts":"npm --prefix ./app/lectures/ run build:ts && npm --prefix ./app/lectures/ run start:ui5","watch":"npm-run-all --parallel watch-service:ts watch-ui:ts","watch-service:ts":"cds-ts watch --open","watch-ui:ts":"npm --prefix ./app/lectures/ run watch:ts","build:cf":"npm run build:cds && npm run cleanup:ts && npm run build:ts","build:ts":"tsc","build:cds":"cds build --production","cleanup:ts":"npx rimraf gen/srv/srv/**/*.ts","lint-service":"eslint srv","lint-ui":"eslint app/lectures/src","ts-typecheck":"tsc --noEmit","undeploy":"cf undeploy lecture-schedule --delete-services --delete-service-keys"},"cds":{"requires":{"[production]":{"uaa":{"kind":"xsuaa","credentials":{}},"db":{"kind":"sql"}},"[development]":{"auth":{"strategy":"mock","users":{"admin":{"password":"initial","ID":"admin","userAttributes":{"email":"admin@tester.sap.com"},"roles":["admin"]},"viewer":{"password":"initial","ID":"viewer","userAttributes":{"email":"viewer@tester.sap.com"},"roles":["viewer"]}}}}},"hana":{"deploy-format":"hdbtable"}},"sapux":["app/lectures"],"type":"sampleapp","tags":["sample"],"gitHubOwner":"SAP-samples","gitHubRepo":"btp-full-stack-typescript-app","licenseSource":"apache-2.0","forks":26,"stars":68,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2021-12-08T16:12:02Z","updatedAt":"2024-05-21T18:24:34Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/SAP-archive/btp-full-stack-typescript-app/tree/main/","readme":"[![Open in Visual Studio Code][vscode-image]][vscode-url]\n[![License Status][license-image]][license-url]\n[![REUSE status][reuse-image]][reuse-url]\n\n![](https://img.shields.io/badge/STATUS-NOT%20CURRENTLY%20MAINTAINED-red.svg?longCache=true&style=flat)\n\n# Important Notice\nThis public repository is read-only and no longer maintained. For the latest sample code repositories, visit the [SAP Samples](https://github.com/SAP-samples) organization.\n\n# Full Stack TypeScript App\n\nThis sample project is a full stack application for the SAP BTP, Cloud Foundry environment that utilizes the SAP Cloud Application Programming Model (CAP) for Node.js and SAPUI5 with TypeScript.\n\n[TypeScript](https://www.typescriptlang.org/) is a superset of JavaScript, which can essentially be described as JavaScript with syntax for types. The additionally added syntax allows a better editor integration and aims to catch errors early in development.\n\nThis project shows a full stack app entirely build with TypeScript. It is based on a basic lecture schedule scenario. The backend service features a simple data model (Rooms, Professors, Courses, Lectures) and provides data to populate a lecture schedule, which is displayed as a planning calendar on the frontend. Users can either view or manage the lecture schedule depending on the roles that are assigned to them.\n\n![diagram](diagram.png)\n\n**UI5 TypeScript Frontend**: A freestyle SAPUI5 app serves as the frontend for the project. Component, Controller, and Formatter are implemented using the perks of TypeScript. If you want to learn more about TypeScript with UI5, have a look at the following resources:\n\n-   [Getting Started with TypeScript for UI5 Application Development](https://blogs.sap.com/2021/07/01/getting-started-with-typescript-for-ui5-application-development/)\n-   [Central entry point for everything TypeScript-related in SAPUI5/OpenUI5](https://sap.github.io/ui5-typescript/)\n-   [UI5 TypeScript Hello World App](https://github.com/SAP-samples/ui5-typescript-helloworld)\n\n**CAP TypeScript Backend**: The backend service is implemented with CAP Node.js. TypeScript is used to write the service handler for the lecture service. A tsconfig.json file is used to define TypeScript compiler options and configuration. You can find more on using TypeScript with CAP here:\n\n-   [CAP Node.js SDK - Using TypeScript](https://cap.cloud.sap/docs/node.js/typescript)\n-   [Hello World! TypeScript sample](https://github.com/SAP-samples/cloud-cap-samples/tree/main/hello)\n\nFor a more detailed description of the sample app and takeaways when using TypeScript, please take a look at the accompanying **blog post**: [Full Stack TypeScript App for Cloud Foundry - Sample Repository](https://blogs.sap.com/2021/12/09/full-stack-typescript-app-for-cloud-foundry-sample-repository)\n\n## Requirements\n\n-   [Node.js](https://nodejs.org/en/download/) LTS Version 14\n-   [npm](https://www.npmjs.com/) or [yarn](https://yarnpkg.com/) for dependency management\n-   install [@sap/cds-dk](https://www.npmjs.com/package/@sap/cds-dk) globally\n-   install [@ui5/cli](https://www.npmjs.com/package/@ui5/cli) globally\n\n## Download and Installation\n\n1. Clone the project:\n\n```sh\ngit clone https://github.com/SAP-samples/btp-full-stack-typescript-app.git\ncd btp-full-stack-typescript-app\n```\n\n(or download from https://github.com/SAP-samples/btp-full-stack-typescript-app/archive/main.zip)\n\n2. In the btp-full-stack-typescript-app folder, use npm (or yarn) to install the dependencies:\n\n```sh\nnpm install\n```\n\n3. In the app/lectures sub-folder, use npm (or yarn) to install the dependencies:\n\n```sh\ncd app/lectures\nnpm install\n```\n\n## Run, Build and Deploy the App\n\n> `npm run start` is for production purposes and **not intended to be used on your local machine**. Since TypeScript code itself cannot be executed, a transpile step to JavaScript is needed before running the project. Choose one of the following options instead to run the app.\n\n### Run the App locally\n\n```sh\nnpm run start-service:ts\n```\n\nThe service is now available at http://localhost:4004.\n\n```sh\nnpm run start-ui:ts\n```\n\nThe UI5 app is now running on http://localhost:8080/index.html (a browser window with this URL opens automatically).\n\nFor local development with **mock authentication** use one of the following **users** to test the app:\n| ID | password |\n| ----------- | ----------- |\n| _admin_ | _initial_ |\n| _viewer_ | _initial_ |\n\n### Run the App locally in watch mode\n\n```sh\nnpm run watch\n```\n\nThis starts a local development server in watch mode. Changes to files (including the uncompiled TypeScript resources) are automatically detected and applied. The CAP service is now available at http://localhost:4004 (a browser window with this URL opens automatically to show the generic index.html page), and the UI5 app can be accessed at http://localhost:4004/webapp/index.html.\n\nFor local development with **mock authentication** use one of the following **users** to test the app:\n| ID | password |\n| ----------- | ----------- |\n| _admin_ | _initial_ |\n| _viewer_ | _initial_ |\n\n### Build the MTA and Deploy to Cloud Foundry\n\n> Additional preparation steps and tools are required to deploy the application to SAP BTP, Cloud Foundry environment. For more information and guidance on the initial setup, please have a look at these tutorials and resources:\n>\n> -   [Create a trial account on SAP BTP](https://developers.sap.com/tutorials/hcp-create-trial-account.html)\n> -   [Create SAP HANA Cloud Service instance](https://developers.sap.com/tutorials/btp-app-hana-cloud-setup.html#08480ec0-ac70-4d47-a759-dc5cb0eb1d58)\n> -   [Install Cloud Foundry CLI](https://developers.sap.com/tutorials/cp-cf-download-cli.html)\n> -   [Install MultiApps CF CLI Plugin](https://github.com/cloudfoundry-incubator/multiapps-cli-plugin)\n> -   [Install Cloud MTA Build Tool](https://sap.github.io/cloud-mta-build-tool/download/)\n\n```sh\nmbt build -t ./\n```\n\n```sh\ncf login\ncf deploy lecture-schedule_1.0.0.mtar\n```\n\n## Limitations\n\n-   The local database uses in-memory mode. Data will be re-initialized after each restart.\n-   The provided sample data only covers a specific timeframe (CW47/2021 to CW05/2022)\n-   The user role check for UI adjustments is based on the standalone approuter and BTP roles. Therefore it is not available when running the app locally.\n\n## Known Issues\n\nNone at the moment.\n\n## How to obtain Support\n\nThis content is provided \"as-is\" with no other support.\n\n## License\n\nCopyright (c) 2021 SAP SE or an SAP affiliate company. All rights reserved. This project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSES/Apache-2.0.txt) file.\n\n[license-image]: https://img.shields.io/github/license/SAP-samples/btp-full-stack-typescript-app.svg\n[license-url]: https://github.com/SAP-samples/btp-full-stack-typescript-app/blob/main/LICENSE\n[reuse-image]: https://api.reuse.software/badge/github.com/SAP-samples/btp-full-stack-typescript-app\n[reuse-url]: https://api.reuse.software/info/github.com/SAP-samples/btp-full-stack-typescript-app\n[vscode-image]: https://open.vscode.dev/badges/open-in-vscode.svg\n[vscode-url]: https://open.vscode.dev/SAP-samples/btp-full-stack-typescript-app/\n"},{"description":"Material for the CodeJam on service integration with the SAP Cloud Application Programming Model.","type":"sampleapp","tags":["sample"],"gitHubOwner":"SAP-samples","gitHubRepo":"cap-service-integration-codejam","license":"apache-2.0","licenseSource":"apache-2.0","forks":20,"stars":30,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2023-01-30T18:35:53Z","updatedAt":"2024-05-07T07:48:23Z","vscodeInstalls":-1,"sourceType":"sampleapp","name":"cap-service-integration-codejam","githublink":"https://github.com/SAP-samples/cap-service-integration-codejam/tree/main/","readme":"# Service integration with SAP Cloud Application Programming Model\n\n[![REUSE status](https://api.reuse.software/badge/github.com/SAP-samples/cap-service-integration-codejam)](https://api.reuse.software/info/github.com/SAP-samples/cap-service-integration-codejam)\n\n## Description\n\nThis repository contains the material for the \"Service Consumption with the SAP Cloud Application Programming Model\" CodeJam, brought to you by the Developer Advocates at SAP.\n\n## Overview\n\nThis CodeJam introduces attendees to service integration with the SAP Cloud Application Programming Model (CAP). Specifically, the Node.js flavor of CAP is used.\n\nDuring this event, you'll become acquainted with how external services can be integrated and consumed from within a CAP project. In working through the exercises you'll also become comfortable with various facilities that CDS offers for declaring, relating and exposing entities, and familiar with how the SAP Cloud SDK covers connectivity and destinations, supporting such integration scenarios with CAP.\n\n## Session prerequisites\n\nIn order to get the most from this CodeJam, and to be able to work through the exercises, there are certain prerequisites that you must have sorted out before the day of the CodeJam.\n\nThe prerequisites are detailed in a separate [prerequisites](prerequisites.md) file. Please ensure you have everything ready before attending the CodeJam.\n\n## Exercises\n\nThese are the exercises, each in their own directory, sometimes with supporting files and scripts. We will work through the exercises in the order shown here. From a session flow perspective, we are taking the \"coordinated\" approach:\n\nThe instructor will set you off on the first exercise, and that's the only one you should do; if you finish before others, there are some questions at the end of the exercise for you to ponder. Do not proceed to the next exercise until the instructor tells you to do so.\n\n> The exercises are written in a conversational way; this is so that they have enough context and information to be completed outside the hands-on session itself. To help you navigate and find what you have to actually do next, there are pointers like this 👉 throughout that indicate the things you have to actually do (as opposed to just read for background information).\n\n1. [Set up your workspace](exercises/01-set-up-workspace/)\n1. [Explore the basic service](exercises/02-explore-basic-service/)\n1. [Import an OData service definition](exercises/03-import-odata-api/)\n1. [Understand service mocking](exercises/04-understand-service-mocking/)\n1. [Add test data for the mocked external service](exercises/05-add-test-data/)\n1. [Mock external service in a separate process](exercises/06-mock-separate-process/)\n1. [Add CDS definitions to integrate services](exercises/07-add-cds-definitions/)\n1. [Introduce SAP Cloud SDK](exercises/08-introduce-sap-cloud-sdk/)\n1. [Set up the real remote system configuration](exercises/09-set-up-remote-system-configuration/)\n1. [Run the service with real remote delegation](exercises/10-run-with-real-remote-delegation/)\n1. [Associate local and remote entities](exercises/11-associate-local-remote-entities/)\n1. [Extend the SAP Fiori elements UI with annotations](exercises/12-extend-fiori-ui-with-annotations)\n\n## Feedback\n\nIf you can spare a couple of minutes at the end of the session, please help us improve for next time by providing some feedback.\n\nSimply use this [Give Feedback](https://github.com/SAP-samples/cap-service-integration-codejam/issues/new?assignees=&labels=feedback&template=session-feedback-template.md&title=Session%20Feedback) link to create a special \"feedback\" issue, and follow the instructions in there.\n\nThank you!\n\n## Acknowledgements\n\nThe exercise content in this repository is based on previous work for an SAP TechEd 2 hour workshop, written by Christian Georgi of the CAP team.\n\n## How to obtain support\n\nSupport for the content in this repository is available during the actual time of the CodeJam event for which this content has been designed.\n\n## License\n\nCopyright (c) 2023 SAP SE or an SAP affiliate company. All rights reserved. This project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSES/Apache-2.0.txt) file.\n"},{"name":"@capire/bookshop","version":"1.0.0","description":"A simple self-contained bookshop service.","files":["app","srv","db","index.cds","index.js"],"workspaces":["app","app/admin-books"],"dependencies":{"@sap/cds":"^6.3.2","@sap/cds-dk":"^6.4.0","@sap/cds-odata-v2-adapter-proxy":"^1.9.0","@sap/xssec":"^3","express":"^4.17.1","passport":">=0.4.1","sqlite3":"^5"},"devDependencies":{"@sap/ux-specification":"^1.102.14","axios":"^1","chai":"^4.3.4","chai-as-promised":"^7.1.1","chai-subset":"^1.6.0","semver":"^7"},"scripts":{"genres":"cds serve test/genres.cds","start":"cds deploy && cds run","watch":"cds watch","undeploy":"cf undeploy capire-bookshop --delete-services --delete-service-keys --delete-service-brokers","build":"rimraf resources && mbt build -t gen --mtar mta.tar","deploy":"cf deploy gen/mta.tar -f"},"engines":{"node":"^18"},"cds":{"features":{"fiori_preview":true,"fiori_routes":true},"requires":{"db":"sql","auth":{"kind":"dummy"},"[production]":{"db":{"kind":"sqlite","credentials":{"database":"wdi5.db"}},"auth":{"kind":"dummy"}},"[development]":{"db":{"kind":"sqlite","credentials":{"database":"wdi5.db"}}}}},"sapux":["app/admin-books"],"type":"sampleapp","tags":["sample","wdi5"],"gitHubOwner":"SAP-samples","gitHubRepo":"cap-bookshop-wdi5","license":"apache-2.0","licenseSource":"apache-2.0","forks":42,"stars":8,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2022-10-12T11:25:28Z","updatedAt":"2024-04-17T14:07:58Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/SAP-samples/cap-bookshop-wdi5/tree/main/","readme":"# Automated System Tests for CAP-Based Projects\n\n[![REUSE status](https://api.reuse.software/badge/github.com/SAP-samples/cap-bookshop-wdi5)](https://api.reuse.software/info/github.com/SAP-samples/cap-bookshop-wdi5)\n\n## Description\nThis repository contains a sample SAP Fiori application based on SAP Cloud Application Programming Model (CAP). It is used in the following SAP tutorial for developers.\n\nhttps://developers.sap.com/tutorials/cicd-wdi5-cap.html\n\n## Requirements & Installation\n\nRefer to the prerequisites in the SAP tutorial above.\n\n## Known Issues\n\nNo known issues.\n\n## How to obtain support\n[Create an issue](https://github.com/SAP-samples/cap-bookshop-wdi5/issues) in this repository if you find a bug or have questions about the content.\nDetailed documentation, roadmap and support channels for wdi5-related topics can be found in the [wdi5 repository](https://github.com/ui5-community/wdi5) of the UI5-community.\nFor additional support, [ask a question in SAP Community](https://answers.sap.com/questions/ask.html).\n\n## License\nCopyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved. This project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSE) file.\n"},{"description":"This repository contains material related to a talk on what the SAP Cloud Application Programming Model (CAP) has to offer in terms of OData V4.0","type":"sampleapp","tags":["sample"],"gitHubOwner":"qmacro","gitHubRepo":"odata-v4-and-cap","licenseSource":"apache-2.0","forks":0,"stars":8,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2022-09-19T09:48:28Z","updatedAt":"2024-01-08T11:14:13Z","vscodeInstalls":-1,"sourceType":"sampleapp","name":"odata-v4-and-cap","githublink":"https://github.com/qmacro/odata-v4-and-cap/tree/main/","readme":"# OData V4 and SAP Cloud Application Programming Model\n\n## Description\n\nThis repository contains material related to a talk on what the SAP Cloud Application Programming Model (CAP) has to offer in terms of OData V4.\n\n## Slides material\n\nPresentation slides in this repository are in Markdown and can be presented with the excellent [terminal slides](https://github.com/maaslalani/slides) tool, or simply read as rendered Markdown.\n"},{"name":"hacking.away.sampleapp-reactor","version":"0.0.0","private":true,"description":"TypeScript UI5 sample application show-casing the latest shit!","author":"Volker Buzek, Wouter Lemaire, Peter Muessig","license":"apache-2.0","repository":{"type":"git","url":"https://github.com/ui5-community/hacking-away-sampleapp.git"},"engines":{"node":">=16"},"packageManager":"pnpm@7.1.7","scripts":{"build":"pnpm -r build","start":"run-p watch:library watch:server start:ui","start:ui":"pnpm --filter @local/ui start","start:lib":"pnpm --filter @local/library start","watch:library":"pnpm --filter @local/library watch","watch:server":"pnpm --filter @local/server watch","lint":"pnpm --workspace-concurrency 1 -r lint","lint:staged":"pnpm -r lint:staged","lint:commit":"commitlint -e","prettier":"prettier --write .","prettier:staged":"pretty-quick --staged --verbose","prepare":"node ./.husky/skip.js || husky install","hooks:pre-commit":"npm-run-all --sequential prettier:staged lint:staged","hooks:pre-push":"npm-run-all --sequential lint:commit","ncu":"for d in ./packages/*/ ; do (cd \"$d\" && ncu); done","ncu-u":"for d in ./packages/*/ ; do (cd \"$d\" && ncu -u); done","wdi5":"pnpm --filter @local/ui wdi5"},"devDependencies":{"@commitlint/cli":"^17.1.2","@commitlint/config-conventional":"^17.1.0","@prettier/plugin-xml":"^2.2.0","cz-conventional-changelog":"^3.3.0","eslint":"^8.24.0","husky":"^8.0.1","lint-staged":"^13.0.3","npm-run-all":"^4.1.5","prettier":"^2.7.1","prettier-plugin-properties":"^0.2.0","pretty-quick":"^3.1.3","wait-on":"^6.0.1"},"type":"sampleapp","tags":["sample"],"gitHubOwner":"ui5-community","gitHubRepo":"hacking-away-sampleapp","licenseSource":"apache-2.0","forks":1,"stars":10,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2021-12-22T10:06:17Z","updatedAt":"2023-09-19T19:52:46Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/ui5-community/hacking-away-sampleapp/tree/main/","readme":"# Sample ToDo app UI5con 2022\n\n## Description\n\nThis app demonstrates a TypeScript setup for developing UI5 applications containing a custom UI5 Library with a custom control and a CAP project as a backend.\n\n**The ui package is inspired by the [`SAP-samples/ui5-typescript-helloworld`](https://github.com/SAP-samples/ui5-typescript-helloworld) project which  also contains [a detailed step-by-step guide](https://github.com/SAP-samples/ui5-typescript-helloworld/blob/main/step-by-step.md). It explains how this setup is created and how all the bits and pieces fit together**\n\n| :point_up: Overview of TypeScript-related Entities |\n|:---------------------------|\n| The UI5 type definitions (`*.d.ts` files) are loaded as dev dependency from [npm](https://www.npmjs.com/package/@openui5/ts-types-esm). They are work in progress, so while they should be working well already, we are still improving them, which might also lead to breaking changes. |\n| The file [tsconfig.json](tsconfig.json) contains the configuration for the TypeScript compilation, including a reference to these UI5 `*.d.ts` files. |\n| Normally, the UI5 JavaScript files (controllers, Component.js etc.) would reside in the `webapp` folder. Now they are in the [src](src) folder. The TypeScript compilation will create the `webapp` folder and put all output there. |\n| In addition to the TypeScript compilation, there is also a conversion from the ES6 module and class syntax used in the source files to the classic UI5 module loading and class definition syntax (`sap.ui.define(...)` and `superClass.extend(...)`). This conversion is using the [babel-plugin-transform-modules-ui5](https://github.com/r-murphy/babel-plugin-transform-modules-ui5) project from Ryan Murphy. |\n| Both, the TypeScript compilation and the ES6 syntax transformation, are executed by Babel, as configured in the file [.babelrc.json](.babelrc.json) |\n| This combined transformation is triggered by both the `build:ts` and `watch:ts` scripts in [package.json](package.json). |\n\n## Project setup\nPNPM as package manager for monorepo\n\nSeparate packages for:\n - UI5 application: packages/ui/\n - UI5 library: packages/library/\n - CAP server: packages/server/\n\nCAP server is proxied by UI5 application\n\nUI5 application depends on the UI5 library project which is consumed as regular dependency\n\n![Project setup Image](./images/project.png)\n\n## UI setup\nThis UI app demonstrates on how to get the most out of TypeScript using classes, generic types and much more. This is all explained in details in the following blog post: https://blogs.sap.com/2021/12/07/my-first-experience-with-typescript-in-ui5-classes-and-state-model-manager/\n\nThe app is separated in multiple layers:\n - Service layer which handles the communication to the backend\n - Data model layer which contains a virtual replication of the data model in the backend and handles everything related to the internal data model\n - View/controller will be dedicated to handle user interaction\n\n![UI setup image](./images/ui-structure.png)\n\n## UI Library\nMore information regarding custom UI5 Libraries and custom controls can be found here: https://github.com/SAP-samples/ui5-typescript-control-library\n\n## Testing\nThe end-to-end tests are done by using WDI5: https://github.com/ui5-community/wdi5\n\n## Requirements\n\n[npm](https://www.npmjs.com/) for dependency management.\n\n## Preparation\n\nUse `npm` to install the dependencies:\n\n```sh\nnpm i\n```\n\n## Run the App\n\nExecute the following command to run the app locally for development in watch mode (the browser reloads the app automatically when there are changes in the source code):\n\n```sh\nnpm start\n```\n\nAs shown in the terminal after executing this command, the app is then running on http://localhost:8080/index.html. A browser window with this URL should automatically open.\n\n## Debug the App\n\nIn the browser, you can directly debug the original TypeScript code, which is supplied via sourcemaps (need to be enabled in the browser's developer console if it does not work straight away). If the browser doesn't automatically jump to the TypeScript code when setting breakpoints, use e.g. Ctrl+P in Chrome to open the `*.ts` file you want to debug.\n\n## Build the App\n\nExecute the following command to build all packages at once:\n\n```sh\nnpm run build\n```\n\n## References\n\nOnce you have understood the setup and want to inspect the code of a slightly more comprehensive UI5 app written in TypeScript, you can check out the [TypeScript version of the UI5 CAP Event App Sample](https://github.com/SAP-samples/ui5-cap-event-app/tree/typescript).\n\n\n## License\n\nThis project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSE) file.\n"},{"name":"notification-admin","version":"1.0.0","description":"CAP/Fiori application for managing SAP Launchpad service notification types","repository":"http://github.com/stockbal/cf-launchpad-notification-admin","license":"mit","private":true,"dependencies":{"@sap-cloud-sdk/connectivity":"^2.11.0","@sap-cloud-sdk/http-client":"^2.11.0","@sap-cloud-sdk/util":"^2.11.0","@sap/cds":"^6.3.1","@sap/xssec":"^3","express":"^4","hdb":"^0.19.0","passport":"^0"},"devDependencies":{"@commitlint/cli":"^17.3.0","@commitlint/config-conventional":"^17.3.0","@sap/ux-specification":"^1.102.13","@types/axios":"^0.14.0","@typescript-eslint/eslint-plugin":"^5.45.0","@typescript-eslint/parser":"^5.45.0","cds2types":"^3.0.0","eslint":"^8.29.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.2.1","husky":"^8.0.2","lint-staged":"^13.1.0","npm-run-all":"^4.1.5","prettier":"^2.8.0","rimraf":"^3.0.2","sqlite3":"^5.0.4","ts-node":"^10.9.1","typescript":"^4.9.3"},"commitlint":{"extends":["@commitlint/config-conventional"]},"lint-staged":{"*.{css,json,yml}":["prettier --write"],"*.{js,ts}":["eslint --fix"]},"prettier":{"trailingComma":"none","printWidth":100,"arrowParens":"avoid"},"scripts":{"start":"cds run","watch":"cds-ts watch","gen:cds-types":"cds2types -c ./srv -o ./srv/types/cds/ -f -s","undeploy":"cf undeploy notification-admin --delete-services --delete-service-keys --delete-service-brokers","get:env":"cf de notification-admin-srv","build":"rimraf resources mta_archives && mbt build --mtar archive","deploy":"cf deploy mta_archives/archive.mtar --retries 1"},"engines":{"node":"^16.15"},"cds":{"requires":{"[production]":{"auth":{"kind":"xsuaa"},"db":{"kind":"hana-cloud"}},"[development]":{"auth":{"strategy":"dummy"},"db":{"kind":"sqlite"}}}},"sapux":["app/notification-types-admin"],"type":"sampleapp","tags":["sample"],"gitHubOwner":"stockbal","gitHubRepo":"cf-launchpad-notification-admin","licenseSource":"mit","forks":0,"stars":4,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2022-12-11T15:04:51Z","updatedAt":"2023-01-12T13:54:56Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/stockbal/cf-launchpad-notification-admin/tree/main/","readme":"# Admin Service/UI for SAP Launchpad Notification Service\n\nProject to allow an easier maintenance of notification types for the SAP Launchpad Notification Service (see [here](https://help.sap.com/docs/Launchpad_Service/8c8e1958338140699bd4811b37b82ece/fe40c015d2b24487945f4b40ed86534e.html?locale=en-US)).\n\nThis project adds the following capabilities to the Notification service.\n\n- UI for easy maintenance -> enable business users\n- Easy synchronization of existing entries from the notification service\n  > **Note**: Only the main properties of the notification types can be synced to the local HANA storage as information on *Templates* and *Actions* can not be retrieved via the SAP Launchpad Notification service.\n\n## Features\n\n### Backend\n\nBackend consists of a simple CAP application which persists the notification types to a SAP HANA Cloud database.\n\n### User Interface\n\nEasy to use Fiori Elements application with draft capabilities to maintain notification types for SAP Launchpad Notification Service. Saving or deleting an entity triggers the synchronization to the notification service\n\n![Object Page to maintain Notification Type](./doc/notification-type-op.png)\n\nAllows for direct testing of the notification type by creating a notification\n![Dialog for Notification Testing](./doc/notification-dialog.png)\n\n## Usage\n\n### Preconditions\n\n- Existing SAP BTP Subaccount with the following entitlements:\n  | Service                                    | Plan                  |\n  | ------------------------------------------ | --------------------- |\n  | Authorization and Trust Management Service | application           |\n  | SAP HANA Schemas & HDI Containers          | hdi-shared            |\n  | Destination Service                        | lite                  |\n  | HTML5 Application Repository Service       | app-host, app-runtime |\n\n- Cloud Foundry Environment is enabled in the subaccount\n- Space is created\n- SAP HANA Cloud Database exists in space or is shared\n\n### Deployment\n\n- Logon to subaccount space with authorized user via Cloud Foundry CLI\n- Run command `npm i` in shell\n- Run command `npm run build` in shell\n- Run command `npm run deploy` in shell\n\n### Manual Steps after Deployment\n\n1. Assign role collection `NotificationTypesAdmin` to users who need access to the application\n2. Add the application \"Manage Notification Types\" to a SAP Launchpad Service Site\n\n### Configuration of SAP Launchpad Notification Service\n\n1. Subscribe to SAP Launchpad Service\n2. Navigate to Launchpad Landing Page\n3. Enable Notifications in the settings section\n4. Create a destination with the notification service credentials in your subaccount named `SAP_Notifications` (see [here](https://help.sap.com/docs/Launchpad_Service/8c8e1958338140699bd4811b37b82ece/d5429a2a5d9a4425a461aa06c4ee84e4.html?locale=en-US#configure-the-destination-to-the-notifications-service)).\n\n## Local Setup for `husky`\n\nRun `npx husky install` to install git hooks\n\n## Configure `.env` file for VS Code REST API tests\n\nTemplate for `.env` file\n\n```properties\n# variables communication with the launchpad notification service\nauthUrl=\nnotifUrl=\nnotifClientId=\"\"\nnotifClientSecret=\"\"\n\n# email for notification receiver - i.e. the user who loggs into the launchpad site\nrecipientEmail=\n\n# English properties for notification type template\nTemplateSensitive=\nTemplateGrouped=\nTemplatePublic=\nSubtitle=\n\n# German properties for notification type template\nTemplateSensitive_de=\nTemplateGrouped_de=\nTemplatePublic_de=\nSubtitle_de=\n```\n"},{"name":"bookshop-demo","version":"1.0.0","description":"A simple bookshop application, build in a self-contained all-in-one fashion, i.e. w/o reusing other packages.","repository":"https://github.com/gregorwolf/bookshop-demo.git","engines":{"node":"^20"},"files":["db","srv"],"xdependencies":{"@sap/xotel-agent-ext-js":"https://73555000100200018064.npmsrv.cdn.repositories.cloud.sap/@sap/xotel-agent-ext-js/-/xotel-agent-ext-js-1.5.9.tgz","@sap/fesr-to-otel-js":"https://73555000100200018064.npmsrv.cdn.repositories.cloud.sap/@sap/fesr-to-otel-js/-/fesr-to-otel-js-1.5.3.tgz"},"dependencies":{"@cap-js-community/odata-v2-adapter":"^1","@cap-js/notifications":"^0.1.0","@sap-cloud-sdk/core":"^1","@sap-cloud-sdk/http-client":"^3","@sap-cloud-sdk/util":"^3","@sap/cds":"^7","@sap/cds-common-content":"^1","@sap/cds-hana":"^2.0.0","@sap/jobs-client":"^1","@sap/logging":"^8","@sap/xsenv":"^5","@sap/xssec":"^4","async-retry":"^1","cf-http-client":"^1","cmis":"^1","compression":"^1","dotenv":"^16.3.1","express":"^4","form-data":"^4","helmet":"^7","mqtt":"^5","mysql":"^2","passport":"^0","qs":"^6.11.2","sap-cf-mailer":"^0"},"devDependencies":{"@cap-js/sqlite":"^1","@openui5/ts-types":"^1.108.0","@sap-cloud-sdk/generator":"^3","@sap/cds-dk":"^7","@sap/datasphere-cli":"^2024","@sap/graph-toolkit":"^3","@sap/ux-specification":"^1.120.0","artillery":"2.0.3","cds-swagger-ui-express":"^0","chai":"^4","chai-as-promised":"^7.1.1","chai-subset":"^1.6.0","copyfiles":"2.4.1","express-status-monitor":"^1.3.4","hana2cds":"^0","jest":"^29","json2fs":"^0.1.4","npm-run-all":"^4.1.5","response-time":"^2.3.2","sqlite3":"^5","supertest":"^6"},"scripts":{"setup":"run-s deploy:sqlite:bookshop build start","setup:all":"run-s deploy:sqlite:** build start","update":"run-p update:**","update:root":"npm update","update:app":"cd app && npm update","update:app:item-pricing-cap-v2":"cd app/webapp/item-pricing-cap-v2 && npm update","update:app:item-pricing-for-key-date-cap":"cd app/webapp/item-pricing-for-key-date-cap && npm update","update:app:item-pricing-for-key-date-cap-v2":"cd app/webapp/item-pricing-for-key-date-cap-v2 && npm update","update:app:item-pricing-for-key-date-abap-v2":"cd app/webapp/item-pricing-for-key-date-abap-v2 && npm update","update:approuter":"cd approuter && npm update","update:broker":"cd broker && npm update","update:standalone-v2-proxy":"cd standalone-v2-proxy && npm update","deploy:sqlite:bookshop":"cds deploy --to sqlite:db/bookshop.db","deploy:sqlite:instance:1":"cds deploy --to sqlite:instance1.db --no-save","deploy:sqlite:instance:2":"cds deploy --to sqlite:instance2.db --no-save","deploy:cf":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf.mtaext --retries 0","deploy:cf:trial":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf-trial.mtaext --retries 0","deploy:cf:ui":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf.mtaext -m bookshop-demo-deployer --retries 0","deploy:cf:srv":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf.mtaext -m bookshop-demo-srv --retries 0","deploy:cf:app":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf.mtaext -m bookshop-demo-ui --retries 0","deploy:cf-hana-cloud":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf-hana-cloud.mtaext --retries 0","deploy:cf-hana-cloud-job-standard":"cf deploy mta_archives/bookshop-demo_0.0.1.mtar -e cf-hana-cloud-job-standard.mtaext --retries 0","deploy:hana":"cds deploy --to hana --auto-undeploy --profile hybrid","deploy:hana:instance:1":"cds deploy --to hana:bookshop-demo-db-instance1 --auto-undeploy --profile hybrid-instance1","deploy:hana:instance:2":"cds deploy --to hana:bookshop-demo-db-instance2 --auto-undeploy --profile hybrid-instance2","deploy:xsa:hana":"NODE_ENV=hybrid cds deploy --to hana --vcap-file ./default-env.json --auto-undeploy","deploy:xsa":"xs deploy mta_archives/bookshop-demo_0.0.1.mtar","bind:hana":"cds bind -2 bookshop-demo-db --profile hybrid","bind:uaa":"cds bind uaa --to bookshop-demo-uaa --kind xsuaa --profile hybrid","bind:keyuser":"cds bind keyuser --to bookshop-demo-ui5-flexibility-keyuser --kind ui5-flexibility-keyuser --profile hybrid","create:xsa:uaa":"xs create-service xsuaa broker bookshop-demo-uaa -c xs-security.json","create:uaa-service-key":"xs create-service-key bookshop-demo-uaa dev","get:uaa-service-key":"xs service-key bookshop-demo-uaa dev","create:cf-uaa-service-key":"cf create-service-key bookshop-demo-uaa dev","get:cf-uaa-service-key":"cf service-key bookshop-demo-uaa dev","create:hdi-shared":"xs create-service hana hdi-shared bookshop-demo-db-service","create:hdi-service-key":"xs create-service-key bookshop-demo-db-service dev","get:hdi-service-key":"xs service-key bookshop-demo-db-service dev","create:cf-hdi-service-key":"cf create-service-key bookshop-demo-db-service dev","get:cf-hdi-service-key":"cf service-key bookshop-demo-db-service dev","generate-odata-client:GWSAMPLE_BASIC":"generate-odata-client --inputDir srv/external/GWSAMPLE_BASIC --outputDir srv/cloud-sdk-clients --forceOverwrite","build":"run-s build:clean build:copycsntoproxy","build:clean":"cds build/all --clean","build:xs-security":"cds compile srv/ --to xsuaa > xs-security.json","build:cf":"cp mta-cf.yaml mta.yaml && mbt build -p=cf -e cf-service-broker-private.mtaext && rm mta.yaml && npm install","build:xsa":"cp mta-xsa.yaml mta.yaml && mbt build -p=xsa && rm mta.yaml","build:standalone":"cp mta-standAlone.yaml mta.yaml && mbt build -p=xsa && rm mta.yaml","build:copycsntoproxy":"copyfiles -f gen/srv/srv/csn.json standalone-v2-proxy/gen/","build:docker":"run-s build build:docker:image","build:docker:image":"docker build -t gregorwolf/bookshop-demo:latest .","push:docker":"docker push gregorwolf/bookshop-demo:latest","debug":"node --inspect node_modules/@sap/cds/bin/cds.js run","start:docker":"docker run --name bookshop-demo -d -p 4004:4004 gregorwolf/bookshop-demo:latest","start":"node ${NODE_ARGS} ./node_modules/@sap/cds/bin/cds-serve","start:app":"cds bind --exec -- npm run start-repo-mock --prefix app --profile hybrid","start:hana":"cds bind --exec -- cds run --profile hybrid","start:hybridboth":"run-p start:hybrid:**","start:hybrid:instance1":"cds watch --profile hybrid-instance1","start:hybrid:instance2":"cds watch --profile hybrid-instance2 --port 4005","start:uaa":"NODE_ENV=dev-uaa cds run","start:forExcel":"node srv/index.js","build:deploy:start":"run-s build deploy start","watch":"cds watch --with-mocks --in-memory","watch:instance1":"cds watch --profile instance1","watch:instance2":"cds watch --profile instance2 --port 4005","watchboth":"run-p watch:**","test":"jest --forceExit","test:hana":"CDS_ENV=hybrid cds bind --exec npm run test","test:load:catalog":"artillery run tests/app/catalog.yml","test:load:count-one":"artillery run --dotenv tests/app/.env tests/app/count-one.yml","test:load:count-all":"artillery run --dotenv tests/app/.env tests/app/count-all.yml","cf:uaa:update":"cf update-service bookshop-demo-uaa -c xs-security.json","undeploy:xsa":"xs undeploy bookshop-demo --delete-services --delete-service-brokers","undeploy:cf":"cf undeploy bookshop-demo --delete-service-keys --delete-services --delete-service-brokers","watch-uom-mapping":"cds watch --open uom-mapping/webapp/index.html?sap-ui-xx-viewCache=false"},"cds":{"drafts":{"cancellationTimeout":1},"fiori":{"lean_draft":true,"bypass_draft":true},"features":{"xassert_integrity":"db","serve_on_root":true,"odata_new_parser":true},"cdsc":{"variableReplacements":{"$user":{"directory":"A","version":1},"$session":{"version":"SESSION_CONTEXT('VERSION')"}}},"hana":{"deploy-format":"hdbtable"},"requires":{"destination":{"kind":"rest","credentials":{"destination":"bookshop-demo-destination","requestTimeout":30000}},"CMISdocumentRepository":{"kind":"rest","credentials":{"destination":"CMISdocumentRepository","requestTimeout":30000}},"GWSAMPLE_BASIC":{"kind":"odata-v2","model":"srv/external/GWSAMPLE_BASIC","credentials":{"destination":"ES5","requestTimeout":30000,"path":"/sap/opu/odata/iwbep/GWSAMPLE_BASIC"}},"ZPDCDS_SRV":{"kind":"odata-v2","model":"srv/external/ZPDCDS_SRV","credentials":{"destination":"ES5","requestTimeout":30000,"path":"/sap/opu/odata/sap/ZPDCDS_SRV"}},"ZSOCDS_SRV":{"kind":"odata-v2","model":"srv/external/ZSOCDS_SRV","credentials":{"destination":"ES5","requestTimeout":30000,"path":"/sap/opu/odata/sap/ZSOCDS_SRV"}},"sac-dataimport":{"kind":"rest","csrf":true,"credentials":{"destination":"sac","requestTimeout":30000,"path":"/api/v1/dataimport"}},"Planned_Events_Sample":{"kind":"odata","model":"srv/external/Planned_Events_Sample","credentials":{"destination":"sac","requestTimeout":30000,"path":"/api/v1/dataexport/providers/sac/sap.epm.Planned_Events_Sample:Planned_Events_Sample"}},"xsuaa-api":{"kind":"rest","credentials":{"destination":"bookshop-demo-uaa-apiaccess","requestTimeout":30000}},"CloudFoundryAPI":{"kind":"rest","credentials":{"destination":"CloudFoundryAPI","requestTimeout":30000}},"flow":{"kind":"rest","credentials":{"destination":"flow","requestTimeout":30000}},"API_CV_ATTACHMENT_SRV":{"kind":"odata-v2","model":"srv/external/API_CV_ATTACHMENT_SRV","credentials":{"destination":"S4H","requestTimeout":30000,"path":"/sap/opu/odata/sap/API_CV_ATTACHMENT_SRV"}},"db":{"model":["db","srv"]},"db-ext":{"[hybrid-instance1]":{"model":["db-hana","srv-hana"]},"[hybrid-instance2]":{"model":["db-hana","srv-hana"]},"[hybrid]":{"model":["db-hana","srv-hana"]},"[production]":{"model":["db-hana","srv-hana"]}},"CV_ATTACHMENT_SRV":{"kind":"odata-v2","model":"srv/external/CV_ATTACHMENT_SRV","credentials":{"destination":"S4H","requestTimeout":30000,"path":"/sap/opu/odata/sap/CV_ATTACHMENT_SRV"}},"ZAPI_USER_NAME_SRV":{"kind":"odata-v2","model":"srv/external/ZAPI_USER_NAME_SRV","credentials":{"destination":"SAP_ABAP_BACKEND","requestTimeout":30000,"path":"/sap/opu/odata/sap/ZAPI_USER_NAME_SRV"}}},"[dev-uaa]":{"requires":{"auth":{"kind":"xsuaa"}}},"[hybrid]":{"requires":{"db":{"kind":"hana"}}},"[production]":{"requires":{"auth":{"kind":"xsuaa"}}},"odata":{"version":"v4"}},"sapux":["app/webapp/uom-mapping"],"type":"sampleapp","tags":["sample"],"gitHubOwner":"gregorwolf","gitHubRepo":"bookshop-demo","licenseSource":"mit","forks":75,"stars":103,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2019-07-18T23:22:05Z","updatedAt":"2024-05-29T05:37:15Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/gregorwolf/bookshop-demo/tree/main/","readme":"# Bookshop Sample App\n\nSample application showcasing different services serving the same set of data entities from a sqlite database.\nThe services match different use cases visualized in corresponding Fiori apps.\n\n## Develop in VS Code devcontainer\n\nThe easiest way to get started with devlopment of this project is inside a Docker Devcontainer. See [this blog post](https://github.com/htammen/cap-vscode-dev-container#so-what-do-i-have-to-do) for details.  \nIf you don't have Docker installed **you can of course develop within you local OS**. But in that case you have to install all your tools and vs extensions on your own.\n\n## Preliminaries\n\n- get [_Node.js_](https://nodejs.org/en/) v16 or higher\n- get [_sqlite_](https://www.sqlite.org/download.html) (Windows only; pre-installed on Mac/Linux)\n- As SAP has deprecated their own NPM registry please remove the setting in your npm config with the following command\n\n```sh\nnpm config rm @sap:registry\n```\n\n## Setup\n\nCopy & paste this to your command line:\n\n```sh\ngit clone https://github.com/gregorwolf/bookshop-demo.git\ncd bookshop-demo\nnpm install\nnpm run setup\n```\n\n## Run local\n\nIf you want to try also the external service calls, then you need to create a `default-env.json` file in the project root folder and add the following content:\n\n```json\n{\n  \"destinations\": [\n    {\n      \"name\": \"ES5\",\n      \"url\": \"https://sapes5.sapdevcenter.com\",\n      \"username\": \"<your-ES5-username>\",\n      \"password\": \"<your-ES5-password>\"\n    },\n    {\n      \"name\": \"ERP\",\n      \"url\": \"https://saperp.example.com\",\n      \"username\": \"<your-ERP-username>\",\n      \"password\": \"<your-ERP-password>\"\n    }\n  ]\n}\n```\n\n```sh\nnpm run build\nnpm start\n```\n\nIf you want to test the used SAP Business Technology Platform - Cloud Foundry services you need also to add the VCAP\\*SERVICES variable to `default-env.json`. I.e.:\n\n```json\n{\n  \"VCAP_SERVICES\": {}\n}\n```\n\n## Run local with SAP HANA Cloud (Hybrid Testing)\n\nBefore you can run the following commands you need to connect to the BTP Cloud Foundry environment using:\n\n```\ncf login -a <CF-API-Endpoint> -o <CF-Organization> -s <CF-Space> --sso\n```\n\nThen you can create or update an existing HDI using:\n\n```\nnpm run deploy:hana\n```\n\nThis should write the needed information to `.cdsrc-private.json`. When you have deployed the application already to BTP Cloud Foundry you can run:\n\n```\ncds bind -2 bookshop-demo-db-service --for hybrid\n```\n\nto reuse the existing HDI container. Then you can use:\n\n```\nnpm run test:hana\n```\n\nto start the test or you run\n\n```\nnpm run start:hana\n```\n\nto start the app with SAP HANA Cloud as the database.\n\n## Test\n\nOpen these links in your browser:\n\n- <http://localhost:4004/webapp/fiori.html> &ndash; Fiori Launchpad sandbox\n\n## Late-Cut Microservices\n\nThe services:\n\n- JobService\n- JobExecutionService\n\nshow a concrete example of the [Late-Cut Microservices](https://cap.cloud.sap/docs/guides/providing-services#late-cut-microservices).\n\nTo get the two instances talk to each other you need to add the following entries in `default-env.json`:\n\n```json\n{\n  \"destinations\": [\n    {\n      \"existing\": \"entries\"\n    },\n    {\n      \"name\": \"job-service\",\n      \"url\": \"http://localhost:4004\",\n      \"username\": \"job\",\n      \"password\": \"Secret1\"\n    },\n    {\n      \"name\": \"job-execution-service\",\n      \"url\": \"http://localhost:4005\",\n      \"username\": \"job-execution\",\n      \"password\": \"Secret2\"\n    }\n  ]\n}\n```\n\n### Run local with sqlite\n\nTo run this example locally you can run:\n\n```\nrun-s \"deploy:sqlite:instance:**\"\n```\n\nto deploy two separate sqlite databases. You can start the two instances\n\n```\nnpm run watchboth\n```\n\n### Run hybrid with SAP HANA Cloud\n\nFirst you need to create the HDI Containers using:\n\n```\nrun-s \"deploy:hana:instance:**\"\n```\n\nDue to the issue reported at [cds deploy does not support --profile](https://answers.sap.com/questions/13754675/cds-deploy-does-not-support-profile.html) the resulting configuration isn't written to the profiles defined with --profile. So you need to add this entries manually to your `.cdsrc-private.json`:\n\n```json\n{\n  \"requires\": {\n    \"[hybrid-instance1]\": {\n      \"db\": {\n        \"binding\": {\n          \"type\": \"cf\",\n          \"apiEndpoint\": \"<CF-API-Endpoint>\",\n          \"org\": \"<CF-Organization>\",\n          \"space\": \"<CF-Space>\",\n          \"instance\": \"bookshop-demo-db-instance1\",\n          \"key\": \"bookshop-demo-db-instance1-key\",\n          \"resolved\": false\n        },\n        \"kind\": \"hana\",\n        \"vcap\": {\n          \"name\": \"db\"\n        }\n      }\n    },\n    \"[hybrid-instance2]\": {\n      \"db\": {\n        \"binding\": {\n          \"type\": \"cf\",\n          \"apiEndpoint\": \"<CF-API-Endpoint>\",\n          \"org\": \"<CF-Organization>\",\n          \"space\": \"<CF-Space>\",\n          \"instance\": \"bookshop-demo-db-instance2\",\n          \"key\": \"bookshop-demo-db-instance2-key\",\n          \"resolved\": false\n        },\n        \"kind\": \"hana\",\n        \"vcap\": {\n          \"name\": \"db\"\n        }\n      }\n    },\n```\n\nThen you can start with:\n\n```\nnpm run start:hybridboth\n```\n\n### Testing\n\nUse the REST Client scripts in `tests/job.http`.\n\n### Adding XSUAA Authentication\n\n```sh\ncf create-service xsuaa broker bookshop-demo-uaa -c xs-security.json\ncf create-service-key bookshop-demo-uaa bookshop-demo-uaa-key\ncf create-service xsuaa broker bookshop-demo-instance2-uaa -c xs-security-instance2.json\ncf create-service-key bookshop-demo-instance2-uaa bookshop-demo-instance2-uaa-key\n```\n\n```\ncds bind -2 bookshop-demo-uaa\ncds bind -2 bookshop-demo-instance2-uaa\n```\n\n## Manual steps needed for Service Broker\n\n### Generate Broker Credentials\n\n1. Navigate into folder `/broker`\n2. Run command `npm i` in terminal\n3. Run command `npm run init` in terminal\n4. Store the generated credentials in a safe place\n\n### Create `.mtaext` file\n\n1. Copy file `cf-service-broker-template.mtaext` to `cf-service-broker-private.mtaext`\n2. Copy the hashed broker credentials from your safe place into the `cf-service-broker-private.mtaext` file\n\n### Register broker\n\nBuild and deploy the MTAR as described in the next step. After the deployment you can register the broker with:\n\n```sh\ncf create-service-broker bookshop-demo-broker broker-user <plain-broker-password> <broker-url> --space-scoped\n```\n\n- The `broker-url` can be read from e.g. the SAP BTP cockpit by navigating to the broker application in the space where it was deployed.\n\n## Deploy to SAP Cloud Platform - Cloud Foundry Environment\n\nWe're using the mbt build to create a mtar that can be deployed to the SAP CP Cloud Foundry. The cf commandline must be installed and you have to be logged on to the space you want to deploy to. The build ist started with:\n\n```\nnpm run build:cf\n```\n\nthen you can deploy with:\n\n```\nnpm run deploy:cf\n```\n\nIf you need to redirect destinations according to your configuration you can achieve this by setting the environment variable `CDS_CONFIG` to this value:\n\n```JSON\n{\n  \"requires\": {\n    \"GWSAMPLE_BASIC\": {\n      \"credentials\": {\n        \"destination\": \"S4HANA\"\n      }\n    },\n    \"API_CV_ATTACHMENT_SRV\": {\n      \"credentials\": {\n        \"destination\": \"S4HANA\"\n      }\n    }\n  }\n}\n```\n\n## Deploy to SAP HANA XSA on Premise\n\nWe're using the mbt build to create a mtar that can be deployed to the SAP HANA. The xs commandline must be installed and you have to be logged on to the space you want to deploy to. The build ist started with:\n\n```\nnpm run build:xsa\n```\n\nthen you can deploy with:\n\n```\nnpm run deploy:xsa\n```\n\n## Allow embedding as an iFrame\n\nManuel Seeger described the needed steps in [Can't authenticate against HTML-Mashup embedded SCP application in C4C](https://answers.sap.com/questions/13014707/cant-authenticate-against-html-mashup-embedded-scp.html). Here are the concrete steps for this application:\n\n```sh\ncf create-service xsuaa apiaccess bookshop-access\ncf create-service-key bookshop-access bookshop-access-sk\ncf service-key bookshop-access bookshop-access-sk\n```\n\nStore the returned values as Key-Value Pairs in tests/.env. I.e.:\n\n```\napiurl=\"https://api.authentication.us10.hana.ondemand.com\"\n```\n\nAlso add a variable for appurl which represents the app you want to enable to be embedded in an iFrame. Then run the REST Client Script tests/configure-xsuaa.http.\n\n## Allow API Access\n\n[Carlos Roggan](https://people.sap.com/carlos.roggan) provides a great description in his SAP Community blog post: [How to call protected app from external app as external user with scope](https://blogs.sap.com/2020/06/02/how-to-call-protected-app-from-external-app-as-external-user-with-scope/). For the moment we will not use a separate client app but a REST client script. Follow the next steps to get it working for this project. You have to create and display a service key for the client xsuaa instance:\n\n```sh\ncf create-service-key xsuaaforclient xsuaaforclient-sk\ncf service-key xsuaaforclient xsuaaforclient-sk\n```\n\nStore the returned values as Key-Value Pairs for clientid, clientsecret, url in tests/.env. as:\n\n```\nclientid=\"sb-xsappforclientapp!dsjdfs\"\nclientsecret=\"NbFeh8ibk2zQ=\"\nurl=\"https://<your-trial-account>trial.authentication.eu10.hana.ondemand.com\"\nsrvurl=\"https://<your-trial-account>trial-dev-bookshop-demo-srv.cfapps.us10.hana.ondemand.com\"\n```\n\nThen open the REST Client script `tests/api-access.http` in VS Code and run the script with the comment `Get Access Token (Cloud Foundry)`. It should return a valid access\\*token. Now execute the requests `Read Orders` and `Read Books`. You should see a valid result.\n\n## Authentication and Authorization\n\nThe services of this application use authentication and authorization to\nrestrict usage of the functions.  \nThe scopes of the app are defined in `xs-security.json`.\nThey are used in the services files `srv/cat-service.cds` and `srv/admin-service.cds`.\n\n_Please have a look at these files for the restrictions cause they can change due to the POC character of this project_\n\n### Authentication and Authorization in local environment\n\nIf you run the application in a local environment the users you can use are\ndefined in the field `.cdsrc`.  \nCurrently in this file the following users are defined\n\n_Please have a look at this file to see the current users and roles cause they can change due to the POC character of this project_\n\n| Username    | Scopes                       |\n| ----------- | ---------------------------- |\n| requester   | admin                        |\n| booksadmin  | booksadmin                   |\n| admin       | admin, roleadmin, booksadmin |\n| littleadmin | admin                        |\n| bob         | authenticated-user, openid   |\n"},{"name":"pg-beershop","engines":{"node":"^18"},"version":"1.0.0","description":"Sample project to demonstrate the use of @cap-js/postgres","main":"index.js","scripts":{"update":"run-p update:**","update:root":"npm update","update:app":"cd app && npm update","test":"jest","docker:start:pg":"docker-compose -f stack.yml up -d","docker:start:pg:11":"docker-compose -f stack-pg-11.yml up -d","deploy:pg":"cds deploy --profile pg","deploy:pg:model-only":"cds deploy --profile pg --model-only","deploy:pg:data:delta":"cds deploy --profile pg --model-only","deploy:pg:data:full":"npx cds-dbm load --via full","docker:run:db":"docker run --env-file .env --name pg-beershop-db --network='pg-beershop_default' -t gregorwolf/pg-beershop-db:latest node_modules/@sap/cds/lib/dbs/cds-deploy.js","docker:run:db:debug":"docker run --env-file .env --name pg-beershop-db --network='pg-beershop_default' --entrypoint=sh -it gregorwolf/pg-beershop-db:latest","docker:run:srv":"docker run --env-file .env --name pg-beershop --network='pg-beershop_default' -p 4004:4004 -t gregorwolf/pg-beershop:latest","docker:start:ui":"docker run --name pg-beershop-ui --network='pg-beershop_default' -p 5000:5000 -t gregorwolf/pg-beershop-ui:latest","docker:start:srv":"docker start -ai pg-beershop","docker:shell":"docker exec -it pg-beershop /bin/bash","start":"cds-serve","start:app":"cds bind --exec -- npm start --prefix app --profile hybrid","start:sqlite":"cds watch --profile sqlite","start:issue":"run-s deploy:pg start:cds","start:cds":"cds run","docker:stop:pg":"docker-compose -f stack.yml down","docker:stop:pg:11":"docker-compose -f stack-pg-11.yml down","bind:uaa":"cds bind uaa --to pg-beershop-uaa --kind xsuaa --profile hybrid","build":"cds build --production","build:db":"./pg-build.sh","build:cf":"mbt build","build:ElasticBeanstalk":"run-s build build:zipsrv","build:zipsrv":"cd gen/srv && zip -r ../srv.zip .","build:docker":"run-s build build:db build:docker:db build:docker:srv build:docker:ui","build:docker:db":"docker build -t gregorwolf/pg-beershop-db:latest -f db-deployer-kubernetes/Dockerfile .","build:docker:srv":"docker build -t gregorwolf/pg-beershop:latest .","build:docker:ui":"docker build -t gregorwolf/pg-beershop-ui:latest app","pack":"npm run-s build pack:db","pack:db":"pack build gregorwolf/pg-beershop-db:latest --path gen/pg --buildpack gcr.io/paketo-buildpacks/nodejs --builder paketobuildpacks/builder:base --env BP_NODE_RUN_SCRIPTS=","push:docker":"run-s push:docker:db push:docker:srv push:docker:ui","push:docker:db":"docker push gregorwolf/pg-beershop-db:latest","push:docker:srv":"docker push gregorwolf/pg-beershop:latest","push:docker:ui":"docker push gregorwolf/pg-beershop-ui:latest","compile:tosql":"cds c srv -2 sql > beershop-cds.sql && node cdssql2pgsql.js > beershop.sql","create-service:pg:dbms":"cf create-service azure-postgresql-9-6-dbms basic azure-postgresql -c azure-pg-dbms.json","create-service:pg:db":"cf create-service azure-postgresql-9-6-database database beershop-database -c azure-pg-db.json","xsuaa:build":"cds compile srv/ --to xsuaa > xs-security.json","xsuaa:create":"cf create-service xsuaa application pg-beershop-uaa -c xs-security.json","xsuaa:update":"cf update-service pg-beershop-uaa -c xs-security.json","xsuaa:create:key":" cf create-service-key pg-beershop-uaa  pg-beershop-uaa-key","xsuaa:download:key":"cf service-key  pg-beershop-uaa pg-beershop-uaa-key","deploy:cf":"cf deploy mta_archives/pg-beershop_1.0.0.mtar --retries 0","deploy:cf:bg":"cf bg-deploy mta_archives/pg-beershop_1.0.0.mtar -f --no-confirm","deploy:cf:adminer":"cf deploy mta_archives/pg-beershop_1.0.0.mtar -m pg-beershop-adminer --retries 0","deploy:cf:db":"cf deploy mta_archives/pg-beershop_1.0.0.mtar -m pg-beershop-db-deployer --retries 0","deploy:cf:srv":"cf deploy mta_archives/pg-beershop_1.0.0.mtar -m pg-beershop-srv --retries 0","deploy:cf:app":"cf deploy mta_archives/pg-beershop_1.0.0.mtar -m pg-beershop-app --retries 0","deploy:cf:update":"cf deploy mta_archives/pg-beershop_1.0.0.mtar -e update.mtaext --retries 0","test:db":"node test/test-db.js","undeploy:cf":"cf undeploy pg-beershop --delete-service-keys --delete-services --delete-service-brokers","copy:db:gen":"copyfiles -u 2 -a ./gen/db/* ./gen/db/**/* gen/db-with-express","heroku-postbuild":"echo heroku postbuild skipped"},"repository":{"type":"git","url":"git+https://github.com/gregorwolf/pg-beershop.git"},"keywords":[],"author":"Gregor Wolf","license":"other","dependencies":{"@cap-js-community/odata-v2-adapter":"^1","@cap-js/postgres":"^1","@sap/audit-logging":"^5","@sap/cds":"^7","@sap/xsenv":"^4","@sap/xssec":"^3","applicationinsights":"^2","copyfiles":"^2","express":"^4","passport":"^0","pg":"^8"},"devDependencies":{"@sap/cds-dk":"^7","@sap/ux-specification":"^1","cds-launchpad-plugin":"^2","chai":"^4","chai-as-promised":"^7","chai-subset":"^1","dotenv":"^16.3.1","jest":"^29","mbt":"^1","npm-run-all":"^4","sqlite3":"^5.1.6"},"cds":{"features":{"serve_on_root":true},"cov2ap":{"plugin":true},"requires":{"kinds":{"sql":{"[kyma]":{"kind":"postgres"}}},"auth":{"kind":"mocked","[heroku]":{"impl":"./heroku/mock-auth-handler.js"},"[kyma]":{"kind":"mocked"},"[production]":{"kind":"xsuaa"}}}},"sapux":["app/Beers-display","app/beers-manage","app/Breweries-manage","app/breweries-manage-v2","app/TypeChecksWithDraft-manage"],"type":"sampleapp","tags":["sample"],"gitHubOwner":"gregorwolf","gitHubRepo":"pg-beershop","licenseSource":"mit","forks":19,"stars":41,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2020-08-06T21:38:00Z","updatedAt":"2024-03-15T07:04:13Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/gregorwolf/pg-beershop/tree/main/","readme":"# CAP Beershop using PostgreSQL for persistence\n\n[![Build Status](https://dev.azure.com/gregorwolf/gregorwolf/_apis/build/status/gregorwolf.pg-beershop?branchName=main)](https://dev.azure.com/gregorwolf/gregorwolf/_build/latest?definitionId=2&branchName=main)\n\n## Local execution\n\n### Prerequisites\n\nTo get started quickly you need docker and docker-compose.\n\n### Setup\n\nBefore you start please install all required dependencies using:\n\n```\nnpm ci\n```\n\nStart the PostgreSQL database and [Adminer](https://www.adminer.org/) using:\n\n```\nnpm run docker:start:pg\n```\n\nIt will use the latest available PostgreSQL Docker container. If you want to test with PostgreSQL 11 then run:\n\n```\nnpm run docker:start:pg:11\n```\n\nNow deploy the database schema with the command:\n\n```\nnpm run deploy:pg\n```\n\nThe deploy will automatically load any data which is made available via local CSV files. If you run into any issue there make sure that no .env file is present in the root folder of this project like it would be needed if you want to run the docker image.\n\nThen open [http://localhost:8080/](http://localhost:8080/) and login by selecting System _PostgreSQL_, Server: _beershop-postgresql_, Username _postgres_ and Password _postgres_. The database _postgres_ should already exist as you've just deployed it and the tables should contain data.\n\nNow you can start the CAP application by using:\n\n```\ncds watch --profile pg\n```\n\nThen open <http://localhost:4004/odata/v4/beershop/Beers> in the browser and you should see an ODATA response with 11 beers:\n\n```JSON\n{\n  \"@odata.context\": \"$metadata#Beers\",\n  \"value\": [\n    {\n      \"ID\": \"b8c3fc14-22e2-4f42-837a-e6134775a186\",\n      \"name\": \"Lagerbier Hell\",\n      \"abv\": 5.2,\n      \"ibu\": 12,\n      \"brewery_ID\": \"9c937100-d459-491f-a72d-81b2929af10f\"\n    },\n    {\n      \"ID\": \"9e1704e3-6fd0-4a5d-bfb1-13ac47f7976b\",\n      \"name\": \"Schönramer Hell\",\n      \"abv\": 5,\n      \"ibu\": 20,\n      \"brewery_ID\": \"fa6b959e-3a01-40ef-872e-6030ee4de4e5\"\n    },\n    ...\n  ]\n}\n```\n\nTo stop the docker containers run either\n\n```\nnpm run docker:stop:pg\n```\n\nor `npm run docker:stop:pg:11`.\n\n## Run on SAP Business Technology Platform - Cloud Foundry Environment with Hyperscaler Option\n\nWe're using the mbt build to create a mtar that can be deployed to the SAP CP Cloud Foundry. The build ist started with:\n\n```\nnpm run build:cf\n```\n\nlogin to Cloud Foundry with:\n\n```\ncf login --sso\n```\n\nthen you can deploy with:\n\n```\nnpm run deploy:cf\n```\n\n## Run on SAP Business Technology Platform - Cloud Foundry Environment with Service Broker\n\nUntil [SAP will provide a fully managed PostgreSQL DB](https://blogs.sap.com/2020/02/11/consuming-hyper-scaler-backing-services-on-sap-cloud-platform-an-update/) you need to provide your on PostgreSQL DB. One way is to install a [Open Service Broker](https://www.openservicebrokerapi.org/). The page [Compliant Service Brokers](https://www.openservicebrokerapi.org/compliant-service-brokers) lists brokers supporting AWS, Azure and GCP. The SAP Developers Tutorial Mission [Use Microsoft Azure Services in SAP Cloud Platform](https://developers.sap.com/mission.cp-azure-services.html) describes in great detail how to setup the Service Broker for Azure. When you finished this setup you can run:\n\n```\nnpm run create-service:pg:dbms\n```\n\nto instantiate a PostgreSQL DBMS. Then run:\n\n```\nnpm run create-service:pg:db\n```\n\nto create a the beershop database in the DBMS. With that operation done you can build the MTA by running:\n\n```\nnpm run build:cf\n```\n\nThat MTA can be deployed using:\n\n```\nnpm run deploy:cf\n```\n\nThe created database is empty. As currently no deploy script is available the needed tables and views for the CAP application need to be created before you can run the application. The easiest way to create the tables and views is to use Adminer as for the local deployment. You can get the credentials by opening the pg-beershop-srv application via the SAP Business Technology Platform Cockpit. Navigate to the Service Bindings and click on \"Show sensitive data\". Enter the data in the corresponding fields of the Adminer login screen. Execute the SQL commands you find in _beershop.sql_. To fill the database with data also execute the ones in _beershop-data.sql_. Now try out the URL you find in the Overview of the pg-beershop-srv application.\n\n## Run on SAP Business Technology Platform - External PostgreSQL\n\nTo test with an external PostgreSQL created an Azure Database for PostgreSQL flexible server. Via the Azure portal add the database beershop. Then checkout the branch `user-provided-service` and create `default-azure-ups-env.json` with the following content:\n\n```JSON\n{\n  \"username\": \"<your user>\",\n  \"password\": \"<your password>\",\n  \"hostname\": \"<your hostname>\",\n  \"dbname\": \"beershop\",\n  \"port\": \"5432\",\n  \"ssl\": true\n}\n\n```\n\nNow you can build and deploy as described above.\n\n## Run on SAP Business Technology Platform - Kyma Environment\n\n### Create Docker Image\n\nIf you want to build your own docker image replace _gregorwolf_ in _package.json_ and _deployment/beershop.yaml_ with your own hub.docker.com account. Then run:\n\n```\nnpm run build:docker\n```\n\nTo test the image locally you have to create a _.env_ file that provides the environment variable VCAP_SERVICES which contains the connection information. Fill it with the following content:\n\n`VCAP_SERVICES={\"docker-postgres\":[{\"name\":\"postgres\",\"label\":\"postgres\",\"tags\":[\"plain\", \"db\", \"relational\", \"database\"],\"credentials\":{\"host\":\"beershop-postgresql\",\"port\":\"5432\",\"database\":\"beershop\",\"user\":\"postgres\",\"password\":\"postgres\"}}]}`\n\nThen run:\n\n```\nnpm run docker:run:srv\n```\n\nIf you stopped this docker container you can start it again with\n\n```\nnpm run docker:start:srv\n```\n\nto start the image _gregorwolf/pg-beershop:latest_ from hub.docker.com. If you want to run your own image run che command you find in _package.json_ with your image. Finally publish the created image with:\n\n```\nnpm run push:docker\n```\n\n### Deploy to Kyma\n\nDownload the kubeconfig from your Kyma instance via the download icon in the cluster overview. Save it in _~/.kube/kubeconfig-kyma.yml_. Then run:\n\n```\nexport KUBECONFIG=~/.kube/kubeconfig-kyma.yml\n```\n\nPlease note that the token in the kubeconfig is [only valid for 8 hours](https://kyma-project.io/docs/components/security#details-iam-kubeconfig-service). So you might have to redo the download whenever you want to run the commands again.\n\nTo keep this project separate from your other deployments I would suggest to create a namespace:\n\n```\nkubectl create namespace pg-beershop\n```\n\nTo avoid `-n pg-beershop` with each kubectl command you can run:\n\n```\nkubectl config set-context --current --namespace=pg-beershop\n```\n\nDeploy the configuration:\n\n```\nkubectl -n pg-beershop apply -f deployment/beershop.yaml\n```\n\nTo create the beershop database a Job is used that starts once when you run the apply. Afterward you can delete the job with:\n\n```\nkubectl -n pg-beershop delete job beershop-db-init\n```\n\nFor troubleshooting you can SSH into the CAP container:\n\n```\nkubectl -n pg-beershop exec $(kubectl -n pg-beershop get pods -l tier=frontend -o jsonpath='{.items[0].metadata.name}') -t -i /bin/bash\n```\n\nBefore you can update the container you have to delete the beershop-db-init.\n\n```\nkubectl -n pg-beershop delete job beershop-db-init\n```\n\nThen you can run:\n\n```\nkubectl -n pg-beershop rollout restart deployment/beershop\n```\n\nIf you want to delete the deployment, then run:\n\n```\nkubectl -n pg-beershop delete -f deployment/beershop.yaml\n```\n\n## Run on Microsoft Azure\n\nInstall [Azure CLI](https://docs.microsoft.com/cli/azure/) for your respective OS.\n\nBefore you can use the CLI you have to login:\n\n```\naz login\n```\n\nIf you have multiple account you have to list them:\n\n```\naz account list\n```\n\nand then set the one you want to use:\n\n```\naz account set --subscription <Your-Subscription-ID>\n```\n\nWith the command:\n\n```\naz account list-locations -o table\n```\n\nyou can retrieve the list of locations and select the one fitting your needs best. You can configure the default settings for location and groups:\n\n```\naz config set defaults.location=germanywestcentral defaults.group=beershop\n```\n\nTo deploy a PostgreSQL the extension db-up needs to be installed:\n\n```\naz extension add --name db-up\n```\n\nSet the environment variables:\n\n```bash\nexport postgreservername=<yourServerName>\nexport adminpassword=<yourAdminPassword>\n```\n\nThen the PostgreSQL server and database can be created:\n\n```\naz postgres up --resource-group beershop --location germanywestcentral --sku-name B_Gen5_1 --server-name $postgreservername --database-name beershop --admin-user beershop --admin-password $adminpassword --ssl-enforcement Enabled --version 11\n```\n\nIf you want to use this database from your own location or from SAP Business Technology Platform Trial in eu10 then you have to add a firewall rule. Based on the information found in [SAP Business Technology Platform Connectivity - Network](https://help.sap.com/viewer/cca91383641e40ffbe03bdc78f00f681/Cloud/en-US/e23f776e4d594fdbaeeb1196d47bbcc0.html#loioe23f776e4d594fdbaeeb1196d47bbcc0__trial) I add the following rule:\n\n```\naz postgres server firewall-rule create -g beershop -s $postgreservername -n cfeu10 --start-ip-address 3.122.0.0 --end-ip-address 3.124.255.255\n```\n\nStore the DB connection information in _default-env.json_. It must contain the certificate for the TLS connection documented in [Configure TLS connectivity in Azure Database for PostgreSQL - Single Server](https://docs.microsoft.com/de-de/azure/postgresql/concepts-ssl-connection-security). The format must be the following:\n\n```json\n{\n  \"VCAP_SERVICES\": {\n    \"postgres\": [\n      {\n        \"label\": \"azure-postgresql-database\",\n        \"provider\": null,\n        \"plan\": \"database\",\n        \"name\": \"beershop-database\",\n        \"tags\": [\"PostgreSQL\"],\n        \"instance_name\": \"beershop-database\",\n        \"binding_name\": null,\n        \"credentials\": {\n          \"host\": \"<yourServerName>.postgres.database.azure.com\",\n          \"port\": 5432,\n          \"database\": \"beershop\",\n          \"password\": \"<yourAdminPassword>\",\n          \"username\": \"beershop@<yourServerName>\",\n          \"ssl\": {\n            \"rejectUnauthorized\": false,\n            \"ca\": \"-----BEGIN CERTIFICATE-----MIIDdzCCAl+gAwIBAgIEAgAAuTANBgkqhkiG9w0BAQUFADBaMQswCQYDVQQGEwJJRTESMBAGA1UEChMJQmFsdGltb3JlMRMwEQYDVQQLEwpDeWJlclRydXN0MSIwIAYDVQQDExlCYWx0aW1vcmUgQ3liZXJUcnVzdCBSb290MB4XDTAwMDUxMjE4NDYwMFoXDTI1MDUxMjIzNTkwMFowWjELMAkGA1UEBhMCSUUxEjAQBgNVBAoTCUJhbHRpbW9yZTETMBEGA1UECxMKQ3liZXJUcnVzdDEiMCAGA1UEAxMZQmFsdGltb3JlIEN5YmVyVHJ1c3QgUm9vdDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKMEuyKrmD1X6CZymrV51Cni4eiVgLGw41uOKymaZN+hXe2wCQVt2yguzmKiYv60iNoS6zjrIZ3AQSsBUnuId9Mcj8e6uYi1agnnc+gRQKfRzMpijS3ljwumUNKoUMMo6vWrJYeKmpYcqWe4PwzV9/lSEy/CG9VwcPCPwBLKBsua4dnKM3p31vjsufFoREJIE9LAwqSuXmD+tqYF/LTdB1kC1FkYmGP1pWPgkAx9XbIGevOF6uvUA65ehD5f/xXtabz5OTZydc93Uk3zyZAsuT3lySNTPx8kmCFcB5kpvcY67Oduhjprl3RjM71oGDHweI12v/yejl0qhqdNkNwnGjkCAwEAAaNFMEMwHQYDVR0OBBYEFOWdWTCCR1jMrPoIVDaGezq1BE3wMBIGA1UdEwEB/wQIMAYBAf8CAQMwDgYDVR0PAQH/BAQDAgEGMA0GCSqGSIb3DQEBBQUAA4IBAQCFDF2O5G9RaEIFoN27TyclhAO992T9Ldcw46QQF+vaKSm2eT929hkTI7gQCvlYpNRhcL0EYWoSihfVCr3FvDB81ukMJY2GQE/szKN+OMY3EU/t3WgxjkzSswF07r51XgdIGn9w/xZchMB5hbgF/X++ZRGjD8ACtPhSNzkE1akxehi/oCr0Epn3o0WC4zxe9Z2etciefC7IpJ5OCBRLbf1wbWsaY71k5h+3zvDyny67G7fyUIhzksLi4xaNmjICq44Y3ekQEe5+NauQrz4wlHrQMz2nZQ/1/I6eYs9HRCwBXbsdtTLSR9I4LtD+gdwyah617jzV/OeBHRnDJELqYzmp-----END CERTIFICATE-----\"\n          },\n          \"sslRequired\": true,\n          \"tags\": [\"postgresql\"]\n        },\n        \"syslog_drain_url\": null,\n        \"volume_mounts\": []\n      }\n    ]\n  }\n}\n```\n\nConnect to the database as described in the last paragraph of _Run on SAP Business Technology Platform_.\n\nStore the file content in the environment variable VCAP_SERVICES (jq must be installed):\n\n```\nexport VCAP_SERVICES=\"$(cat default-env.json | jq .VCAP_SERVICES)\"\n```\n\nNow create the app service plan:\n\n```\naz appservice plan create --name beershop --resource-group beershop --sku F1 --is-linux\n```\n\nCheck out what Node.JS runtime is available:\n\n```\naz webapp list-runtimes --linux\n```\n\nThen create the web app:\n\n```\naz webapp create --resource-group beershop --plan beershop --name beershop --runtime \"NODE:16-lts\"\n```\n\nConfigure an environment variable the variable created before:\n\n```\naz webapp config appsettings set --name beershop --resource-group beershop --settings VCAP_SERVICES=\"$VCAP_SERVICES\"\n```\n\nNow you can publish the app using the Azure DevOps Pipeline.\n\nTo delete the database you can run:\n\n```\naz postgres server delete --resource-group beershop --name beershop\n```\n\nYou have to confirm the execution with _y_.\n\n## Run on Google Cloud Platform (GCP)\n\nInstall [Google Cloud SDK](https://cloud.google.com/sdk/docs/downloads-interactive) for your resprective OS. Then work through the [Quickstart for Node.js in the standard environment](https://cloud.google.com/appengine/docs/standard/nodejs/quickstart) to deploy\n\n```\ngcloud app create\n```\n\nStore the environment variable in _env_variables.yaml_:\n\n```YAML\nenv_variables:\n    VCAP_SERVICES: '{}'\n```\n\nThis file is included in _app.yaml_.\n\n## Use neon.tech Serverless Postgres\n\nYou can use the [neon.tech Serverless Postgres](https://neon.tech/) to run the beershop. Get the credentials after you've created a project and database. The connection information is stored in the _.cdsrc-private.json_ file:\n\n```JSON\n  \"requires\": {\n    \"[pg]\": {\n      \"db\": {\n        \"kind\": \"postgres\",\n        \"credentials\": {\n          \"host\": \"yourHost\",\n          \"port\": 5432,\n          \"user\": \"yourUser\",\n          \"password\": \"yourPassword\",\n          \"database\": \"beershop\",\n          \"ssl\": true\n        }\n      }\n    }\n  }\n```\n\n## Run on HEROKU\n\nInstall [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli) for your respective OS. Then follow the instruction provided in the [Deploying with Git](https://devcenter.heroku.com/articles/git) guide to deploy from this repository.\n\nYou can also create a new pipeline or application from the Heroku website and bound it to an existing git repository. This should enable you to deploy directly from your repository on every completed pull requests on the main branch.\n\n### Create a new app\n\nStart by creating a new app and remote repository on heroku by issuing this command:\n\n```\nheroku create -a pg-beershop\n```\n\n### Setup the HEROKU POSTGRES Service\n\n[Heroku Postgres](https://devcenter.heroku.com/articles/heroku-postgresql) is a managed SQL database service provided directly by Heroku. You can access a Heroku Postgres database from any language with a PostgreSQL driver, including all languages officially supported by Heroku.\n\nIn order to provision your application with an Heroku Postgres db you have to run the following command from the CLI\n\n```\nheroku addons:create heroku-postgresql:<your_plan>\n```\n\nFor the first test use\n\n```\nheroku addons:create heroku-postgresql:hobby-dev\n```\n\nWhen correctly issued this command logs the name of the newly created db instance in the console.\n\nYou can find information about plans and pricing at [this link](https://devcenter.heroku.com/articles/heroku-postgres-plans).\n\nThe best way to deploy the database schema to your heroku app db is to create it locally, using the procedure provided in the local setup section of this guide, and then push it on the remote db using the following commands:\n\n```\nPGHOST=localhost PGUSER=postgres PGPASSWORD=postgres heroku pg:push beershop <remote_db_name>;\n```\n\nIn order for this method to work you need to install psql locally. You can find more informations on this topic following you'll need to setup the psql command line as stated in [this link](https://devcenter.heroku.com/articles/heroku-postgresql#local-setup).\n\nNote that you don't need a running pgsql instance on your machine for this to work. You can use the psql client with the dockerized instance provided in this repository.\n\n### Configure app for running on Heroku\n\nThe entry point of every heroku application is the Procfile. Through this file you can specify the starting script of your application.\n\nCredentials for Heroku Postgres are periodically rotated by the system. An environment variable, called DATABASE_URL is provided to your application and is automatically updated on each credentials change. For this reason, you cannot use the static xml configuration provided in the package.json file, but you need to inject the connection string at runtime through the Procfile start command.\n\n```\nweb: export cds_requires_database_credentials_connectionString=$DATABASE_URL && cds run --profile heroku\n```\n\nWe used the [profile feature](https://cap.cloud.sap/docs/node.js/cds-env#profiles) in order to provide specific information for the heroku environment and suppress unwanted features from the package.json file (eg. xsuaa).\n\nWe also created a heroku-postbuild script to override the default build command when deployed to heroku (not required in this version).\n\n```json\n      \"database\": {\n        \"dialect\": \"plain\",\n        \"impl\": \"cds-pg\",\n        \"model\": [\n          \"srv\"\n        ],\n        \"credentials\": {\n          \"[heroku]\": {\n            \"ssl\": {\n              \"rejectUnauthorized\": false\n            }\n          }\n        }\n      },\n```\n\n```json\n    \"heroku-postbuild\": \"echo heroku postbuild skipped\"\n```\n\n### Authentication\n\nIn this example, we used a [custom handler](https://cap.cloud.sap/docs/node.js/authentication#custom) to mock the user authentication in the heroku environment. You can follow the guides regarding authentication on the capire website to implement your own method, or reuse the built-in jwt or basic authentication.\n\n```javascript\n// XSUAA doesn't work in heroku environment, so you should provide your own authentication handler and strategy\n// in this example, no auth method is provided\nmodule.exports = (req, res, next) => {\n  req.user = new cds.User.Privileged();\n  return next();\n};\n```\n\n### Deploy the application\n\nTo deploy the application on heroku run the command:\n\n```\ngit push heroku main\n```\n\nYou should now be able to open the beershop example from the heroku website.\n\n### Open points\n\nRight now, due to limitations in the current cds-dbm library, is not possible to use the [heroku release phase](https://devcenter.heroku.com/articles/release-phase) to automatically update the database schema on release. Will fix this when the new version of the deployer library is released.\n\n## Features\n\n### Convert SQL generated from cds compile to PostgreSQL\n\nWhen you run:\n\n```\nnpm run compile:tosql\n```\n\nthe CDS model will be compiled to the _beershop-cds.sql_ file. Using the script _cdssql2pgsql.js_ this SQL is converted to support PostgreSQL. Currently only the datatype NVARCHAR must be replaced with VARCHAR.\n\n### Import CDS files from db/data into the beershop database\n\nThe path db/data is mounted to the docker container at /tmp/data. That allows to run the COPY commands generated at the end of _beershop.sql_.\n\n## Limitations\n\n### jest tests not working yet\n\nRunning the jest test with `npm test` currently fails with:\n\n```bash\n    Failed: Object {\n      \"code\": -20005,\n      \"message\": \"Failed to load DBCAPI.\",\n      \"sqlState\": \"HY000\",\n      \"stack\": \"Error: Failed to load DBCAPI.\n```\n\nwhen running the standalone script `node test/test-db.js` that uses the same way to connect everything is OK.\n\n## Ideas\n\n### Use Init Containers to deploy schema in Kyma\n\nRight now for the Kyma deployment the schema must be updated manually. [Using Liquibase in Kubernetes](https://www.liquibase.org/blog/using-liquibase-in-kubernetes) describes the use of Init Containers in K8n. I think the Docker image [timbru31/java-node:11-erbium](https://hub.docker.com/r/timbru31/java-node) should be a good basis.\n"},{"name":"cap-ui5-gpt-chat","version":"1.0.0","description":"A simple CAP project.","repository":"https://github.com/p36-io/cap-ui5-gpt-chat","license":"apache-2.0","private":true,"devDependencies":{"mbt":"^1.2.23","npm-run-all":"^4.1.5"},"scripts":{"start:dev":"pnpm --parallel start:dev","build:mta":"npx mbt build -p=cf --mtar=cap-ui5-gpt-chat_1.0.0.mtar","deploy:cf:dev":"cf deploy mta_archives/cap-ui5-gpt-chat_1.0.0.mtar -f -e dev.mtaext","deploy:dev":"run-s build:mta deploy:cf:dev"},"type":"sampleapp","tags":["sample"],"gitHubOwner":"p36-io","gitHubRepo":"cap-ui5-gpt-chat","licenseSource":"mit","forks":25,"stars":53,"addedToBoUI5":"2024-01-24T12:00:00.000Z","createdAt":"2023-02-19T21:44:40Z","updatedAt":"2024-05-03T09:14:39Z","vscodeInstalls":-1,"sourceType":"sampleapp","githublink":"https://github.com/p36-io/cap-ui5-gpt-chat/tree/main/","readme":"# A ChatGPT-like chat app built with SAP CAP and SAPUI5\n\nThis is a full working chat application built with the SAP Cloud Application Programming Model and SAPUI5. It uses a selectable OpenAI model (including the latest ChatGPT model) of the [OpenAI API](https://openai.com/blog/openai-api/) to generate responses to the user's prompts. More details can be found in the related blog posts in the SAP Community:\n\n- [ChatGPT-like chat app built with SAP CAP and SAPUI5 - Part 1 – Introduction](https://blogs.sap.com/2023/02/22/a-chatgpt-like-chat-app-built-with-modern-sap-technologies-cap-sapui5-part-1-2/)\n- [ChatGPT-like chat app built with SAP CAP and SAPUI5 - Part 2 – Backend](https://blogs.sap.com/2023/02/24/a-chatgpt-like-chat-app-built-with-modern-sap-technologies-cap-sapui5-part-2-3/)\n- [ChatGPT-like chat app built with SAP CAP and SAPUI5 - Part 3 – Frontend](https://blogs.sap.com/2023/02/27/a-chatgpt-like-chat-app-built-with-modern-sap-technologies-cap-sapui5-part-3-3/)\n\n## Features\n\n- Chat with a selectable OpenAI model including the GPT-4 and GPT-3.5 models powering [ChatGPT](https://chatgpt.com/)\n- Multi-user support for individual chats\n- Selectable and maintainable personalities for the AI chatbot\n- Chat history for each user (everything is stored in the database)\n- Per chat option to enable streaming responses from the OpenAI API\n- Code-Highlighting for code snippets in the chat messages\n- Ready to be deployed to SAP BTP Cloud Foundry\n\n### Technical Aspects\n\n- Full TypeScript implementation in backend (SAP CAP) and frontend (SAPUI5)\n- Usage of advanced TypeScript features like decorators and dependency injection in the backend\n- Chat UI built with SAPUI5 including a custom list item control and with the integration of external modules\n\n## Demo\n\nAsk the AI for help with SAPUI5:\n\n![alt text](https://raw.githubusercontent.com/p36-io/cap-ui5-gpt-chat/main/docs/chat_sapui5.gif \"Title\")\n\nAsk the AI about SAP BTP:\n\n![alt text](https://raw.githubusercontent.com/p36-io/cap-ui5-gpt-chat/main/docs/chat_btp.gif \"Title\")\n\n## Customize the app\n\nSince the app is Open Source, you can simply fork the repository and customize it to your needs.\n\nWithout a technical deep dive, there are two ways to easily customize the app:\n\n### Add a new personality\n\nThere is currently no UI to administrate personalities, but they can easily be changed in a csv file. Open the file `packages/server/db/data/p36.capui5gpt.chat-Personalities.csv` and simply add a new line with the following format:\n\n```csv\n<name>;<instruction>\n```\n\nAfter changing the file you need to redeploy the entities to the database. In the local enviroment you can do this with the following command (please note that this will delete **all data** in the local database):\n\n```bash\npnpm -r deploy:local\n```\n\nIn the Cloud Foundry environment you can simply re-deploy the app (no data will be lost).\n\n### Modify the AI model parameters\n\nIt is possible to tweak the OpenAI API parameters for the completion request. For more details, see the [OpenAI API documentation](https://beta.openai.com/docs/api-reference/completions/create).\nSimply add the following in the `default-env.json` file in the `packages/server` folder and change the parameters to your needs:\n\n```json\n{\n  \"app_openai\": {\n    \"apiKey\": \"YOUR-API-KEY\",\n    \"completionAttributes\": {\n      \"max_tokens\": 1200,\n      \"temperature\": 0.8,\n      \"top_p\": 1,\n      \"frequency_penalty\": 0,\n      \"presence_penalty\": 0.6\n    }\n  }\n}\n```\n\nWhen being deployed to the Cloud Foundry environment, you can also change the parameters by changing the values in the `dev.mtaext` file.\n\n## Run the app locally in development mode\n\n### Prerequisites\n\n- [Node.js](https://nodejs.org/en/) (at least version 16)\n- [An OpenAI Account and an OpenAI API key](https://platform.openai.com/account/api-keys)\n- [SQLite](https://www.sqlite.org/index.html)\n\n### Install pnpm\n\nIf you haven't `pnpm` already installed, you can globally install it via the following command:\n\n```bash\nnpm i -g pnpm\n```\n\n### Install dependencies\n\nInstall all dependencies using the following command:\n\n```bash\npnpm i\n```\n\n### Deploy the cds entities from the CAP backend to the SQLite database\n\n```bash\npnpm -r deploy:local\n```\n\n### Add your OpenAI API key\n\nPut a new file in the folder `packages/server` called `default-env.json` with the following content and add your OpenAI API key:\n\n```json\n{\n  \"app_openai\": {\n    \"apiKey\": \"YOUR-API-KEY\"\n  },\n  \"VCAP_SERVICES\": {}\n}\n```\n\n### Start the app in development mode\n\nThe following command will start the app in development mode. Server and UI will be started in parallel.\n\n```bash\npnpm --parallel start:dev\n```\n\n### Open the app in the browser\n\nOpen the following URL in your browser and start chatting: [http://localhost:8080/local.html](http://localhost:8080/local.html)\n\nYou need to login with one of the following credentials:\n\n| username    | password     |\n| ----------- | ------------ |\n| _developer_ | _helloworld_ |\n| _pirate_    | _ahoy_       |\n\nThere a no specific roles attached to either user, so feel free to choose.\n\n## Deploy the app to the SAP BTP Cloud Foundry environment\n\nThe project is already prepared to be deployed to the SAP BTP Cloud Foundry environment. The following diagram shows the architecture of the app:\n\n![alt text](https://raw.githubusercontent.com/p36-io/cap-ui5-gpt-chat/main/docs/diagram.jpg \"Title\")\n\nThe full application can be deployed to SAP BTP without any cost, using a Trial or Free Tier acccount.\n\n### Prerequisites\n\n- You have an OpenAI Account and requested an [OpenAI API key](https://platform.openai.com/account/api-keys)\n- You have a SAP BTP Trial [SAP BTP Trial](https://developers.sap.com/tutorials/hcp-create-trial-account.html) or [Free Tier Account](https://developers.sap.com/tutorials/btp-free-tier-account.html)\n- You have created an [SAP HANA Cloud Service instance](https://developers.sap.com/tutorials/btp-app-hana-cloud-setup.html#08480ec0-ac70-4d47-a759-dc5cb0eb1d58)\n- You have installed the [Cloud Foundry CLI](https://developers.sap.com/tutorials/cp-cf-download-cli.html)\n- You have installed the [MultiApps CF CLI Plugin](https://github.com/cloudfoundry-incubator/multiapps-cli-plugin)\n\n### Add your OpenAI API key\n\nEdit the file `dev.mtaext` and add your OpenAI API key to the `app_openai` property:\n\n```yaml\nmodules:\n  - name: capui5gptchat-srv\n    properties:\n      app_openai: >\n        {\n          \"apiKey\": \"YOUR-API-KEY\",\n          \"completionAttributes\": {\n            \"max_tokens\": 1200,\n            \"temperature\": 0.8,\n            \"top_p\": 1,\n            \"frequency_penalty\": 0,\n            \"presence_penalty\": 0.6\n          }\n        }\n```\n\n### Login to the SAP BTP Cloud Foundry environment\n\n```bash\ncf login\n```\n\n### Deploy the MTA\n\nAll parts of the application can be deployed with a single command:\n\n```yaml\npnpm deploy:dev\n```\n\nThe `mta.yaml` file contains all relevant services and modules:\n\n- The `capui5gptchat-router` module for a standalone approuter\n- The `capui5gptchat-server` module including the CAP backend\n- The `capui5gptchat-ui` module including the SAPUI5 frontend\n\nThe app will be accessible via managed approuter as well as via the standalone approuter.\n\n### Assign the required role to your user\n\nThe deployment will create a Role Collection `ChatGPT-like App Human` in your Cloud Foundry environment. You need to assign the role to your user in order to be able to login to the app.\n\n## How to obtain Support\n\nThis content is provided \"as-is\" without warranties or conditions of any kind.\n\n## License\n\nCopyright (c) 2023 p36 GmbH. All rights reserved. This project is licensed under the Apache Software License, version 2.0 except as noted otherwise in the [LICENSE](LICENSE) file.\n"}],"tags":[{"name":"database","count":5,"type":"type"},{"name":"plugin","count":12,"type":"type"},{"name":"tool","count":2,"type":"type"},{"name":"btp","count":2,"type":"type"},{"name":"util","count":1,"type":"type"},{"name":"authentication","count":2,"type":"type"},{"name":"middleware","count":3,"type":"type"},{"name":"sampleapp","count":12,"type":"type"},{"name":"database","count":4,"type":"tag"},{"name":"sqlite","count":1,"type":"tag"},{"name":"ui5","count":1,"type":"tag"},{"name":"typescript","count":5,"type":"tag"},{"name":"api,btp","count":2,"type":"tag"},{"name":"lib","count":3,"type":"tag"},{"name":"cucumber","count":1,"type":"tag"},{"name":"odata","count":1,"type":"tag"},{"name":"websocket","count":1,"type":"tag"},{"name":"mysql","count":1,"type":"tag"},{"name":"launchpad","count":1,"type":"tag"},{"name":"rounting,typescript","count":1,"type":"tag"},{"name":"azure","count":2,"type":"tag"},{"name":"validation","count":1,"type":"tag"},{"name":"batch","count":1,"type":"tag"},{"name":"logging","count":1,"type":"tag"},{"name":"utils","count":1,"type":"tag"},{"name":"mock","count":1,"type":"tag"},{"name":"sap","count":1,"type":"tag"},{"name":"sample","count":12,"type":"tag"},{"name":"wdi5","count":1,"type":"tag"},{"name":"apache-2.0","count":30,"type":"license"},{"name":"mit","count":9,"type":"license"}]}